"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addTracerToHandlers = addTracerToHandlers;
const tracer_1 = require("./tracer");
function addTracerToHandlers(tracer, handlers) {
    if (handlers == null) {
        return [new tracer_1.LangChainTracer(tracer)];
    }
    if (Array.isArray(handlers)) {
        const tracerAlreadyRegistered = handlers.some((handler) => handler instanceof tracer_1.LangChainTracer);
        if (!tracerAlreadyRegistered) {
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            handlers.push(new tracer_1.LangChainTracer(tracer));
        }
        return handlers;
    }
    const tracerAlreadyRegistered = handlers.inheritableHandlers.some((handler) => handler instanceof tracer_1.LangChainTracer) ||
        handlers.handlers.some((handler) => handler instanceof tracer_1.LangChainTracer);
    if (tracerAlreadyRegistered) {
        return handlers;
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    handlers.addHandler(new tracer_1.LangChainTracer(tracer), true);
    return handlers;
}
//# sourceMappingURL=instrumentationUtils.js.map