import{P as m,c as B,r as s,j as t,D as R,h as G,k as H,B as u,S,l as b,m as M,aa as V,s as W,u as z,M as U,ad as Y,ab as K,e as Q,g as O}from"./index-B1XR3Coy.js";import{I as X}from"./ItemCard-DFH1pXJi.js";import{A as Z}from"./AssistantDialog-BG0DIOgO.js";import{C as _}from"./CredentialInputHandler-NSWgGX5U.js";import{D as $}from"./Dropdown-BH_BuIwh.js";import{a as N}from"./assistants-C-o7l-z6.js";import{V as tt}from"./ViewHeader-jo2V0q71.js";import{E as st}from"./ErrorBoundary-WOMkE_83.js";import{A as et}from"./assistant_empty-BAOmXGQM.js";import{I as at}from"./IconPlus-DpyX5kZB.js";import{S as D}from"./Skeleton-BQAmmov-.js";import"./Tooltip-9ICsuaYn.js";import"./TooltipWithParser-C72LCUcD.js";import"./index-D--Rb2MU.js";import"./MultiDropdown-OnTaU3K-.js";import"./Autocomplete-2B99MXTa.js";import"./Close-CA_iFeNy.js";import"./FormControl-Cb0ROeST.js";import"./TextField-BEeUeVUl.js";import"./InputLabel-HPVYUEFn.js";import"./File-B2PWlg1I.js";import"./BackdropLoader-C982mQas.js";import"./ConfirmDialog-Bksga_et.js";import"./Switch-BtbcRzr_.js";import"./v4-D8aEg3BZ.js";import"./CredentialListDialog-ooDI7A-3.js";import"./Input-C2v4FwXn.js";import"./ListItem-C9nlU6HX.js";import"./main-BBsr8sqY.js";import"./IconArrowsMaximize-BrsSDZNx.js";import"./IconAlertTriangle-Bdlxpe5D.js";import"./InputAdornment-D6_duzKN.js";import"./IconSearch-BzBgax5m.js";import"./StyledFab-BqTal21_.js";import"./IconCopy-BBl1XuSo.js";const w=({show:g,dialogProps:a,onCancel:h,onAssistantSelected:I,setError:c})=>{const p=document.getElementById("portal"),i=B(N.getAllAvailableAssistants),[o,x]=s.useState(""),[A,f]=s.useState([]),[l,j]=s.useState("");s.useEffect(()=>()=>{x(""),f([]),j("")},[a]),s.useEffect(()=>{if(i.data&&i.data.length){const r=[];for(let d=0;d<i.data.length;d+=1)r.push({label:i.data[d].name,name:i.data[d].id,description:i.data[d].instructions});f(r)}},[i.data]),s.useEffect(()=>{i.error&&c&&c(i.error)},[i.error]);const C=g?t.jsxs(R,{fullWidth:!0,maxWidth:"xs",open:g,onClose:h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[t.jsx(G,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title}),t.jsxs(H,{children:[t.jsxs(u,{sx:{p:2},children:[t.jsx(S,{sx:{position:"relative"},direction:"row",children:t.jsxs(b,{variant:"overline",children:["OpenAI Credential",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx(_,{data:o?{credential:o}:{},inputParam:{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["openAIApi"]},onSelect:r=>{x(r),r&&i.request(r)}},o)]}),o&&t.jsxs(u,{sx:{p:2},children:[t.jsx(S,{sx:{position:"relative"},direction:"row",children:t.jsxs(b,{variant:"overline",children:["Assistants",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx($,{name:l,options:A,onSelect:r=>j(r),value:l??"choose an option"})]})]}),l&&t.jsx(M,{children:t.jsx(V,{variant:"contained",onClick:()=>I(l,o),children:"Load"})})]}):null;return W.createPortal(C,p)};w.propTypes={show:m.bool,dialogProps:m.object,onCancel:m.func,onAssistantSelected:m.func,setError:m.func};const Rt=()=>{var E;const g=z(),a=B(N.getAllAssistants),[h,I]=s.useState(!0),[c,p]=s.useState(null),[i,o]=s.useState(!1),[x,A]=s.useState({}),[f,l]=s.useState(!1),[j,C]=s.useState({}),r=()=>{C({title:"Load Existing Assistant"}),l(!0)},[d,L]=s.useState(""),k=e=>{L(e.target.value)},T=(e,n)=>{l(!1),y(e,n)},y=(e,n)=>{A({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add",selectedOpenAIAssistantId:e,credential:n}),o(!0)},q=e=>{A({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:e}),o(!0)},F=()=>{o(!1),a.request("OPENAI")};function J(e){const n=JSON.parse(e.details);return n&&n.name&&n.name.toLowerCase().indexOf(d.toLowerCase())>-1}return s.useEffect(()=>{a.request("OPENAI")},[]),s.useEffect(()=>{I(a.loading)},[a.loading]),s.useEffect(()=>{a.error&&p(a.error)},[a.error]),t.jsxs(t.Fragment,{children:[t.jsx(U,{children:c?t.jsx(st,{error:c}):t.jsxs(S,{flexDirection:"column",sx:{gap:3},children:[t.jsxs(tt,{isBackButton:!0,onSearchChange:k,search:!0,searchPlaceholder:"Search Assistants",title:"OpenAI Assistant",description:"Create assistants using OpenAI Assistant API",onBack:()=>g(-1),children:[t.jsx(Y,{permissionId:"assistants:create",variant:"outlined",onClick:r,startIcon:t.jsx(K,{}),sx:{borderRadius:2,height:40},children:"Load"}),t.jsx(Q,{permissionId:"assistants:create",variant:"contained",sx:{borderRadius:2,height:40},onClick:y,startIcon:t.jsx(at,{}),children:"Add"})]}),h?t.jsxs(u,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:O,children:[t.jsx(D,{variant:"rounded",height:160}),t.jsx(D,{variant:"rounded",height:160}),t.jsx(D,{variant:"rounded",height:160})]}):t.jsx(u,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:O,children:a.data&&((E=a.data)==null?void 0:E.filter(J).map((e,n)=>{var v,P;return t.jsx(X,{data:{name:(v=JSON.parse(e.details))==null?void 0:v.name,description:(P=JSON.parse(e.details))==null?void 0:P.instructions,iconSrc:e.iconSrc},onClick:()=>q(e)},n)}))}),!h&&(!a.data||a.data.length===0)&&t.jsxs(S,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[t.jsx(u,{sx:{p:2,height:"auto"},children:t.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:et,alt:"AssistantEmptySVG"})}),t.jsx("div",{children:"No OpenAI Assistants Added Yet"})]})]})}),t.jsx(w,{show:f,dialogProps:j,onCancel:()=>l(!1),onAssistantSelected:T,setError:p}),t.jsx(Z,{show:i,dialogProps:x,onCancel:()=>o(!1),onConfirm:F,setError:p})]})};export{Rt as default};
