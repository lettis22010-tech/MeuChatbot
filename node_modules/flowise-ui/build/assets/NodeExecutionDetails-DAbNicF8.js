import{af as an,r as w,cO as Ve,b4 as me,f as xt,i as yt,j as i,b1 as cn,bW as R,cc as le,t as J,w as ae,a3 as vt,aF as Ct,P as H,ae as Tt,a as wt,R as kt,B as L,cP as un,A as dn,d as oe,l as G,C as re,T as it,cQ as st,ba as ge,ag as lt,n as Oe,D as at,h as pn,k as ct,m as fn,b9 as gn}from"./index-B1XR3Coy.js";import{s as ke}from"./createStyled-BzRwilhm.js";import{A as ut,d as dt,e as pt,M as Ie}from"./MemoizedReactMarkdown-CNH2mkE4.js";import{R as mn}from"./main-BBsr8sqY.js";import{C as bn}from"./CodeEditor-BjDzi2Vy.js";import{I as In}from"./IconClock-eC9b3RM9.js";import{T as hn}from"./ToggleButtonGroup-D1WH89Fe.js";import{C as ft}from"./CardMedia-DxratGiC.js";import{T as xn}from"./TextField-BEeUeVUl.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yn=an("outline","coins","IconCoins",[["path",{d:"M9 14c0 1.657 2.686 3 6 3s6 -1.343 6 -3s-2.686 -3 -6 -3s-6 1.343 -6 3z",key:"svg-0"}],["path",{d:"M9 14v4c0 1.656 2.686 3 6 3s6 -1.344 6 -3v-4",key:"svg-1"}],["path",{d:"M3 6c0 1.072 1.144 2.062 3 2.598s4.144 .536 6 0c1.856 -.536 3 -1.526 3 -2.598c0 -1.072 -1.144 -2.062 -3 -2.598s-4.144 -.536 -6 0c-1.856 .536 -3 1.526 -3 2.598z",key:"svg-2"}],["path",{d:"M3 6v10c0 .888 .772 1.45 2 2",key:"svg-3"}],["path",{d:"M3 11c0 .888 .772 1.45 2 2",key:"svg-4"}]]);const gt=e=>e,vn=()=>{let e=gt;return{configure(t){e=t},generate(t){return e(t)},reset(){e=gt}}},Cn=vn(),Tn={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ue(e,t,n="Mui"){const o=Tn[t];return o?`${n}-${o}`:`${Cn.generate(e)}-${t}`}function Et(e,t,n="Mui"){const o={};return t.forEach(r=>{o[r]=Ue(e,r,n)}),o}const wn=typeof window<"u"?w.useLayoutEffect:w.useEffect;function kn(e){return e&&e.ownerDocument||document}function En(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Te(e){const t=w.useRef(e);return wn(()=>{t.current=e}),w.useRef((...n)=>(0,t.current)(...n)).current}function we(...e){return w.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{En(n,t)})},e)}function Rt(e,t,n=void 0){const o={};for(const r in e){const I=e[r];let p="",u=!0;for(let b=0;b<I.length;b+=1){const d=I[b];d&&(p+=(u===!0?"":" ")+t(d),u=!1,n&&n[d]&&(p+=" "+n[d]))}o[r]=p}return o}function Rn(e){return typeof e=="string"}function jn(e,t,n){return e===void 0||Rn(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function W(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{n[o]=e[o]}),n}function mt(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function Sn(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:r,className:I}=e;if(!t){const a=Ve(n==null?void 0:n.className,I,r==null?void 0:r.className,o==null?void 0:o.className),x={...n==null?void 0:n.style,...r==null?void 0:r.style,...o==null?void 0:o.style},g={...n,...r,...o};return a.length>0&&(g.className=a),Object.keys(x).length>0&&(g.style=x),{props:g,internalRef:void 0}}const p=W({...r,...o}),u=mt(o),b=mt(r),d=t(p),s=Ve(d==null?void 0:d.className,n==null?void 0:n.className,I,r==null?void 0:r.className,o==null?void 0:o.className),l={...d==null?void 0:d.style,...n==null?void 0:n.style,...r==null?void 0:r.style,...o==null?void 0:o.style},f={...d,...n,...b,...u};return s.length>0&&(f.className=s),Object.keys(l).length>0&&(f.style=l),{props:f,internalRef:d.ref}}function se(e,t,n){return typeof e=="function"?e(t,n):e}function he(e){var l;const{elementType:t,externalSlotProps:n,ownerState:o,skipResolvingSlotProps:r=!1,...I}=e,p=r?{}:se(n,o),{props:u,internalRef:b}=Sn({...I,externalSlotProps:p}),d=we(b,p==null?void 0:p.ref,(l=e.additionalProps)==null?void 0:l.ref);return jn(t,{...u,ref:d},o)}const Mn=w.createContext(),Pn=()=>w.useContext(Mn)??!1,An=(e={})=>me.get("/executions",{params:e}),Dn=e=>me.delete("/executions",{data:{executionIds:e}}),On=e=>me.get(`/executions/${e}`),$n=e=>me.get(`/public-executions/${e}`),Ln=(e,t)=>me.put(`/executions/${e}`,t),ir={getAllExecutions:An,deleteExecutions:Dn,getExecutionById:On,getExecutionByIdPublic:$n,updateExecution:Ln};var Ge={},Fn=yt;Object.defineProperty(Ge,"__esModule",{value:!0});var Vn=Ge.default=void 0,Nn=Fn(xt()),_n=i,Bn=(0,Nn.default)((0,_n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");Vn=Ge.default=Bn;var We={},zn=yt;Object.defineProperty(We,"__esModule",{value:!0});var Kn=We.default=void 0,Un=zn(xt()),Gn=i,Wn=(0,Un.default)((0,Gn.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");Kn=We.default=Wn;function qn(e){return Ue("MuiRichTreeView",e)}Et("MuiRichTreeView",["root"]);function jt(e){return cn}const Jn=(e,t)=>{const n=w.useRef({}),[o,r]=w.useState(()=>{const p={};return e.forEach(u=>{u.models&&Object.entries(u.models).forEach(([b,d])=>{n.current[b]={isControlled:t[b]!==void 0,getDefaultValue:d.getDefaultValue},p[b]=d.getDefaultValue(t)})}),p});return Object.fromEntries(Object.entries(n.current).map(([p,u])=>{const b=t[p]??o[p];return[p,{value:b,setControlledValue:d=>{u.isControlled||r(s=>R({},s,{[p]:d}))}}]}))};class Xn{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,n,o={}){let r=this.events[t];r||(r={highPriority:new Map,regular:new Map},this.events[t]=r),o.isFirst?r.highPriority.set(n,!0):r.regular.set(n,!0)}removeListener(t,n){this.events[t]&&(this.events[t].regular.delete(n),this.events[t].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(t,...n){const o=this.events[t];if(!o)return;const r=Array.from(o.highPriority.keys()),I=Array.from(o.regular.keys());for(let p=r.length-1;p>=0;p-=1){const u=r[p];o.highPriority.has(u)&&u.apply(this,n)}for(let p=0;p<I.length;p+=1){const u=I[p];o.regular.has(u)&&u.apply(this,n)}}once(t,n){const o=this;this.on(t,function r(...I){o.removeListener(t,r),n.apply(o,I)})}}const Zn=e=>e.isPropagationStopped!==void 0,St=()=>{const[e]=w.useState(()=>new Xn),t=w.useCallback((...o)=>{const[r,I,p={}]=o;p.defaultMuiPrevented=!1,!(Zn(p)&&p.isPropagationStopped())&&e.emit(r,I,p)},[e]),n=w.useCallback((o,r)=>(e.on(o,r),()=>{e.removeListener(o,r)}),[e]);return{instance:{$$publishEvent:t,$$subscribeEvent:n}}};St.params={};const Mt=({plugins:e})=>{const t=new Set(e);return{instance:{getAvailablePlugins:()=>t}}};Mt.params={};let bt=0;const Qn=()=>(bt+=1,`mui-tree-view-${bt}`),qe=({id:e,treeId:t="",itemId:n})=>e??`${t}-${n}`,Je=({params:e,state:t,setState:n})=>{w.useEffect(()=>{n(r=>r.id.treeId===e.id&&r.id.treeId!==void 0?r:R({},r,{id:R({},r.id,{treeId:e.id??Qn()})}))},[n,e.id]);const o=e.id??t.id.treeId;return{getRootProps:()=>({id:o}),contextValue:{treeId:o}}};Je.params={id:!0};Je.getInitialState=({id:e})=>({id:{treeId:e??void 0}});const Yn=[St,Mt,Je],Hn=["slots","slotProps","apiRef","experimentalFeatures"],eo=e=>{let{props:{slots:t,slotProps:n,apiRef:o,experimentalFeatures:r},plugins:I}=e,p=le(e.props,Hn);const u={};I.forEach(f=>{Object.assign(u,f.params)});const b={},d={};Object.keys(p).forEach(f=>{const a=p[f];u[f]?b[f]=a:d[f]=a});const s=r??{},l=I.reduce((f,a)=>a.getDefaultizedParams?a.getDefaultizedParams({params:f,experimentalFeatures:s}):f,b);return{apiRef:o,forwardedProps:d,pluginParams:l,slots:t??{},slotProps:n??{},experimentalFeatures:s}},to=({plugins:e,instance:t,publicAPI:n,rootRef:o})=>({runItemPlugins:u=>{let b=null,d=null;const s=[],l={};e.forEach(x=>{if(!x.itemPlugin)return;const g=x.itemPlugin({props:u,rootRef:b,contentRef:d});g!=null&&g.rootRef&&(b=g.rootRef),g!=null&&g.contentRef&&(d=g.contentRef),g!=null&&g.propsEnhancers&&(s.push(g.propsEnhancers),Object.keys(g.propsEnhancers).forEach(m=>{l[m]=!0}))});const f=x=>g=>{const m={};return s.forEach(h=>{const y=h[x];y!=null&&Object.assign(m,y(g))}),m},a=Object.fromEntries(Object.keys(l).map(x=>[x,f(x)]));return{contentRef:d,rootRef:b,propsEnhancers:a}},wrapItem:({itemId:u,children:b})=>{let d=b;for(let s=e.length-1;s>=0;s-=1){const l=e[s];l.wrapItem&&(d=l.wrapItem({itemId:u,children:d,instance:t}))}return d},wrapRoot:({children:u})=>{let b=u;for(let d=e.length-1;d>=0;d-=1){const s=e[d];s.wrapRoot&&(b=s.wrapRoot({children:b,instance:t}))}return b},instance:t,rootRef:o,publicAPI:n});function no(e){const t=w.useRef({});return e?(e.current==null&&(e.current={}),e.current):t.current}const oo=({plugins:e,rootRef:t,props:n})=>{const o=[...Yn,...e],{pluginParams:r,forwardedProps:I,apiRef:p,experimentalFeatures:u,slots:b,slotProps:d}=eo({plugins:o,props:n}),s=Jn(o,r),f=w.useRef({}).current,a=no(p),x=w.useRef(null),g=we(x,t),m=to({plugins:o,instance:f,publicAPI:a,rootRef:x}),[h,y]=w.useState(()=>{const A={};return o.forEach($=>{$.getInitialState&&Object.assign(A,$.getInitialState(r))}),A}),c=[],P=A=>{const $=A({instance:f,params:r,slots:b,slotProps:d,experimentalFeatures:u,state:h,setState:y,rootRef:x,models:s,plugins:o});$.getRootProps&&c.push($.getRootProps),$.publicAPI&&Object.assign(a,$.publicAPI),$.instance&&Object.assign(f,$.instance),$.contextValue&&Object.assign(m,$.contextValue)};return o.forEach(P),{getRootProps:(A={})=>{const $=R({role:"tree"},I,A,{ref:g});return c.forEach(U=>{Object.assign($,U(A))}),$},rootRef:g,contextValue:m,instance:f}},Pt=w.createContext(null);function ro(e){const{value:t,children:n}=e;return i.jsx(Pt.Provider,{value:t,children:t.wrapRoot({children:n,instance:t.instance})})}const ye=()=>{const e=w.useContext(Pt);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},io=(e,t,n)=>{e.$$publishEvent(t,n)},Ce="__TREE_VIEW_ROOT_PARENT_ID__",so=e=>{const t={};return e.forEach((n,o)=>{t[n]=o}),t},Xe=w.createContext(()=>-1),lo=["children"],At=({items:e,isItemDisabled:t,getItemLabel:n,getItemId:o})=>{const r={},I={},p={[Ce]:[]},u=(d,s,l)=>{var g,m;const f=o?o(d):d.id;if(f==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(d)].join(`
`));if(r[f]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${f}"`].join(`
`));const a=n?n(d):d.label;if(a==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(d)].join(`
`));r[f]={id:f,label:a,parentId:l,idAttribute:void 0,expandable:!!((g=d.children)!=null&&g.length),disabled:t?t(d):!1,depth:s},I[f]=d;const x=l??Ce;p[x]||(p[x]=[]),p[x].push(f),(m=d.children)==null||m.forEach(h=>u(h,s+1,f))};e.forEach(d=>u(d,0,null));const b={};return Object.keys(p).forEach(d=>{b[d]=so(p[d])}),{itemMetaMap:r,itemMap:I,itemOrderedChildrenIds:p,itemChildrenIndexes:b}},Se=({instance:e,params:t,state:n,setState:o,experimentalFeatures:r})=>{const I=w.useCallback(h=>n.items.itemMetaMap[h],[n.items.itemMetaMap]),p=w.useCallback(h=>n.items.itemMap[h],[n.items.itemMap]),u=w.useCallback(()=>{const h=y=>{const c=n.items.itemMap[y],P=le(c,lo),k=n.items.itemOrderedChildrenIds[y];return k&&(P.children=k.map(h)),P};return n.items.itemOrderedChildrenIds[Ce].map(h)},[n.items.itemMap,n.items.itemOrderedChildrenIds]),b=w.useCallback(h=>{if(h==null)return!1;let y=e.getItemMeta(h);if(!y)return!1;if(y.disabled)return!0;for(;y.parentId!=null;)if(y=e.getItemMeta(y.parentId),y.disabled)return!0;return!1},[e]),d=w.useCallback(h=>{const y=e.getItemMeta(h).parentId??Ce;return n.items.itemChildrenIndexes[y][h]},[e,n.items.itemChildrenIndexes]),s=w.useCallback(h=>n.items.itemOrderedChildrenIds[h??Ce]??[],[n.items.itemOrderedChildrenIds]),l=h=>{const y=e.getItemMeta(h);return y==null?null:document.getElementById(qe({treeId:n.id.treeId,itemId:h,id:y.idAttribute}))},f=h=>t.disabledItemsFocusable?!0:!e.isItemDisabled(h),a=w.useRef(!1),x=w.useCallback(()=>{a.current=!0},[]),g=w.useCallback(()=>a.current,[]);return w.useEffect(()=>{e.areItemUpdatesPrevented()||o(h=>{const y=At({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel});return Object.values(h.items.itemMetaMap).forEach(c=>{y.itemMetaMap[c.id]||io(e,"removeItem",{id:c.id})}),R({},h,{items:y})})},[e,o,t.items,t.isItemDisabled,t.getItemId,t.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof t.itemChildrenIndentation=="number"?`${t.itemChildrenIndentation}px`:t.itemChildrenIndentation}}),publicAPI:{getItem:p,getItemDOMElement:l,getItemTree:u,getItemOrderedChildrenIds:s},instance:{getItemMeta:I,getItem:p,getItemTree:u,getItemsToRender:()=>{const h=y=>{var P;const c=n.items.itemMetaMap[y];return{label:c.label,itemId:c.id,id:c.idAttribute,children:(P=n.items.itemOrderedChildrenIds[y])==null?void 0:P.map(h)}};return n.items.itemOrderedChildrenIds[Ce].map(h)},getItemIndex:d,getItemDOMElement:l,getItemOrderedChildrenIds:s,isItemDisabled:b,isItemNavigable:f,preventItemUpdates:x,areItemUpdatesPrevented:g},contextValue:{items:{onItemClick:t.onItemClick,disabledItemsFocusable:t.disabledItemsFocusable,indentationAtItemLevel:r.indentationAtItemLevel??!1}}}};Se.getInitialState=e=>({items:At({items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel})});Se.getDefaultizedParams=({params:e})=>R({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1,itemChildrenIndentation:e.itemChildrenIndentation??"12px"});Se.wrapRoot=({children:e,instance:t})=>i.jsx(Xe.Provider,{value:n=>{var o;return((o=t.getItemMeta(n))==null?void 0:o.depth)??0},children:e});Se.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,onItemClick:!0,itemChildrenIndentation:!0};const Ne=({instance:e,params:t,models:n})=>{const o=w.useMemo(()=>{const l=new Map;return n.expandedItems.value.forEach(f=>{l.set(f,!0)}),l},[n.expandedItems.value]),r=(l,f)=>{var a;(a=t.onExpandedItemsChange)==null||a.call(t,l,f),n.expandedItems.setControlledValue(f)},I=w.useCallback(l=>o.has(l),[o]),p=w.useCallback(l=>{var f;return!!((f=e.getItemMeta(l))!=null&&f.expandable)},[e]),u=Te((l,f)=>{const a=e.isItemExpanded(f);e.setItemExpansion(l,f,!a)}),b=Te((l,f,a)=>{if(e.isItemExpanded(f)===a)return;let g;a?g=[f].concat(n.expandedItems.value):g=n.expandedItems.value.filter(m=>m!==f),t.onItemExpansionToggle&&t.onItemExpansionToggle(l,f,a),r(l,g)}),d=(l,f)=>{const a=e.getItemMeta(f),g=e.getItemOrderedChildrenIds(a.parentId).filter(h=>e.isItemExpandable(h)&&!e.isItemExpanded(h)),m=n.expandedItems.value.concat(g);g.length>0&&(t.onItemExpansionToggle&&g.forEach(h=>{t.onItemExpansionToggle(l,h,!0)}),r(l,m))},s=w.useMemo(()=>t.expansionTrigger?t.expansionTrigger:e.isTreeViewEditable?"iconContainer":"content",[t.expansionTrigger,e.isTreeViewEditable]);return{publicAPI:{setItemExpansion:b},instance:{isItemExpanded:I,isItemExpandable:p,setItemExpansion:b,toggleItemExpansion:u,expandAllSiblings:d},contextValue:{expansion:{expansionTrigger:s}}}};Ne.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const ao=[];Ne.getDefaultizedParams=({params:e})=>R({},e,{defaultExpandedItems:e.defaultExpandedItems??ao});Ne.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const Dt=(e,t)=>{let n=t.length-1;for(;n>=0&&!e.isItemNavigable(t[n]);)n-=1;if(n!==-1)return t[n]},Ot=(e,t)=>{const n=e.getItemMeta(t),o=e.getItemOrderedChildrenIds(n.parentId),r=e.getItemIndex(t);if(r===0)return n.parentId;let I=r-1;for(;!e.isItemNavigable(o[I])&&I>=0;)I-=1;if(I===-1)return n.parentId==null?null:Ot(e,n.parentId);let p=o[I],u=Dt(e,e.getItemOrderedChildrenIds(p));for(;e.isItemExpanded(p)&&u!=null;)p=u,u=e.getItemOrderedChildrenIds(p).find(e.isItemNavigable);return p},Le=(e,t)=>{if(e.isItemExpanded(t)){const o=e.getItemOrderedChildrenIds(t).find(e.isItemNavigable);if(o!=null)return o}let n=e.getItemMeta(t);for(;n!=null;){const o=e.getItemOrderedChildrenIds(n.parentId),r=e.getItemIndex(n.id);if(r<o.length-1){let I=r+1;for(;!e.isItemNavigable(o[I])&&I<o.length-1;)I+=1;if(e.isItemNavigable(o[I]))return o[I]}n=e.getItemMeta(n.parentId)}return null},$t=e=>{let t=null;for(;t==null||e.isItemExpanded(t);){const n=e.getItemOrderedChildrenIds(t),o=Dt(e,n);if(o==null)return t;t=o}return t},Re=e=>e.getItemOrderedChildrenIds(null).find(e.isItemNavigable),Lt=(e,t,n)=>{if(t===n)return[t,n];const o=e.getItemMeta(t),r=e.getItemMeta(n);if(o.parentId===r.id||r.parentId===o.id)return r.parentId===o.id?[o.id,r.id]:[r.id,o.id];const I=[o.id],p=[r.id];let u=o.parentId,b=r.parentId,d=p.indexOf(u)!==-1,s=I.indexOf(b)!==-1,l=!0,f=!0;for(;!s&&!d;)l&&(I.push(u),d=p.indexOf(u)!==-1,l=u!==null,!d&&l&&(u=e.getItemMeta(u).parentId)),f&&!d&&(p.push(b),s=I.indexOf(b)!==-1,f=b!==null,!s&&f&&(b=e.getItemMeta(b).parentId));const a=d?u:b,x=e.getItemOrderedChildrenIds(a),g=I[I.indexOf(a)-1],m=p[p.indexOf(a)-1];return x.indexOf(g)<x.indexOf(m)?[t,n]:[n,t]},co=(e,t,n)=>{const o=b=>{if(e.isItemExpandable(b)&&e.isItemExpanded(b))return e.getItemOrderedChildrenIds(b)[0];let d=e.getItemMeta(b);for(;d!=null;){const s=e.getItemOrderedChildrenIds(d.parentId),l=e.getItemIndex(d.id);if(l<s.length-1)return s[l+1];d=e.getItemMeta(d.parentId)}throw new Error("Invalid range")},[r,I]=Lt(e,t,n),p=[r];let u=r;for(;u!==I;)u=o(u),e.isItemDisabled(u)||p.push(u);return p},uo=e=>{let t=Re(e);const n=[];for(;t!=null;)n.push(t),t=Le(e,t);return n},je=(e,t)=>t!==e.closest('*[role="treeitem"]'),Fe=e=>Array.isArray(e)?e:e!=null?[e]:[],Ke=e=>{const t={};return e.forEach(n=>{t[n]=!0}),t},_e=({instance:e,params:t,models:n})=>{const o=w.useRef(null),r=w.useRef({}),I=w.useMemo(()=>{const g=new Map;return Array.isArray(n.selectedItems.value)?n.selectedItems.value.forEach(m=>{g.set(m,!0)}):n.selectedItems.value!=null&&g.set(n.selectedItems.value,!0),g},[n.selectedItems.value]),p=(g,m)=>{if(t.onItemSelectionToggle)if(t.multiSelect){const h=m.filter(c=>!e.isItemSelected(c)),y=n.selectedItems.value.filter(c=>!m.includes(c));h.forEach(c=>{t.onItemSelectionToggle(g,c,!0)}),y.forEach(c=>{t.onItemSelectionToggle(g,c,!1)})}else m!==n.selectedItems.value&&(n.selectedItems.value!=null&&t.onItemSelectionToggle(g,n.selectedItems.value,!1),m!=null&&t.onItemSelectionToggle(g,m,!0));t.onSelectedItemsChange&&t.onSelectedItemsChange(g,m),n.selectedItems.setControlledValue(m)},u=g=>I.has(g),b=({event:g,itemId:m,keepExistingSelection:h=!1,shouldBeSelected:y})=>{if(t.disableSelection)return;let c;if(h){const P=Fe(n.selectedItems.value),k=e.isItemSelected(m);k&&(y===!1||y==null)?c=P.filter(A=>A!==m):!k&&(y===!0||y==null)?c=[m].concat(P):c=P}else y===!1||y==null&&e.isItemSelected(m)?c=t.multiSelect?[]:null:c=t.multiSelect?[m]:m;p(g,c),o.current=m,r.current={}},d=(g,[m,h])=>{if(t.disableSelection||!t.multiSelect)return;let y=Fe(n.selectedItems.value).slice();Object.keys(r.current).length>0&&(y=y.filter(A=>!r.current[A]));const c=Ke(y),P=co(e,m,h),k=P.filter(A=>!c[A]);y=y.concat(k),p(g,y),r.current=Ke(P)};return{getRootProps:()=>({"aria-multiselectable":t.multiSelect}),publicAPI:{selectItem:b},instance:{isItemSelected:u,selectItem:b,selectAllNavigableItems:g=>{if(t.disableSelection||!t.multiSelect)return;const m=uo(e);p(g,m),r.current=Ke(m)},expandSelectionRange:(g,m)=>{if(o.current!=null){const[h,y]=Lt(e,m,o.current);d(g,[h,y])}},selectRangeFromStartToItem:(g,m)=>{d(g,[Re(e),m])},selectRangeFromItemToEnd:(g,m)=>{d(g,[m,$t(e)])},selectItemFromArrowNavigation:(g,m,h)=>{if(t.disableSelection||!t.multiSelect)return;let y=Fe(n.selectedItems.value).slice();Object.keys(r.current).length===0?(y.push(h),r.current={[m]:!0,[h]:!0}):(r.current[m]||(r.current={}),r.current[h]?(y=y.filter(c=>c!==m),delete r.current[m]):(y.push(h),r.current[h]=!0)),p(g,y)}},contextValue:{selection:{multiSelect:t.multiSelect,checkboxSelection:t.checkboxSelection,disableSelection:t.disableSelection}}}};_e.models={selectedItems:{getDefaultValue:e=>e.defaultSelectedItems}};const po=[];_e.getDefaultizedParams=({params:e})=>R({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,checkboxSelection:e.checkboxSelection??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?po:null)});_e.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const It=1e3;class fo{constructor(t=It){this.timeouts=new Map,this.cleanupTimeout=It,this.cleanupTimeout=t}register(t,n,o){this.timeouts||(this.timeouts=new Map);const r=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(o.cleanupToken)},this.cleanupTimeout);this.timeouts.set(o.cleanupToken,r)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class go{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,o){this.registry.register(t,n,o)}unregister(t){this.registry.unregister(t)}reset(){}}class mo{}function bo(e){let t=0;return function(o,r,I){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new go:new fo);const[p]=w.useState(new mo),u=w.useRef(null),b=w.useRef(void 0);b.current=I;const d=w.useRef(null);if(!u.current&&b.current){const s=(l,f)=>{var a;f.defaultMuiPrevented||(a=b.current)==null||a.call(b,l,f)};u.current=o.$$subscribeEvent(r,s),t+=1,d.current={cleanupToken:t},e.registry.register(p,()=>{var l;(l=u.current)==null||l.call(u),u.current=null,d.current=null},d.current)}else!b.current&&u.current&&(u.current(),u.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));w.useEffect(()=>{if(!u.current&&b.current){const s=(l,f)=>{var a;f.defaultMuiPrevented||(a=b.current)==null||a.call(b,l,f)};u.current=o.$$subscribeEvent(r,s)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var s;(s=u.current)==null||s.call(u),u.current=null}},[o,r])}}const Io={registry:null},ho=bo(Io),Ft=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?Ft(t.shadowRoot):t:null},xo=(e,t)=>{let n=Fe(t).find(o=>{if(!e.isItemNavigable(o))return!1;const r=e.getItemMeta(o);return r&&(r.parentId==null||e.isItemExpanded(r.parentId))});return n==null&&(n=Re(e)),n},Ze=({instance:e,params:t,state:n,setState:o,models:r,rootRef:I})=>{const p=xo(e,r.selectedItems.value),u=Te(m=>{const h=typeof m=="function"?m(n.focusedItemId):m;n.focusedItemId!==h&&o(y=>R({},y,{focusedItemId:h}))}),b=w.useCallback(()=>!!I.current&&I.current.contains(Ft(kn(I.current))),[I]),d=w.useCallback(m=>n.focusedItemId===m&&b(),[n.focusedItemId,b]),s=m=>{const h=e.getItemMeta(m);return h&&(h.parentId==null||e.isItemExpanded(h.parentId))},l=(m,h)=>{const y=e.getItemDOMElement(h);y&&y.focus(),u(h),t.onItemFocus&&t.onItemFocus(m,h)},f=Te((m,h)=>{s(h)&&l(m,h)}),a=Te(()=>{if(n.focusedItemId==null)return;if(e.getItemMeta(n.focusedItemId)){const h=e.getItemDOMElement(n.focusedItemId);h&&h.blur()}u(null)}),x=m=>m===p;ho(e,"removeItem",({id:m})=>{n.focusedItemId===m&&l(null,p)});const g=m=>h=>{var y;(y=m.onFocus)==null||y.call(m,h),!h.defaultMuiPrevented&&h.target===h.currentTarget&&l(h,p)};return{getRootProps:m=>({onFocus:g(m)}),publicAPI:{focusItem:f},instance:{isItemFocused:d,canItemBeTabbed:x,focusItem:f,removeFocusedItem:a}}};Ze.getInitialState=()=>({focusedItemId:null});Ze.params={onItemFocus:!0};const xe=(e,t)=>e.getAvailablePlugins().has(t),yo=({props:e})=>{const{instance:t}=ye(),{label:n,itemId:o}=e,[r,I]=w.useState(n),p=t.isItemBeingEdited(o);return w.useEffect(()=>{p||I(n)},[p,n]),{propsEnhancers:{labelInput:({externalEventHandlers:u,interactions:b})=>t.isItemEditable(o)?{value:r??"","data-element":"labelInput",onChange:a=>{var x;(x=u.onChange)==null||x.call(u,a),I(a.target.value)},onKeyDown:a=>{var g;if((g=u.onKeyDown)==null||g.call(u,a),a.defaultMuiPrevented)return;const x=a.target;a.key==="Enter"&&x.value?b.handleSaveItemLabel(a,x.value):a.key==="Escape"&&b.handleCancelItemLabelEditing(a)},onBlur:a=>{var x;(x=u.onBlur)==null||x.call(u,a),!a.defaultMuiPrevented&&a.target.value&&b.handleSaveItemLabel(a,a.target.value)},autoFocus:!0,type:"text"}:{}}}},q=({instance:e,state:t,setState:n,params:o})=>{const r=w.useRef(t.editedItemId),I=l=>r.current===l,p=l=>{n(f=>R({},f,{editedItemId:l})),r.current=l},u=l=>l===t.editedItemId,b=!!o.isItemEditable,d=l=>{if(l==null||!b)return!1;const f=e.getItem(l);return f?typeof o.isItemEditable=="function"?o.isItemEditable(f):!!o.isItemEditable:!1},s=(l,f)=>{if(!f)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",l].join(`
`));n(a=>{const x=a.items.itemMetaMap[l];return x.label!==f?R({},a,{items:R({},a.items,{itemMetaMap:R({},a.items.itemMetaMap,{[l]:R({},x,{label:f})})})}):a}),o.onItemLabelChange&&o.onItemLabelChange(l,f)};return{instance:{setEditedItemId:p,isItemBeingEdited:u,updateItemLabel:s,isItemEditable:d,isTreeViewEditable:b,isItemBeingEditedRef:I},publicAPI:{updateItemLabel:s}}};q.itemPlugin=yo;q.getDefaultizedParams=({params:e,experimentalFeatures:t})=>{const n=t==null?void 0:t.labelEditing;return R({},e,{isItemEditable:n?e.isItemEditable??!1:!1})};q.getInitialState=()=>({editedItemId:null});q.params={onItemLabelChange:!0,isItemEditable:!0};function vo(e){return!!e&&e.length===1&&!!e.match(/\S/)}const Vt=({instance:e,params:t,state:n})=>{const o=Pn(),r=w.useRef({}),I=Te(s=>{r.current=s(r.current)});w.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const s={},l=f=>{s[f.id]=f.label.substring(0,1).toLowerCase()};Object.values(n.items.itemMetaMap).forEach(l),r.current=s},[n.items.itemMetaMap,t.getItemId,e]);const p=(s,l)=>{const f=l.toLowerCase(),a=h=>{const y=Le(e,h);return y===null?Re(e):y};let x=null,g=a(s);const m={};for(;x==null&&!m[g];)r.current[g]===f?x=g:(m[g]=!0,g=a(g));return x},u=s=>!t.disableSelection&&!e.isItemDisabled(s),b=s=>!e.isItemDisabled(s)&&e.isItemExpandable(s);return{instance:{updateFirstCharMap:I,handleItemKeyDown:(s,l)=>{if(s.defaultMuiPrevented||s.altKey||je(s.target,s.currentTarget))return;const f=s.ctrlKey||s.metaKey,a=s.key;switch(!0){case(a===" "&&u(l)):{s.preventDefault(),t.multiSelect&&s.shiftKey?e.expandSelectionRange(s,l):e.selectItem({event:s,itemId:l,keepExistingSelection:t.multiSelect,shouldBeSelected:t.multiSelect?void 0:!0});break}case a==="Enter":{xe(e,q)&&e.isItemEditable(l)&&!e.isItemBeingEdited(l)?e.setEditedItemId(l):b(l)?(e.toggleItemExpansion(s,l),s.preventDefault()):u(l)&&(t.multiSelect?(s.preventDefault(),e.selectItem({event:s,itemId:l,keepExistingSelection:!0})):e.isItemSelected(l)||(e.selectItem({event:s,itemId:l}),s.preventDefault()));break}case a==="ArrowDown":{const x=Le(e,l);x&&(s.preventDefault(),e.focusItem(s,x),t.multiSelect&&s.shiftKey&&u(x)&&e.selectItemFromArrowNavigation(s,l,x));break}case a==="ArrowUp":{const x=Ot(e,l);x&&(s.preventDefault(),e.focusItem(s,x),t.multiSelect&&s.shiftKey&&u(x)&&e.selectItemFromArrowNavigation(s,l,x));break}case(a==="ArrowRight"&&!o||a==="ArrowLeft"&&o):{if(f)return;if(e.isItemExpanded(l)){const x=Le(e,l);x&&(e.focusItem(s,x),s.preventDefault())}else b(l)&&(e.toggleItemExpansion(s,l),s.preventDefault());break}case(a==="ArrowLeft"&&!o||a==="ArrowRight"&&o):{if(f)return;if(b(l)&&e.isItemExpanded(l))e.toggleItemExpansion(s,l),s.preventDefault();else{const x=e.getItemMeta(l).parentId;x&&(e.focusItem(s,x),s.preventDefault())}break}case a==="Home":{u(l)&&t.multiSelect&&f&&s.shiftKey?e.selectRangeFromStartToItem(s,l):e.focusItem(s,Re(e)),s.preventDefault();break}case a==="End":{u(l)&&t.multiSelect&&f&&s.shiftKey?e.selectRangeFromItemToEnd(s,l):e.focusItem(s,$t(e)),s.preventDefault();break}case a==="*":{e.expandAllSiblings(s,l),s.preventDefault();break}case(String.fromCharCode(s.keyCode)==="A"&&f&&t.multiSelect&&!t.disableSelection):{e.selectAllNavigableItems(s),s.preventDefault();break}case(!f&&!s.shiftKey&&vo(a)):{const x=p(l,a);x!=null&&(e.focusItem(s,x),s.preventDefault());break}}}}}};Vt.params={};const Nt=({slots:e,slotProps:t})=>({contextValue:{icons:{slots:{collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,endIcon:e.endIcon},slotProps:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon}}}});Nt.params={};const Co=[Se,Ne,_e,Ze,Vt,Nt,q];function _t(e){const{instance:t,items:{onItemClick:n},selection:{multiSelect:o,checkboxSelection:r,disableSelection:I},expansion:{expansionTrigger:p}}=ye(),u=t.isItemExpandable(e),b=t.isItemExpanded(e),d=t.isItemFocused(e),s=t.isItemSelected(e),l=t.isItemDisabled(e),f=t!=null&&t.isItemBeingEdited?t==null?void 0:t.isItemBeingEdited(e):!1,a=t.isItemEditable?t.isItemEditable(e):!1,x=k=>{if(!l){d||t.focusItem(k,e);const A=o&&(k.shiftKey||k.ctrlKey||k.metaKey);u&&!(A&&t.isItemExpanded(e))&&t.toggleItemExpansion(k,e)}},g=k=>{l||(!d&&!f&&t.focusItem(k,e),o&&(k.shiftKey||k.ctrlKey||k.metaKey)?k.shiftKey?t.expandSelectionRange(k,e):t.selectItem({event:k,itemId:e,keepExistingSelection:!0}):t.selectItem({event:k,itemId:e,shouldBeSelected:!0}))},m=k=>{if(I||l)return;const A=k.nativeEvent.shiftKey;o&&A?t.expandSelectionRange(k,e):t.selectItem({event:k,itemId:e,keepExistingSelection:o,shouldBeSelected:k.target.checked})},h=k=>{(k.shiftKey||k.ctrlKey||k.metaKey||l)&&k.preventDefault()},y=()=>{xe(t,q)&&t.isItemEditable(e)&&(t.isItemBeingEdited(e)?t.setEditedItemId(null):t.setEditedItemId(e))};return{disabled:l,expanded:b,selected:s,focused:d,editable:a,editing:f,disableSelection:I,checkboxSelection:r,handleExpansion:x,handleSelection:g,handleCheckboxSelection:m,handleContentClick:n,preventSelection:h,expansionTrigger:p,toggleItemEditing:y,handleSaveItemLabel:(k,A)=>{xe(t,q)&&t.isItemBeingEditedRef(e)&&(t.updateItemLabel(e,A),y(),t.focusItem(k,e))},handleCancelItemLabelEditing:k=>{xe(t,q)&&t.isItemBeingEditedRef(e)&&(y(),t.focusItem(k,e))}}}const To=J("div",{name:"MuiTreeItem2DragAndDropOverlay",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ke(e)&&e!=="action"})(({theme:e})=>({position:"absolute",left:0,display:"flex",top:0,bottom:0,right:0,pointerEvents:"none",variants:[{props:{action:"make-child"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderRadius:e.shape.borderRadius,backgroundColor:e.vars?`rgba(${e.vars.palette.primary.darkChannel} / ${e.vars.palette.action.focusOpacity})`:ae(e.palette.primary.dark,e.palette.action.focusOpacity)}},{props:{action:"reorder-above"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderTop:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"reorder-below"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"move-to-parent"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * calc(var(--TreeView-itemDepth) - 1))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}}]}));function wo(e){return e.action==null?null:i.jsx(To,R({},e))}const ko=J("input",{name:"MuiTreeItem2",slot:"LabelInput",overridesResolver:(e,t)=>t.labelInput})(({theme:e})=>R({},e.typography.body1,{width:"100%",backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,border:"none",padding:"0 2px",boxSizing:"border-box","&:focus":{outline:`1px solid ${e.palette.primary.main}`}})),Eo=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown","dragAndDropOverlayProps","labelInputProps"],Bt=w.forwardRef(function(t,n){const{classes:o,className:r,displayIcon:I,expansionIcon:p,icon:u,label:b,itemId:d,onClick:s,onMouseDown:l,dragAndDropOverlayProps:f,labelInputProps:a}=t,x=le(t,Eo),{disabled:g,expanded:m,selected:h,focused:y,editing:c,editable:P,disableSelection:k,checkboxSelection:A,handleExpansion:$,handleSelection:U,handleCheckboxSelection:ee,handleContentClick:K,preventSelection:X,expansionTrigger:ce,toggleItemEditing:Z}=_t(d),Q=u||p||I,te=w.useRef(null),ue=V=>{X(V),l&&l(V)},de=V=>{var ne;K==null||K(V,d),!((ne=te.current)!=null&&ne.contains(V.target))&&(ce==="content"&&$(V),A||U(V),s&&s(V))},pe=V=>{V.defaultMuiPrevented||Z()};return i.jsxs("div",R({},x,{className:Ve(o.root,r,m&&o.expanded,h&&o.selected,y&&o.focused,g&&o.disabled,c&&o.editing,P&&o.editable),onClick:de,onMouseDown:ue,ref:n,children:[i.jsx("div",{className:o.iconContainer,children:Q}),A&&i.jsx(vt,{className:o.checkbox,checked:h,onChange:ee,disabled:g||k,ref:te,tabIndex:-1}),c?i.jsx(ko,R({},a,{className:o.labelInput})):i.jsx("div",R({className:o.label},P&&{onDoubleClick:pe},{children:b})),f&&i.jsx(wo,R({},f))]}))});function Ro(e){return Ue("MuiTreeItem",e)}const ie=Et("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label","checkbox","labelInput","editable","editing","dragAndDropOverlay"]),zt=Ct(i.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),Kt=Ct(i.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function Ut(e){const{children:t,itemId:n}=e,{wrapItem:o,instance:r}=ye();return o({children:t,itemId:n,instance:r})}Ut.propTypes={children:H.node,itemId:H.string.isRequired};const jo=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],So=["ownerState"],Mo=["ownerState"],Po=["ownerState"],Ao=jt(),Do=e=>{const{classes:t}=e;return Rt({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],labelInput:["labelInput"],editing:["editing"],editable:["editable"],groupTransition:["groupTransition"]},Ro,t)},Oo=J("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),$o=J(Bt,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${ie.iconContainer}`]:t.iconContainer},t.label&&{[`& .${ie.label}`]:t.label}],shouldForwardProp:e=>ke(e)&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ie.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${ie.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ie.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ae(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ae(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ae(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${ie.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ae(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${ie.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${ie.label}`]:R({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1),[`& .${ie.checkbox}`]:{padding:0},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}}]})),Lo=J(Tt,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition,shouldForwardProp:e=>ke(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),Fo=w.forwardRef(function(t,n){var He,et,tt,nt;const{icons:o,runItemPlugins:r,items:{disabledItemsFocusable:I,indentationAtItemLevel:p},selection:{disableSelection:u},expansion:{expansionTrigger:b},treeId:d,instance:s}=ye(),l=w.useContext(Xe),f=Ao({props:t,name:"MuiTreeItem"}),{children:a,className:x,slots:g,slotProps:m,ContentComponent:h=Bt,ContentProps:y,itemId:c,id:P,label:k,onClick:A,onMouseDown:$,onBlur:U,onKeyDown:ee}=f,K=le(f,jo),{expanded:X,focused:ce,selected:Z,disabled:Q,editing:te,handleExpansion:ue,handleCancelItemLabelEditing:de,handleSaveItemLabel:pe}=_t(c),{contentRef:V,rootRef:ne,propsEnhancers:N}=r(f),fe=w.useRef(null),v=w.useRef(null),j=we(n,ne,fe),O=we(y==null?void 0:y.ref,V,v),E={expandIcon:(g==null?void 0:g.expandIcon)??o.slots.expandIcon??zt,collapseIcon:(g==null?void 0:g.collapseIcon)??o.slots.collapseIcon??Kt,endIcon:(g==null?void 0:g.endIcon)??o.slots.endIcon,icon:g==null?void 0:g.icon,groupTransition:g==null?void 0:g.groupTransition},M=D=>Array.isArray(D)?D.length>0&&D.some(M):!!D,B=M(a),_=R({},f,{expanded:X,focused:ce,selected:Z,disabled:Q,indentationAtItemLevel:p}),C=Do(_),T=E.groupTransition??void 0,S=he({elementType:T,ownerState:{},externalSlotProps:m==null?void 0:m.groupTransition,additionalProps:R({unmountOnExit:!0,in:X,component:"ul",role:"group"},p?{indentationAtItemLevel:!0}:{}),className:C.groupTransition}),F=D=>{b==="iconContainer"&&ue(D)},z=X?E.collapseIcon:E.expandIcon,be=he({elementType:z,ownerState:{},externalSlotProps:D=>X?R({},se(o.slotProps.collapseIcon,D),se(m==null?void 0:m.collapseIcon,D)):R({},se(o.slotProps.expandIcon,D),se(m==null?void 0:m.expandIcon,D)),additionalProps:{onClick:F}}),Me=le(be,So),Pe=B&&z?i.jsx(z,R({},Me)):null,Be=B?void 0:E.endIcon,Jt=he({elementType:Be,ownerState:{},externalSlotProps:D=>B?{}:R({},se(o.slotProps.endIcon,D),se(m==null?void 0:m.endIcon,D))}),Xt=le(Jt,Mo),Zt=Be?i.jsx(Be,R({},Xt)):null,ze=E.icon,Qt=he({elementType:ze,ownerState:{},externalSlotProps:m==null?void 0:m.icon}),Yt=le(Qt,Po),Ht=ze?i.jsx(ze,R({},Yt)):null;let Ae;Z?Ae=!0:u||Q?Ae=void 0:Ae=!1;function en(D){!ce&&(!Q||I)&&D.currentTarget===D.target&&s.focusItem(D,c)}function tn(D){var ve,Ee,ot,rt;U==null||U(D),!(te||D.relatedTarget&&je(D.relatedTarget,fe.current)&&(D.target&&((Ee=(ve=D.target)==null?void 0:ve.dataset)==null?void 0:Ee.element)==="labelInput"&&je(D.target,fe.current)||((rt=(ot=D.relatedTarget)==null?void 0:ot.dataset)==null?void 0:rt.element)==="labelInput"))&&s.removeFocusedItem()}const nn=D=>{var ve,Ee;ee==null||ee(D),((Ee=(ve=D.target)==null?void 0:ve.dataset)==null?void 0:Ee.element)!=="labelInput"&&s.handleItemKeyDown(D,c)},on=qe({itemId:c,treeId:d,id:P}),rn=s.canItemBeTabbed(c)?0:-1,De={rootRefObject:fe,contentRefObject:v,interactions:{handleSaveItemLabel:pe,handleCancelItemLabelEditing:de}},sn=((He=N.root)==null?void 0:He.call(N,R({},De,{externalEventHandlers:W(K)})))??{},ln=((et=N.content)==null?void 0:et.call(N,R({},De,{externalEventHandlers:W(y)})))??{},Qe=((tt=N.dragAndDropOverlay)==null?void 0:tt.call(N,R({},De,{externalEventHandlers:{}})))??{},Ye=((nt=N.labelInput)==null?void 0:nt.call(N,R({},De,{externalEventHandlers:{}})))??{};return i.jsx(Ut,{itemId:c,children:i.jsxs(Oo,R({className:Ve(C.root,x),role:"treeitem","aria-expanded":B?X:void 0,"aria-selected":Ae,"aria-disabled":Q||void 0,id:on,tabIndex:rn},K,{ownerState:_,onFocus:en,onBlur:tn,onKeyDown:nn,ref:j,style:p?R({},K.style,{"--TreeView-itemDepth":typeof l=="function"?l(c):l}):K.style},sn,{children:[i.jsx($o,R({as:h,classes:{root:C.content,expanded:C.expanded,selected:C.selected,focused:C.focused,disabled:C.disabled,editable:C.editable,editing:C.editing,iconContainer:C.iconContainer,label:C.label,labelInput:C.labelInput,checkbox:C.checkbox},label:k,itemId:c,onClick:A,onMouseDown:$,icon:Ht,expansionIcon:Pe,displayIcon:Zt,ownerState:_},y,ln,Qe.action==null?{}:{dragAndDropOverlayProps:Qe},Ye.value==null?{}:{labelInputProps:Ye},{ref:O})),a&&i.jsx(Lo,R({as:T},S,{children:a}))]}))})}),Vo=["ownerState"];function No({slots:e,slotProps:t,label:n,id:o,itemId:r,itemsToRender:I}){const p=(e==null?void 0:e.item)??Fo,u=he({elementType:p,externalSlotProps:t==null?void 0:t.item,additionalProps:{itemId:r,id:o,label:n},ownerState:{itemId:r,label:n}}),b=le(u,Vo),d=w.useMemo(()=>I?i.jsx(Gt,{itemsToRender:I,slots:e,slotProps:t}):null,[I,e,t]);return i.jsx(p,R({},b,{children:d}))}function Gt(e){const{itemsToRender:t,slots:n,slotProps:o}=e;return i.jsx(w.Fragment,{children:t.map(r=>i.jsx(No,{slots:n,slotProps:o,label:r.label,id:r.id,itemId:r.itemId,itemsToRender:r.children},r.itemId))})}const _o=jt(),Bo=e=>{const{classes:t}=e;return Rt({root:["root"]},qn,t)},zo=J("ul",{name:"MuiRichTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),sr=w.forwardRef(function(t,n){const o=_o({props:t,name:"MuiRichTreeView"}),{getRootProps:r,contextValue:I,instance:p}=oo({plugins:Co,rootRef:n,props:o}),{slots:u,slotProps:b}=o,d=Bo(o),s=(u==null?void 0:u.root)??zo,l=he({elementType:s,externalSlotProps:b==null?void 0:b.root,className:d.root,getSlotProps:r,ownerState:o});return i.jsx(ro,{value:I,children:i.jsx(s,R({},l,{children:i.jsx(Gt,{slots:u,slotProps:b,itemsToRender:p.getItemsToRender()})}))})}),Wt=e=>Array.isArray(e)?e.length>0&&e.some(Wt):!!e,Ko=({itemId:e,children:t})=>{const{instance:n,selection:{multiSelect:o},publicAPI:r}=ye(),I={expandable:Wt(t),expanded:n.isItemExpanded(e),focused:n.isItemFocused(e),selected:n.isItemSelected(e),disabled:n.isItemDisabled(e),editing:n!=null&&n.isItemBeingEdited?n==null?void 0:n.isItemBeingEdited(e):!1,editable:n.isItemEditable?n.isItemEditable(e):!1},p=a=>{if(I.disabled)return;I.focused||n.focusItem(a,e);const x=o&&(a.shiftKey||a.ctrlKey||a.metaKey);I.expandable&&!(x&&n.isItemExpanded(e))&&n.toggleItemExpansion(a,e)},u=a=>{if(I.disabled)return;!I.focused&&!I.editing&&n.focusItem(a,e),o&&(a.shiftKey||a.ctrlKey||a.metaKey)?a.shiftKey?n.expandSelectionRange(a,e):n.selectItem({event:a,itemId:e,keepExistingSelection:!0}):n.selectItem({event:a,itemId:e,shouldBeSelected:!0})},b=a=>{const x=a.nativeEvent.shiftKey;o&&x?n.expandSelectionRange(a,e):n.selectItem({event:a,itemId:e,keepExistingSelection:o,shouldBeSelected:a.target.checked})},d=()=>{xe(n,q)&&n.isItemEditable(e)&&(n.isItemBeingEdited(e)?n.setEditedItemId(null):n.setEditedItemId(e))};return{interactions:{handleExpansion:p,handleSelection:u,handleCheckboxSelection:b,toggleItemEditing:d,handleSaveItemLabel:(a,x)=>{xe(n,q)&&n.isItemBeingEditedRef(e)&&(n.updateItemLabel(e,x),d(),n.focusItem(a,e))},handleCancelItemLabelEditing:a=>{xe(n,q)&&n.isItemBeingEditedRef(e)&&(d(),n.focusItem(a,e))}},status:I,publicAPI:r}},Uo=e=>{const{runItemPlugins:t,items:{onItemClick:n,disabledItemsFocusable:o,indentationAtItemLevel:r},selection:{disableSelection:I,checkboxSelection:p},expansion:{expansionTrigger:u},treeId:b,instance:d,publicAPI:s}=ye(),l=w.useContext(Xe),{id:f,itemId:a,label:x,children:g,rootRef:m}=e,{rootRef:h,contentRef:y,propsEnhancers:c}=t(e),{interactions:P,status:k}=Ko({itemId:a,children:g}),A=w.useRef(null),$=w.useRef(null),U=we(m,h,A),ee=we(y,$),K=w.useRef(null),X=qe({itemId:a,treeId:b,id:f}),ce=d.canItemBeTabbed(a)?0:-1,Z={rootRefObject:A,contentRefObject:$,interactions:P},Q=C=>T=>{var F;if((F=C.onFocus)==null||F.call(C,T),T.defaultMuiPrevented)return;const S=!k.disabled||o;!k.focused&&S&&T.currentTarget===T.target&&d.focusItem(T,a)},te=C=>T=>{var F,z,be,Me,Pe;if((F=C.onBlur)==null||F.call(C,T),T.defaultMuiPrevented)return;const S=d.getItemDOMElement(a);k.editing||T.relatedTarget&&je(T.relatedTarget,S)&&(T.target&&((be=(z=T.target)==null?void 0:z.dataset)==null?void 0:be.element)==="labelInput"&&je(T.target,S)||((Pe=(Me=T.relatedTarget)==null?void 0:Me.dataset)==null?void 0:Pe.element)==="labelInput")||d.removeFocusedItem()},ue=C=>T=>{var S,F,z;(S=C.onKeyDown)==null||S.call(C,T),!(T.defaultMuiPrevented||((z=(F=T.target)==null?void 0:F.dataset)==null?void 0:z.element)==="labelInput")&&d.handleItemKeyDown(T,a)},de=C=>T=>{var S;(S=C.onDoubleClick)==null||S.call(C,T),!T.defaultMuiPrevented&&P.toggleItemEditing()},pe=C=>T=>{var S,F;(S=C.onClick)==null||S.call(C,T),n==null||n(T,a),!(T.defaultMuiPrevented||(F=K.current)!=null&&F.contains(T.target))&&(u==="content"&&P.handleExpansion(T),p||P.handleSelection(T))},V=C=>T=>{var S;(S=C.onMouseDown)==null||S.call(C,T),!T.defaultMuiPrevented&&(T.shiftKey||T.ctrlKey||T.metaKey||k.disabled)&&T.preventDefault()},ne=C=>T=>{var S;(S=C.onChange)==null||S.call(C,T),!T.defaultMuiPrevented&&(I||k.disabled||P.handleCheckboxSelection(T))},N=C=>T=>{var S;(S=C.onClick)==null||S.call(C,T),!T.defaultMuiPrevented&&u==="iconContainer"&&P.handleExpansion(T)};return{getRootProps:(C={})=>{var be;const T=R({},W(e),W(C));let S;k.selected?S=!0:I||k.disabled?S=void 0:S=!1;const F=R({},T,{ref:U,role:"treeitem",tabIndex:ce,id:X,"aria-expanded":k.expandable?k.expanded:void 0,"aria-selected":S,"aria-disabled":k.disabled||void 0},C,{onFocus:Q(T),onBlur:te(T),onKeyDown:ue(T)});r&&(F.style={"--TreeView-itemDepth":typeof l=="function"?l(a):l});const z=((be=c.root)==null?void 0:be.call(c,R({},Z,{externalEventHandlers:T})))??{};return R({},F,z)},getContentProps:(C={})=>{var z;const T=W(C),S=R({},T,C,{ref:ee,onClick:pe(T),onMouseDown:V(T),status:k});r&&(S.indentationAtItemLevel=!0);const F=((z=c.content)==null?void 0:z.call(c,R({},Z,{externalEventHandlers:T})))??{};return R({},S,F)},getGroupTransitionProps:(C={})=>{const T=W(C),S=R({},T,{unmountOnExit:!0,component:"ul",role:"group",in:k.expanded,children:g},C);return r&&(S.indentationAtItemLevel=!0),S},getIconContainerProps:(C={})=>{const T=W(C);return R({},T,C,{onClick:N(T)})},getCheckboxProps:(C={})=>{const T=W(C);return R({},T,{visible:p,ref:K,checked:k.selected,disabled:I||k.disabled,tabIndex:-1},C,{onChange:ne(T)})},getLabelProps:(C={})=>{const T=R({},W(C)),S=R({},T,{children:x},C,{onDoubleClick:de(T)});return d.isTreeViewEditable&&(S.editable=k.editable),S},getLabelInputProps:(C={})=>{var F;const T=W(C),S=((F=c.labelInput)==null?void 0:F.call(c,{rootRefObject:A,contentRefObject:$,externalEventHandlers:T,interactions:P}))??{};return R({},C,S)},getDragAndDropOverlayProps:(C={})=>{var F;const T=W(C),S=((F=c.dragAndDropOverlay)==null?void 0:F.call(c,R({},Z,{externalEventHandlers:T})))??{};return R({},C,S)},rootRef:U,status:k,publicAPI:s}},lr=Uo;function ar(e){const{slots:t,slotProps:n,status:o}=e,r=ye(),I=R({},r.icons.slots,{expandIcon:r.icons.slots.expandIcon??zt,collapseIcon:r.icons.slots.collapseIcon??Kt}),p=r.icons.slotProps;let u;t!=null&&t.icon?u="icon":o.expandable?o.expanded?u="collapseIcon":u="expandIcon":u="endIcon";const b=(t==null?void 0:t[u])??I[u],d=he({elementType:b,externalSlotProps:s=>R({},se(p[u],s),se(n==null?void 0:n[u],s)),ownerState:{}});return b?i.jsx(b,R({},d)):null}const Go=["visible"],cr=J("li",{name:"MuiTreeItem2",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),ur=J("div",{name:"MuiTreeItem2",slot:"Content",overridesResolver:(e,t)=>t.content,shouldForwardProp:e=>ke(e)&&e!=="status"&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}},{props:({status:t})=>t.disabled,style:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"}},{props:({status:t})=>t.focused,style:{backgroundColor:(e.vars||e).palette.action.focus}},{props:({status:t})=>t.selected,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ae(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ae(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ae(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},{props:({status:t})=>t.selected&&t.focused,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ae(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}]})),dr=J("div",{name:"MuiTreeItem2",slot:"Label",overridesResolver:(e,t)=>t.label,shouldForwardProp:e=>ke(e)&&e!=="editable"})(({theme:e})=>R({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative",overflow:"hidden"},e.typography.body1,{variants:[{props:({editable:t})=>t,style:{paddingLeft:"2px"}}]})),pr=J("div",{name:"MuiTreeItem2",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})({width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}}),fr=J(Tt,{name:"MuiTreeItem2",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition,shouldForwardProp:e=>ke(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),gr=J(w.forwardRef((e,t)=>{const{visible:n}=e,o=le(e,Go);return n?i.jsx(vt,R({},o,{ref:t})):null}),{name:"MuiTreeItem2",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})({padding:0}),$e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='icon%20icon-tabler%20icons-tabler-outline%20icon-tabler-tool'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M7%2010h3v-3l-3.5%20-3.5a6%206%200%200%201%208%208l6%206a2%202%200%200%201%20-3%203l-6%20-6a6%206%200%200%201%20-8%20-8l3.5%203.5'%20/%3e%3c/svg%3e";function Wo(e){return e?(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){let n="number";return/^"/.test(t)?/:$/.test(t)?n="key":n="string":/true|false/.test(t)?n="boolean":/null/.test(t)&&(n="null"),'<span class="'+n+'">'+t+"</span>"})):""}const Y=({data:e,maxHeight:t="400px"})=>{const n=wt(),r=kt(I=>I.customization).isDarkMode;return i.jsxs(L,{sx:{border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:n.palette.background.default,width:"100%",overflow:"auto",maxHeight:t},children:[i.jsx("style",{children:`
                pre .string {
                    color: ${r?"#9cdcfe":"green"};
                }
                pre .number {
                    color: ${r?"#b5cea8":"darkorange"};
                }
                pre .boolean {
                    color: ${r?"#569cd6":"blue"};
                }
                pre .null {
                    color: ${r?"#d4d4d4":"magenta"};
                }
                pre .key {
                    color: #ff5733;
                }
            `}),i.jsx("pre",{style:{margin:0,fontFamily:"'Inter', 'Roboto', 'Arial', sans-serif",fontSize:"0.875rem",whiteSpace:"pre-wrap",wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:Wo(JSON.stringify(e,null,2))}})]})};Y.propTypes={data:H.object,maxHeight:H.string};const qo=(e,t)=>me.post(`/internal-prediction/${e}`,t),Jo=(e,t)=>me.post(`/internal-prediction/stream/${e}`,t),Xo=(e,t)=>me.post(`/prediction/${e}`,t),ht={sendMessageAndGetPrediction:qo,sendMessageAndStreamPrediction:Jo,sendMessageAndGetPredictionPublic:Xo},qt=({data:e,label:t,status:n,metadata:o,isPublic:r,onProceedSuccess:I})=>{var Z,Q,te,ue,de,pe,V,ne,N,fe;const[p,u]=w.useState("rendered"),[b,d]=w.useState(!1),[s,l]=w.useState(""),[f,a]=w.useState(""),[x,g]=w.useState(!1),[m,h]=w.useState(""),y=kt(v=>v.customization),c=wt(),{enqueueSnackbar:P}=un(),k=v=>{const j=y.isDarkMode;switch(v){case"assistant":case"ai":return{bg:j?ge(c.palette.success.dark,.5):c.palette.success.light,color:j?"white":c.palette.success.dark,border:c.palette.success.main};case"system":return{bg:j?ge(c.palette.warning.dark,.5):c.palette.warning.light,color:j?"white":c.palette.warning.dark,border:c.palette.warning.main};case"developer":return{bg:j?ge(c.palette.info.dark,.5):c.palette.info.light,color:j?"white":c.palette.info.dark,border:c.palette.info.main};case"user":case"human":return{bg:j?ge(c.palette.primary.main,.5):c.palette.primary.light,color:j?"white":c.palette.primary.dark,border:c.palette.primary.main};case"tool":case"function":return{bg:j?ge(c.palette.secondary.main,.5):c.palette.secondary.light,color:j?"white":c.palette.secondary.dark,border:c.palette.secondary.main};default:return{bg:j?ge(c.palette.grey[700],.5):c.palette.grey[300],color:j?"white":c.palette.grey[800],border:j?c.palette.grey[600]:c.palette.grey[500]}}},A=(v,j)=>{v.stopPropagation(),j!==null&&u(j)},$=async(v,j="")=>{g(!0),h("Submitting feedback...");const O={question:j||v.charAt(0).toUpperCase()+v.slice(1),chatId:o==null?void 0:o.sessionId,humanInput:{type:v,startNodeId:e.id,feedback:j}};try{let E;r?E=await ht.sendMessageAndGetPredictionPublic(o==null?void 0:o.agentflowId,O):E=await ht.sendMessageAndGetPrediction(o==null?void 0:o.agentflowId,O),E&&E.data&&(P("Successfully submitted response",{variant:"success"}),I&&I(E.data))}catch(E){console.error(E),P((E==null?void 0:E.message)||"Failed to submit response",{variant:"error"})}finally{g(!1),h("")}},U=()=>{e.input&&e.input.humanInputEnableFeedback?(a("proceed"),d(!0)):$("proceed")},ee=()=>{e.input&&e.input.humanInputEnableFeedback?(a("reject"),d(!0)):$("reject")},K=v=>{const j=v.src;Array.isArray(j)||typeof j=="object"?navigator.clipboard.writeText(JSON.stringify(j,null,"  ")):navigator.clipboard.writeText(j)},X=()=>{$(f,s),d(!1),l(""),a("")},ce=v=>v.filter(O=>O.isFulfilled).map((O,E)=>O.type==="string"&&O.operation==="equal"&&O.value1===""&&O.value2===""?i.jsx(L,{sx:{border:1,borderColor:"success.main",borderRadius:1,p:2,backgroundColor:c.palette.background.default},children:i.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(G,{variant:"body1",children:"Else condition fulfilled"}),i.jsx(re,{label:O.isFulfilled?"Fulfilled":"Not Fulfilled",size:"small",sx:{color:"white",backgroundColor:c.palette.success.dark},variant:"filled"})]})},`else-${E}`):i.jsxs(L,{sx:{border:1,borderColor:"success.main",borderRadius:1,p:2,backgroundColor:c.palette.background.default},children:[i.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsxs(G,{variant:"subtitle2",children:["Condition ",E]}),i.jsx(re,{label:O.isFulfilled?"Fulfilled":"Not Fulfilled",size:"small",variant:"filled",sx:{color:"white",backgroundColor:c.palette.success.dark}})]}),i.jsx(Y,{data:O})]},`condition-${E}`));return i.jsxs(L,{sx:{position:"relative"},children:[i.jsxs(L,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[i.jsx(L,{item:!0,style:{width:50},children:(()=>{var O;const v=(e==null?void 0:e.name)||((O=e==null?void 0:e.id)==null?void 0:O.split("_")[0]),j=dn.find(E=>E.name===v);return j?i.jsx("div",{style:{...c.typography.commonAvatar,...c.typography.mediumAvatar,borderRadius:"15px",backgroundColor:j.color,display:"flex",justifyContent:"center",alignItems:"center",background:j.color,cursor:"default"},children:i.jsx(j.icon,{size:20,color:"white"})}):i.jsx("div",{style:{...c.typography.commonAvatar,...c.typography.mediumAvatar,borderRadius:"50%",backgroundColor:"white",cursor:"default"},children:i.jsx("img",{style:{width:"100%",height:"100%",padding:5,objectFit:"contain"},src:`${oe}/api/v1/node-icon/${v}`,alt:v})})})()}),i.jsx(G,{variant:"h5",gutterBottom:!0,children:t}),i.jsx("div",{style:{flex:1}}),e.output&&e.output.timeMetadata&&e.output.timeMetadata.delta&&i.jsx(re,{icon:i.jsx(In,{size:17}),label:`${(e.output.timeMetadata.delta/1e3).toFixed(2)} seconds`,variant:"contained",color:"secondary",size:"small",sx:{ml:1,"& .MuiChip-icon":{mr:.2,ml:1}}}),e.output&&e.output.usageMetadata&&e.output.usageMetadata.total_tokens&&i.jsx(re,{icon:i.jsx(yn,{size:17}),label:`${e.output.usageMetadata.total_tokens} tokens`,variant:"contained",color:"primary",size:"small",sx:{ml:1,"& .MuiChip-icon":{mr:.2,ml:1}}})]}),i.jsx(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:i.jsxs(hn,{sx:{borderRadius:2,maxHeight:40},value:p,color:"primary",exclusive:!0,onChange:A,children:[i.jsx(it,{sx:{borderColor:c.palette.grey[900]+25,borderRadius:2,color:(Z=c==null?void 0:c.customization)!=null&&Z.isDarkMode?"white":"inherit"},variant:"contained",value:"rendered",title:"Rendered",children:"Rendered"}),i.jsx(it,{sx:{borderColor:c.palette.grey[900]+25,borderRadius:2,color:(Q=c==null?void 0:c.customization)!=null&&Q.isDarkMode?"white":"inherit"},variant:"contained",value:"raw",title:"Raw",children:"Raw"})]})}),p==="rendered"&&i.jsxs(L,{children:[e.output&&e.output.availableTools&&e.output.availableTools.length>0&&i.jsxs(L,{children:[i.jsx(G,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"Tools"}),e.output.availableTools.map((v,j)=>{var E;const O=e.output.usedTools&&Array.isArray(e.output.usedTools)&&e.output.usedTools.some(M=>M.tool===v.name);return i.jsxs(ut,{sx:{mb:1,"&:before":{display:"none"},backgroundColor:O?(E=c==null?void 0:c.customization)!=null&&E.isDarkMode?`${c.palette.success.dark}22`:`${c.palette.success.light}44`:c.palette.background.default,border:1,borderRadius:1,borderColor:O?"success.main":"divider",overflow:"hidden"},children:[i.jsx(dt,{expandIcon:i.jsx(st,{}),"aria-controls":`tool-${j}-content`,id:`tool-${j}-header`,children:i.jsxs(L,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[i.jsx("div",{style:{...c.typography.commonAvatar,...c.typography.smallAvatar,marginRight:8,borderRadius:"50%",backgroundColor:"white",overflow:"hidden"},children:i.jsx("img",{style:{width:"100%",height:"100%",padding:3,objectFit:"contain"},src:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const M=e.output.availableTools.find(B=>B.name===v.name);if(M&&M.toolNode&&M.toolNode.name)return`${oe}/api/v1/node-icon/${M.toolNode.name}`}return`${oe}/api/v1/node-icon/${v.name}`})(),alt:v.name,onError:M=>{M.target.onerror=null,M.target.style.padding="5px",M.target.src=$e}})}),i.jsx(G,{variant:"body1",children:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const M=e.output.availableTools.find(B=>B.name===v.name);if(M&&M.toolNode)return M.toolNode.label||v.name}return v.name||"Tool Call"})()}),O&&i.jsx(re,{label:"Used",size:"small",sx:{ml:2,color:"white",backgroundColor:c.palette.success.dark}})]})}),i.jsx(pt,{children:i.jsx(Y,{data:v})})]},`tool-${j}`)})]}),i.jsx(G,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"Input"}),e&&e.input&&e.input.messages&&Array.isArray(e.input.messages)&&e.input.messages.length>0?e.input.messages.map((v,j)=>{var O;return i.jsxs(L,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:c.palette.background.default},children:[i.jsx(re,{sx:{mt:1,backgroundColor:k(v.role).bg,color:k(v.role).color,borderColor:k(v.role).border},label:v.role,variant:"outlined",size:"small"}),v.name&&i.jsx(re,{sx:{mt:1,ml:1,backgroundColor:k(v.role).bg,color:k(v.role).color,borderColor:k(v.role).border},label:v.name,variant:"outlined",size:"small"}),v.tool_calls&&(Array.isArray(v.tool_calls)?v.tool_calls.map((E,M)=>{var B;return i.jsxs(ut,{sx:{mt:1,mb:1,"&:before":{display:"none"},backgroundColor:(B=c==null?void 0:c.customization)!=null&&B.isDarkMode?`${c.palette.warning.dark}22`:`${c.palette.warning.light}44`,border:1,borderRadius:1,borderColor:"warning.main",overflow:"hidden"},children:[i.jsx(dt,{expandIcon:i.jsx(st,{color:y.isDarkMode?"white":ge(c.palette.warning.dark,.5)}),"aria-controls":`tool-call-${M}-content`,id:`tool-call-${M}-header`,children:i.jsxs(L,{sx:{display:"flex",alignItems:"center"},children:[i.jsx("div",{style:{...c.typography.commonAvatar,...c.typography.smallAvatar,marginRight:8,borderRadius:"50%",backgroundColor:"white",overflow:"hidden"},children:i.jsx("img",{style:{width:"100%",height:"100%",padding:3,objectFit:"contain"},src:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const _=e.output.availableTools.find(C=>C.name===E.name);if(_&&_.toolNode&&_.toolNode.name)return`${oe}/api/v1/node-icon/${_.toolNode.name}`}return`${oe}/api/v1/node-icon/${E.name}`})(),alt:E.name,onError:_=>{_.target.onerror=null,_.target.style.padding="5px",_.target.src=$e}})}),i.jsx(G,{variant:"body1",children:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const _=e.output.availableTools.find(C=>C.name===E.name);if(_&&_.toolNode)return _.toolNode.label||E.name}return E.name||"Tool Call"})()}),i.jsx(re,{label:"Called",size:"small",sx:{ml:2,color:"white",backgroundColor:ge(c.palette.warning.dark,.5)}})]})}),i.jsx(pt,{children:i.jsx(Y,{data:E})})]},`tool-call-${M}`)}):i.jsx(Y,{data:v.tool_calls})),v.role==="tool"&&v.name&&i.jsxs(L,{sx:{display:"flex",alignItems:"center",mb:1,mt:1,py:1},children:[i.jsx("div",{style:{...c.typography.commonAvatar,...c.typography.smallAvatar,marginRight:8,borderRadius:"50%",backgroundColor:"white",overflow:"hidden"},children:i.jsx("img",{style:{width:"100%",height:"100%",padding:3,objectFit:"contain"},src:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const E=e.output.availableTools.find(M=>M.name===v.name);if(E&&E.toolNode&&E.toolNode.name)return`${oe}/api/v1/node-icon/${E.toolNode.name}`}return`${oe}/api/v1/node-icon/${v.name}`})(),alt:v.name,onError:E=>{E.target.onerror=null,E.target.style.padding="5px",E.target.src=$e}})}),i.jsxs(G,{variant:"body1",children:[(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const E=e.output.availableTools.find(M=>M.name===v.name);if(E&&E.toolNode)return E.toolNode.label||v.name}return v.name})(),v.tool_call_id&&i.jsx(re,{label:v.tool_call_id,size:"small",variant:"outlined",sx:{ml:1,height:"20px",color:"info",border:1,py:1.5,borderColor:y.isDarkMode?"white":"divider"}})]})]}),((O=v.additional_kwargs)==null?void 0:O.artifacts)&&v.additional_kwargs.artifacts.length>0&&i.jsx(L,{sx:{mt:2,mb:1},children:i.jsx(L,{sx:{display:"flex",flexDirection:"column",gap:2},children:v.additional_kwargs.artifacts.map((E,M)=>E.type==="png"||E.type==="jpeg"?i.jsx(lt,{sx:{p:0,m:0,flex:"0 0 auto",border:1,borderColor:"divider",borderRadius:1,overflow:"hidden"},children:i.jsx(ft,{component:"img",image:E.data.startsWith("FILE-STORAGE::")?`${oe}/api/v1/get-upload-file?chatflowId=${o==null?void 0:o.agentflowId}&chatId=${o==null?void 0:o.sessionId}&fileName=${E.data.replace("FILE-STORAGE::","")}`:E.data,sx:{height:"auto",maxHeight:"500px"},alt:`artifact-${M}`})},`artifact-${M}`):E.type==="html"?i.jsx(L,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:c.palette.background.paper},children:i.jsx("div",{dangerouslySetInnerHTML:{__html:E.data}})},`artifact-${M}`):i.jsx(L,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:c.palette.background.paper},children:i.jsx(Ie,{children:E.data})},`artifact-${M}`))})}),v.role==="user"&&Array.isArray(v.content)&&v.content.length>0&&v.content.map((E,M)=>i.jsx(lt,{sx:{p:0,m:0,flex:"0 0 auto",border:1,borderColor:"divider",borderRadius:1,overflow:"hidden",maxWidth:"100%",mb:2,mt:2},children:i.jsx(ft,{component:"img",image:E.type==="stored-file"?`${oe}/api/v1/get-upload-file?chatflowId=${o==null?void 0:o.agentflowId}&chatId=${o==null?void 0:o.sessionId}&fileName=${E.name}`:E.name,onError:B=>{B.target.onerror=null,B.target.style.padding="5px",B.target.src=$e},sx:{height:"auto",maxHeight:"500px",width:"100%",objectFit:"contain",display:"block"},alt:`file-uploads-${M}`})},`file-uploads-${M}`)),(()=>{if(v.content)try{const E=JSON.parse(v.content);return i.jsx("div",{style:{marginTop:10,marginBottom:10},children:i.jsx(Y,{data:E})})}catch{return i.jsx(Ie,{children:v.content})}else return i.jsx(Ie,{children:"*No data*"})})()]},j)}):(te=e==null?void 0:e.input)!=null&&te.form||(ue=e==null?void 0:e.input)!=null&&ue.http||(de=e==null?void 0:e.input)!=null&&de.conditions?i.jsx(Y,{data:e.input.form||e.input.http||e.input.conditions}):(pe=e==null?void 0:e.input)!=null&&pe.code?i.jsx(L,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,overflow:"hidden",backgroundColor:c.palette.background.default},children:i.jsx(bn,{disabled:!0,value:e.input.code,height:"max-content",theme:y.isDarkMode?"dark":"light",lang:"js",basicSetup:{lineNumbers:!1,foldGutter:!1,autocompletion:!1,highlightActiveLine:!1}})}):i.jsx(L,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:c.palette.background.default},children:i.jsx(Ie,{children:((V=e==null?void 0:e.input)==null?void 0:V.question)||"*No data*"})}),i.jsx(G,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"Output"}),(ne=e==null?void 0:e.output)!=null&&ne.form||(N=e==null?void 0:e.output)!=null&&N.http?i.jsx(Y,{data:e.output.form||e.output.http}):(fe=e==null?void 0:e.output)!=null&&fe.conditions?ce(e.output.conditions):i.jsx(L,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:c.palette.background.default},children:(()=>{var v,j;if((v=e==null?void 0:e.output)!=null&&v.content)try{const O=JSON.parse(e.output.content);return i.jsx("div",{style:{marginTop:10,marginBottom:10},children:i.jsx(Y,{data:O})})}catch{return i.jsx(Ie,{children:((j=e==null?void 0:e.output)==null?void 0:j.content)||"*No data*"})}else return i.jsx(Ie,{children:"*No data*"})})()}),e.error&&i.jsxs(i.Fragment,{children:[i.jsx(G,{sx:{mt:2},variant:"h5",gutterBottom:!0,color:"error",children:"Error"}),i.jsx(L,{sx:{mt:1,border:1,borderColor:"error.main",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:c.palette.background.default},children:i.jsx(Ie,{children:typeof(e==null?void 0:e.error)=="object"?JSON.stringify(e.error,null,2):(e==null?void 0:e.error)||"*No error details*"})})]}),e.state&&Object.keys(e.state).length>0&&i.jsxs(i.Fragment,{children:[i.jsx(G,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"State"}),i.jsx(Y,{data:e.state})]})]}),p==="raw"&&i.jsx(L,{sx:{mt:2,border:1,borderColor:"divider"},onClick:v=>v.stopPropagation(),children:i.jsx(mn,{theme:y.isDarkMode?"ocean":"rjv-default",style:{padding:10,borderRadius:10},src:e,name:null,quotesOnKeys:!1,enableClipboard:v=>K(v),displayDataTypes:!1,collapsed:1})}),n==="STOPPED"&&i.jsxs(i.Fragment,{children:[i.jsxs(L,{sx:{position:"fixed",bottom:15,right:25,p:1.5,backgroundColor:c.palette.background.paper,boxShadow:"0 4px 20px rgba(0,0,0,0.15)",borderRadius:"25px",display:"flex",justifyContent:"flex-end",gap:1,zIndex:1e3},children:[i.jsx(Oe,{variant:"outlined",color:"error",sx:{borderRadius:"25px"},onClick:ee,disabled:x,children:"Reject"}),i.jsx(Oe,{variant:"contained",color:"primary",sx:{borderRadius:"25px"},onClick:U,disabled:x,children:"Proceed"})]}),i.jsxs(at,{maxWidth:"md",fullWidth:!0,open:b,onClose:()=>!x&&d(!1),children:[i.jsx(pn,{variant:"h5",children:"Provide Feedback"}),i.jsx(ct,{children:i.jsx(xn,{autoFocus:!0,margin:"dense",label:"Feedback",fullWidth:!0,multiline:!0,rows:4,value:s,onChange:v=>l(v.target.value),disabled:x})}),i.jsxs(fn,{children:[i.jsx(Oe,{onClick:()=>d(!1),disabled:x,children:"Cancel"}),i.jsx(Oe,{onClick:X,variant:"contained",disabled:x,children:"Submit"})]})]}),i.jsx(at,{open:x,PaperProps:{style:{backgroundColor:c.palette.background.paper,boxShadow:c.shadows[5],borderRadius:8,padding:20}},children:i.jsx(ct,{children:i.jsxs(L,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[i.jsx(gn,{size:60}),i.jsx(G,{variant:"h6",sx:{mt:2},children:m})]})})})]})]})};qt.propTypes={data:H.object.isRequired,label:H.string,status:H.string,metadata:H.object,isPublic:H.bool,onProceedSuccess:H.func};qt.displayName="NodeExecutionDetails";export{qt as N,sr as R,cr as T,Vn as a,ur as b,Ut as c,Kn as d,ir as e,pr as f,ar as g,gr as h,wo as i,fr as j,dr as k,ht as p,lr as u};
