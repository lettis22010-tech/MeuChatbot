import{r as E,af as jn,t as At,P as K,c0 as Fu,aq as Xe,j as p,n as oe,az as F,cj as Wu,s as bt,bH as Gu,aG as Uu,f as Es,i as Ms,aO as te,aI as ho,aP as gr,ck as Tn,cl as qu,aM as Ku,b2 as js,bJ as ir,B as be,a as Ts,bI as mr,ap as Xu,l as Te,as as Pr,bL as Ut,ar as yi,bR as po,R as An,o as Pt,q as In,H as it,D as at,h as jt,k as ut,bN as As,m as Tt,aa as Nn,b4 as Is,c as Yu,a0 as wn,a1 as $t,a8 as He,a2 as qt,a3 as Br,a4 as Or,S as Zn,aj as Fr,ag as go,ah as mo,aA as Zu,aB as Ju,C as bi,p as Ns,E as st,J as Ds,K as Ls,b9 as Wr,bK as Ue,cm as Qu,bu as ed,cn as yo,aw as td,co as nd,cp as rd,d as sd,cq as Gr}from"./index-B1XR3Coy.js";import{D as is}from"./Dropdown-BH_BuIwh.js";import{M as wi}from"./MultiDropdown-OnTaU3K-.js";import{C as _i,A as vi}from"./CredentialInputHandler-NSWgGX5U.js";import{I as xi}from"./Input-C2v4FwXn.js";import{d as od}from"./Delete-CvnCkEIf.js";import{I as ki}from"./IconPlus-DpyX5kZB.js";import{D as id,s as Si,a as ad}from"./Grid-DtMOPoeK.js";import{G as ud}from"./GridActionsCellItem-C4fgcfe6.js";import{F as Ci}from"./File-B2PWlg1I.js";import{S as Ei}from"./Switch-BtbcRzr_.js";import{J as Rs}from"./CredentialListDialog-ooDI7A-3.js";import{T as as}from"./TooltipWithParser-C72LCUcD.js";import{C as Mi}from"./CodeEditor-BjDzi2Vy.js";import{E as Dn,P as on,a as an,i as dd,D as $s,b as zs,N as We,m as we,w as vn,M as yr,c as Jt,d as Qt,S as xn,t as us,T as Kt,e as cd,k as ld,f as Hs,F as bo,g as ji,h as fd,j as hd,l as pd,n as gd,o as md,p as yd,q as Ti,u as Ai,s as Ii}from"./suggestionOption-CTRD7oqB.js";import{T as Ni}from"./TabPanel-C2EL9Kp7.js";import{b as bd,d as wd,a as _d,A as vd}from"./Autocomplete-2B99MXTa.js";import{d as Jn}from"./ExpandMore-BP5oMSwT.js";import{n as xd}from"./nodes-D-x6LTqi.js";import{A as Di,d as Li,e as Ri,M as $i}from"./MemoizedReactMarkdown-CNH2mkE4.js";import{B as zi}from"./BackdropLoader-C982mQas.js";import{E as Hi}from"./ExpandTextDialog-Sszv9N4G.js";import{F as Lt}from"./FormControl-Cb0ROeST.js";import{I as Vi}from"./IconTrash-BvhWIQ6v.js";import{I as Pi}from"./IconArrowsMaximize-BrsSDZNx.js";import{I as Bi}from"./IconAlertTriangle-Bdlxpe5D.js";import{I as Oi}from"./IconRefresh-B2aTlEaU.js";import{I as kd,T as Sd}from"./ToolDialog-hiXiaWJY.js";import{A as Cd}from"./AssistantDialog-BG0DIOgO.js";import{I as _n}from"./InputLabel-HPVYUEFn.js";import{S as Ed,a as Md,b as jd}from"./Stepper-CvQjJ8b9.js";import{T as Fi}from"./TextField-BEeUeVUl.js";import{a as Wi}from"./assistants-C-o7l-z6.js";import{L as Td}from"./LoadingButton-BHZSG_sF.js";import{a as Ad,I as Id}from"./IconSearch-BzBgax5m.js";import{I as Nd}from"./IconLanguage-Dreb5nKM.js";import{d as wo}from"./documentstore-GQ_lrBF1.js";import{T as Gi,t as Dd}from"./Tooltip-9ICsuaYn.js";import{i as Nt,a as _o,b as vo,d as Ld}from"./string-3NetaFjT.js";import{I as xo}from"./IconBulb-CwCq2_I0.js";class Vs{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Vs}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}let br=!0,ds=!1;const Rd=new Vs,$d={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function zd(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&$d[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function Hd(e){e.metaKey||e.altKey||e.ctrlKey||(br=!0)}function Ur(){br=!1}function Vd(){this.visibilityState==="hidden"&&ds&&(br=!0)}function Pd(e){e.addEventListener("keydown",Hd,!0),e.addEventListener("mousedown",Ur,!0),e.addEventListener("pointerdown",Ur,!0),e.addEventListener("touchstart",Ur,!0),e.addEventListener("visibilitychange",Vd,!0)}function Bd(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return br||zd(t)}function Od(){const e=E.useCallback(s=>{s!=null&&Pd(s.ownerDocument)},[]),t=E.useRef(!1);function n(){return t.current?(ds=!0,Rd.start(100,()=>{ds=!1}),t.current=!1,!0):!1}function r(s){return Bd(s)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fd=jn("outline","eraser","IconEraser",[["path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3",key:"svg-0"}],["path",{d:"M18 13.3l-6.3 -6.3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wd=jn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gd=jn("outline","notebook","IconNotebook",[["path",{d:"M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18",key:"svg-0"}],["path",{d:"M13 8l2 0",key:"svg-1"}],["path",{d:"M13 12l2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ud=jn("outline","report","IconReport",[["path",{d:"M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697",key:"svg-0"}],["path",{d:"M18 14v4h4",key:"svg-1"}],["path",{d:"M18 11v-4a2 2 0 0 0 -2 -2h-2",key:"svg-2"}],["path",{d:"M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-3"}],["path",{d:"M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-4"}],["path",{d:"M8 11h4",key:"svg-5"}],["path",{d:"M8 15h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cs=jn("outline","wand","IconWand",[["path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3",key:"svg-0"}],["path",{d:"M15 6l3 3",key:"svg-1"}],["path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-2"}],["path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-3"}]]);const qd=At(id)(({theme:e})=>({border:`1px solid ${e.palette.mode==="light"?"#b4b4b4":"#303030"}`,letterSpacing:"normal","& .MuiDataGrid-columnsContainer":{backgroundColor:e.palette.mode==="light"?"#fafafa":"#1d1d1d"},"& .MuiDataGrid-iconSeparator":{display:"none"},"& .MuiDataGrid-columnHeader, .MuiDataGrid-cell":{borderRight:`1px solid ${e.palette.mode==="light"?"#f0f0f0":"#303030"}`},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:`1px solid ${e.palette.mode==="light"?"#f0f0f0":"#303030"}`},"& .MuiPaginationItem-root":{borderRadius:0},"& .MuiDataGrid-columnHeader:last-child, .MuiDataGrid-cell:last-child":{borderRight:"none"}})),Ps=({columns:e,rows:t,style:n,disabled:r=!1,hideFooter:s=!1,onChange:a})=>{const[i,u]=E.useState(Fu(t)??[]),l=E.useCallback(A=>()=>{let C=[];u(I=>{let M=[...Xe.cloneDeep(I)];return M=M.filter(L=>L.id!==A),C=M,M}),a(JSON.stringify(C))},[]),g=(A=>[...A,{field:"actions",type:"actions",width:80,getActions:C=>[p.jsx(ud,{icon:p.jsx(od,{}),label:"Delete",onClick:l(C.id)},"Delete")]}])(e),y=A=>{let C=[];return u(I=>{let M=[...Xe.cloneDeep(I)];const L=M.findIndex($=>$.id===A.id);return L>=0&&(M[L]={...A}),C=M,M}),a(JSON.stringify(C)),A},v=()=>{var C;const A={};for(let I=0;I<g.length;I+=1)A[(C=g[I])==null?void 0:C.field]="";return A},w=()=>{u(A=>{let C=[...Xe.cloneDeep(A)];const I=C.length?C[C.length-1].id+1:1;return C.push({...v(),id:I}),C})};return p.jsxs(p.Fragment,{children:[i&&g&&p.jsx("div",{style:{marginTop:10,height:210,width:"100%",...n},children:p.jsx(qd,{processRowUpdate:y,isCellEditable:()=>!r,hideFooter:s,onProcessRowUpdateError:A=>console.error(A),rows:i,columns:g})}),!r&&p.jsx(oe,{sx:{mt:1},variant:"outlined",onClick:w,startIcon:p.jsx(ki,{}),children:"Add Item"})]})};Ps.propTypes={rows:K.array,columns:K.array,style:K.any,disabled:K.bool,hideFooter:K.bool,onChange:K.func};function Ge(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ge(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Kd={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ko=e=>{let t;const n=new Set,r=(g,y)=>{const v=typeof g=="function"?g(t):g;if(!Object.is(v,t)){const w=t;t=y??(typeof v!="object"||v===null)?v:Object.assign({},t,v),n.forEach(A=>A(t,w))}},s=()=>t,l={setState:r,getState:s,getInitialState:()=>f,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(Kd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,s,l);return l},Xd=e=>e?ko(e):ko,{useDebugValue:Yd}=F,{useSyncExternalStoreWithSelector:Zd}=Wu,Jd=e=>e;function Ui(e,t=Jd,n){const r=Zd(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Yd(r),r}const So=(e,t)=>{const n=Xd(e),r=(s,a=t)=>Ui(n,s,a);return Object.assign(r,n),r},Qd=(e,t)=>e?So(e,t):So;function $e(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var ec={value:()=>{}};function wr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Qn(n)}function Qn(e){this._=e}function tc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Qn.prototype=wr.prototype={constructor:Qn,on:function(e,t){var n=this._,r=tc(e+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(e=r[a]).type)&&(s=nc(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(s=(e=r[a]).type)n[s]=Co(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Co(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qn(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,s=a.length;r<s;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,a=r.length;s<a;++s)r[s].value.apply(t,n)}};function nc(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function Co(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=ec,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ls="http://www.w3.org/1999/xhtml";const Eo={svg:"http://www.w3.org/2000/svg",xhtml:ls,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _r(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Eo.hasOwnProperty(t)?{space:Eo[t],local:e}:e}function rc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ls&&t.documentElement.namespaceURI===ls?t.createElement(e):t.createElementNS(n,e)}}function sc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qi(e){var t=_r(e);return(t.local?sc:rc)(t)}function oc(){}function Bs(e){return e==null?oc:function(){return this.querySelector(e)}}function ic(e){typeof e!="function"&&(e=Bs(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,u=r[s]=new Array(i),l,f,g=0;g<i;++g)(l=a[g])&&(f=e.call(l,l.__data__,g,a))&&("__data__"in l&&(f.__data__=l.__data__),u[g]=f);return new Ve(r,this._parents)}function ac(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function uc(){return[]}function Ki(e){return e==null?uc:function(){return this.querySelectorAll(e)}}function dc(e){return function(){return ac(e.apply(this,arguments))}}function cc(e){typeof e=="function"?e=dc(e):e=Ki(e);for(var t=this._groups,n=t.length,r=[],s=[],a=0;a<n;++a)for(var i=t[a],u=i.length,l,f=0;f<u;++f)(l=i[f])&&(r.push(e.call(l,l.__data__,f,i)),s.push(l));return new Ve(r,s)}function Xi(e){return function(){return this.matches(e)}}function Yi(e){return function(t){return t.matches(e)}}var lc=Array.prototype.find;function fc(e){return function(){return lc.call(this.children,e)}}function hc(){return this.firstElementChild}function pc(e){return this.select(e==null?hc:fc(typeof e=="function"?e:Yi(e)))}var gc=Array.prototype.filter;function mc(){return Array.from(this.children)}function yc(e){return function(){return gc.call(this.children,e)}}function bc(e){return this.selectAll(e==null?mc:yc(typeof e=="function"?e:Yi(e)))}function wc(e){typeof e!="function"&&(e=Xi(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,u=r[s]=[],l,f=0;f<i;++f)(l=a[f])&&e.call(l,l.__data__,f,a)&&u.push(l);return new Ve(r,this._parents)}function Zi(e){return new Array(e.length)}function _c(){return new Ve(this._enter||this._groups.map(Zi),this._parents)}function ar(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ar.prototype={constructor:ar,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vc(e){return function(){return e}}function xc(e,t,n,r,s,a){for(var i=0,u,l=t.length,f=a.length;i<f;++i)(u=t[i])?(u.__data__=a[i],r[i]=u):n[i]=new ar(e,a[i]);for(;i<l;++i)(u=t[i])&&(s[i]=u)}function kc(e,t,n,r,s,a,i){var u,l,f=new Map,g=t.length,y=a.length,v=new Array(g),w;for(u=0;u<g;++u)(l=t[u])&&(v[u]=w=i.call(l,l.__data__,u,t)+"",f.has(w)?s[u]=l:f.set(w,l));for(u=0;u<y;++u)w=i.call(e,a[u],u,a)+"",(l=f.get(w))?(r[u]=l,l.__data__=a[u],f.delete(w)):n[u]=new ar(e,a[u]);for(u=0;u<g;++u)(l=t[u])&&f.get(v[u])===l&&(s[u]=l)}function Sc(e){return e.__data__}function Cc(e,t){if(!arguments.length)return Array.from(this,Sc);var n=t?kc:xc,r=this._parents,s=this._groups;typeof e!="function"&&(e=vc(e));for(var a=s.length,i=new Array(a),u=new Array(a),l=new Array(a),f=0;f<a;++f){var g=r[f],y=s[f],v=y.length,w=Ec(e.call(g,g&&g.__data__,f,r)),A=w.length,C=u[f]=new Array(A),I=i[f]=new Array(A),M=l[f]=new Array(v);n(g,y,C,I,M,w,t);for(var L=0,$=0,o,c;L<A;++L)if(o=C[L]){for(L>=$&&($=L+1);!(c=I[$])&&++$<A;);o._next=c||null}}return i=new Ve(i,r),i._enter=u,i._exit=l,i}function Ec(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Mc(){return new Ve(this._exit||this._groups.map(Zi),this._parents)}function jc(e,t,n){var r=this.enter(),s=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function Tc(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,a=r.length,i=Math.min(s,a),u=new Array(s),l=0;l<i;++l)for(var f=n[l],g=r[l],y=f.length,v=u[l]=new Array(y),w,A=0;A<y;++A)(w=f[A]||g[A])&&(v[A]=w);for(;l<s;++l)u[l]=n[l];return new Ve(u,this._parents)}function Ac(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Ic(e){e||(e=Nc);function t(y,v){return y&&v?e(y.__data__,v.__data__):!y-!v}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],u=i.length,l=s[a]=new Array(u),f,g=0;g<u;++g)(f=i[g])&&(l[g]=f);l.sort(t)}return new Ve(s,this._parents).order()}function Nc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Lc(){return Array.from(this)}function Rc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function $c(){let e=0;for(const t of this)++e;return e}function zc(){return!this.node()}function Hc(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],a=0,i=s.length,u;a<i;++a)(u=s[a])&&e.call(u,u.__data__,a,s);return this}function Vc(e){return function(){this.removeAttribute(e)}}function Pc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bc(e,t){return function(){this.setAttribute(e,t)}}function Oc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Fc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Wc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Gc(e,t){var n=_r(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Pc:Vc:typeof t=="function"?n.local?Wc:Fc:n.local?Oc:Bc)(n,t))}function Ji(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uc(e){return function(){this.style.removeProperty(e)}}function qc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Kc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Xc(e,t,n){return arguments.length>1?this.each((t==null?Uc:typeof t=="function"?Kc:qc)(e,t,n??"")):en(this.node(),e)}function en(e,t){return e.style.getPropertyValue(t)||Ji(e).getComputedStyle(e,null).getPropertyValue(t)}function Yc(e){return function(){delete this[e]}}function Zc(e,t){return function(){this[e]=t}}function Jc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Qc(e,t){return arguments.length>1?this.each((t==null?Yc:typeof t=="function"?Jc:Zc)(e,t)):this.node()[e]}function Qi(e){return e.trim().split(/^|\s+/)}function Os(e){return e.classList||new ea(e)}function ea(e){this._node=e,this._names=Qi(e.getAttribute("class")||"")}ea.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ta(e,t){for(var n=Os(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function na(e,t){for(var n=Os(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function el(e){return function(){ta(this,e)}}function tl(e){return function(){na(this,e)}}function nl(e,t){return function(){(t.apply(this,arguments)?ta:na)(this,e)}}function rl(e,t){var n=Qi(e+"");if(arguments.length<2){for(var r=Os(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?nl:t?el:tl)(n,t))}function sl(){this.textContent=""}function ol(e){return function(){this.textContent=e}}function il(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function al(e){return arguments.length?this.each(e==null?sl:(typeof e=="function"?il:ol)(e)):this.node().textContent}function ul(){this.innerHTML=""}function dl(e){return function(){this.innerHTML=e}}function cl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ll(e){return arguments.length?this.each(e==null?ul:(typeof e=="function"?cl:dl)(e)):this.node().innerHTML}function fl(){this.nextSibling&&this.parentNode.appendChild(this)}function hl(){return this.each(fl)}function pl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gl(){return this.each(pl)}function ml(e){var t=typeof e=="function"?e:qi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yl(){return null}function bl(e,t){var n=typeof e=="function"?e:qi(e),r=t==null?yl:typeof t=="function"?t:Bs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function wl(){var e=this.parentNode;e&&e.removeChild(this)}function _l(){return this.each(wl)}function vl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(e){return this.select(e?xl:vl)}function Sl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cl(e){return function(t){e.call(this,t,this.__data__)}}function El(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ml(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,a;n<s;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function jl(e,t,n){return function(){var r=this.__on,s,a=Cl(t);if(r){for(var i=0,u=r.length;i<u;++i)if((s=r[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(s):this.__on=[s]}}function Tl(e,t,n){var r=El(e+""),s,a=r.length,i;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,f=u.length,g;l<f;++l)for(s=0,g=u[l];s<a;++s)if((i=r[s]).type===g.type&&i.name===g.name)return g.value}return}for(u=t?jl:Ml,s=0;s<a;++s)this.each(u(r[s],t,n));return this}function ra(e,t,n){var r=Ji(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Al(e,t){return function(){return ra(this,e,t)}}function Il(e,t){return function(){return ra(this,e,t.apply(this,arguments))}}function Nl(e,t){return this.each((typeof t=="function"?Il:Al)(e,t))}function*Dl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var sa=[null];function Ve(e,t){this._groups=e,this._parents=t}function Ln(){return new Ve([[document.documentElement]],sa)}function Ll(){return this}Ve.prototype=Ln.prototype={constructor:Ve,select:ic,selectAll:cc,selectChild:pc,selectChildren:bc,filter:wc,data:Cc,enter:_c,exit:Mc,join:jc,merge:Tc,selection:Ll,order:Ac,sort:Ic,call:Dc,nodes:Lc,node:Rc,size:$c,empty:zc,each:Hc,attr:Gc,style:Xc,property:Qc,classed:rl,text:al,html:ll,raise:hl,lower:gl,append:ml,insert:bl,remove:_l,clone:kl,datum:Sl,on:Tl,dispatch:Nl,[Symbol.iterator]:Dl};function qe(e){return typeof e=="string"?new Ve([[document.querySelector(e)]],[document.documentElement]):new Ve([[e]],sa)}function Rl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ot(e,t){if(e=Rl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const $l={passive:!1},kn={capture:!0,passive:!1};function qr(e){e.stopImmediatePropagation()}function Xt(e){e.preventDefault(),e.stopImmediatePropagation()}function oa(e){var t=e.document.documentElement,n=qe(e).on("dragstart.drag",Xt,kn);"onselectstart"in t?n.on("selectstart.drag",Xt,kn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ia(e,t){var n=e.document.documentElement,r=qe(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xt,kn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Fn=e=>()=>e;function fs(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:a,x:i,y:u,dx:l,dy:f,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:g}})}fs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function zl(e){return!e.ctrlKey&&!e.button}function Hl(){return this.parentNode}function Vl(e,t){return t??{x:e.x,y:e.y}}function Pl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bl(){var e=zl,t=Hl,n=Vl,r=Pl,s={},a=wr("start","drag","end"),i=0,u,l,f,g,y=0;function v(o){o.on("mousedown.drag",w).filter(r).on("touchstart.drag",I).on("touchmove.drag",M,$l).on("touchend.drag touchcancel.drag",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(o,c){if(!(g||!e.call(this,o,c))){var d=$(this,t.call(this,o,c),o,c,"mouse");d&&(qe(o.view).on("mousemove.drag",A,kn).on("mouseup.drag",C,kn),oa(o.view),qr(o),f=!1,u=o.clientX,l=o.clientY,d("start",o))}}function A(o){if(Xt(o),!f){var c=o.clientX-u,d=o.clientY-l;f=c*c+d*d>y}s.mouse("drag",o)}function C(o){qe(o.view).on("mousemove.drag mouseup.drag",null),ia(o.view,f),Xt(o),s.mouse("end",o)}function I(o,c){if(e.call(this,o,c)){var d=o.changedTouches,m=t.call(this,o,c),b=d.length,k,x;for(k=0;k<b;++k)(x=$(this,m,o,c,d[k].identifier,d[k]))&&(qr(o),x("start",o,d[k]))}}function M(o){var c=o.changedTouches,d=c.length,m,b;for(m=0;m<d;++m)(b=s[c[m].identifier])&&(Xt(o),b("drag",o,c[m]))}function L(o){var c=o.changedTouches,d=c.length,m,b;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),m=0;m<d;++m)(b=s[c[m].identifier])&&(qr(o),b("end",o,c[m]))}function $(o,c,d,m,b,k){var x=a.copy(),j=ot(k||d,c),H,N,_;if((_=n.call(o,new fs("beforestart",{sourceEvent:d,target:v,identifier:b,active:i,x:j[0],y:j[1],dx:0,dy:0,dispatch:x}),m))!=null)return H=_.x-j[0]||0,N=_.y-j[1]||0,function S(h,T,z){var D=j,V;switch(h){case"start":s[b]=S,V=i++;break;case"end":delete s[b],--i;case"drag":j=ot(z||T,c),V=i;break}x.call(h,o,new fs(h,{sourceEvent:T,subject:_,target:v,identifier:b,active:V,x:j[0]+H,y:j[1]+N,dx:j[0]-D[0],dy:j[1]-D[1],dispatch:x}),m)}}return v.filter=function(o){return arguments.length?(e=typeof o=="function"?o:Fn(!!o),v):e},v.container=function(o){return arguments.length?(t=typeof o=="function"?o:Fn(o),v):t},v.subject=function(o){return arguments.length?(n=typeof o=="function"?o:Fn(o),v):n},v.touchable=function(o){return arguments.length?(r=typeof o=="function"?o:Fn(!!o),v):r},v.on=function(){var o=a.on.apply(a,arguments);return o===a?v:o},v.clickDistance=function(o){return arguments.length?(y=(o=+o)*o,v):Math.sqrt(y)},v}var Mo=180/Math.PI,hs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aa(e,t,n,r,s,a){var i,u,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(t,e)*Mo,skewX:Math.atan(l)*Mo,scaleX:i,scaleY:u}}var Wn;function Ol(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hs:aa(t.a,t.b,t.c,t.d,t.e,t.f)}function Fl(e){return e==null||(Wn||(Wn=document.createElementNS("http://www.w3.org/2000/svg","g")),Wn.setAttribute("transform",e),!(e=Wn.transform.baseVal.consolidate()))?hs:(e=e.matrix,aa(e.a,e.b,e.c,e.d,e.e,e.f))}function ua(e,t,n,r){function s(f){return f.length?f.pop()+" ":""}function a(f,g,y,v,w,A){if(f!==y||g!==v){var C=w.push("translate(",null,t,null,n);A.push({i:C-4,x:Nt(f,y)},{i:C-2,x:Nt(g,v)})}else(y||v)&&w.push("translate("+y+t+v+n)}function i(f,g,y,v){f!==g?(f-g>180?g+=360:g-f>180&&(f+=360),v.push({i:y.push(s(y)+"rotate(",null,r)-2,x:Nt(f,g)})):g&&y.push(s(y)+"rotate("+g+r)}function u(f,g,y,v){f!==g?v.push({i:y.push(s(y)+"skewX(",null,r)-2,x:Nt(f,g)}):g&&y.push(s(y)+"skewX("+g+r)}function l(f,g,y,v,w,A){if(f!==y||g!==v){var C=w.push(s(w)+"scale(",null,",",null,")");A.push({i:C-4,x:Nt(f,y)},{i:C-2,x:Nt(g,v)})}else(y!==1||v!==1)&&w.push(s(w)+"scale("+y+","+v+")")}return function(f,g){var y=[],v=[];return f=e(f),g=e(g),a(f.translateX,f.translateY,g.translateX,g.translateY,y,v),i(f.rotate,g.rotate,y,v),u(f.skewX,g.skewX,y,v),l(f.scaleX,f.scaleY,g.scaleX,g.scaleY,y,v),f=g=null,function(w){for(var A=-1,C=v.length,I;++A<C;)y[(I=v[A]).i]=I.x(w);return y.join("")}}}var Wl=ua(Ol,"px, ","px)","deg)"),Gl=ua(Fl,", ",")",")"),Ul=1e-12;function jo(e){return((e=Math.exp(e))+1/e)/2}function ql(e){return((e=Math.exp(e))-1/e)/2}function Kl(e){return((e=Math.exp(2*e))-1)/(e+1)}const Xl=function e(t,n,r){function s(a,i){var u=a[0],l=a[1],f=a[2],g=i[0],y=i[1],v=i[2],w=g-u,A=y-l,C=w*w+A*A,I,M;if(C<Ul)M=Math.log(v/f)/t,I=function(m){return[u+m*w,l+m*A,f*Math.exp(t*m*M)]};else{var L=Math.sqrt(C),$=(v*v-f*f+r*C)/(2*f*n*L),o=(v*v-f*f-r*C)/(2*v*n*L),c=Math.log(Math.sqrt($*$+1)-$),d=Math.log(Math.sqrt(o*o+1)-o);M=(d-c)/t,I=function(m){var b=m*M,k=jo(c),x=f/(n*L)*(k*Kl(t*b+c)-ql(c));return[u+x*w,l+x*A,f*k/jo(t*b+c)]}}return I.duration=M*1e3*t/Math.SQRT2,I}return s.rho=function(a){var i=Math.max(.001,+a),u=i*i,l=u*u;return e(i,u,l)},s}(Math.SQRT2,2,4);var tn=0,yn=0,fn=0,da=1e3,ur,bn,dr=0,Ht=0,vr=0,Sn=typeof performance=="object"&&performance.now?performance:Date,ca=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fs(){return Ht||(ca(Yl),Ht=Sn.now()+vr)}function Yl(){Ht=0}function cr(){this._call=this._time=this._next=null}cr.prototype=la.prototype={constructor:cr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fs():+n)+(t==null?0:+t),!this._next&&bn!==this&&(bn?bn._next=this:ur=this,bn=this),this._call=e,this._time=n,ps()},stop:function(){this._call&&(this._call=null,this._time=1/0,ps())}};function la(e,t,n){var r=new cr;return r.restart(e,t,n),r}function Zl(){Fs(),++tn;for(var e=ur,t;e;)(t=Ht-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tn}function To(){Ht=(dr=Sn.now())+vr,tn=yn=0;try{Zl()}finally{tn=0,Ql(),Ht=0}}function Jl(){var e=Sn.now(),t=e-dr;t>da&&(vr-=t,dr=e)}function Ql(){for(var e,t=ur,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ur=n);bn=e,ps(r)}function ps(e){if(!tn){yn&&(yn=clearTimeout(yn));var t=e-Ht;t>24?(e<1/0&&(yn=setTimeout(To,e-Sn.now()-vr)),fn&&(fn=clearInterval(fn))):(fn||(dr=Sn.now(),fn=setInterval(Jl,da)),tn=1,ca(To))}}function Ao(e,t,n){var r=new cr;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var ef=wr("start","end","cancel","interrupt"),tf=[],fa=0,Io=1,gs=2,er=3,No=4,ms=5,tr=6;function xr(e,t,n,r,s,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;nf(e,n,{name:t,index:r,group:s,on:ef,tween:tf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:fa})}function Ws(e,t){var n=Ye(e,t);if(n.state>fa)throw new Error("too late; already scheduled");return n}function dt(e,t){var n=Ye(e,t);if(n.state>er)throw new Error("too late; already running");return n}function Ye(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nf(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=la(a,0,n.time);function a(f){n.state=Io,n.timer.restart(i,n.delay,n.time),n.delay<=f&&i(f-n.delay)}function i(f){var g,y,v,w;if(n.state!==Io)return l();for(g in r)if(w=r[g],w.name===n.name){if(w.state===er)return Ao(i);w.state===No?(w.state=tr,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete r[g]):+g<t&&(w.state=tr,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete r[g])}if(Ao(function(){n.state===er&&(n.state=No,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=gs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===gs){for(n.state=er,s=new Array(v=n.tween.length),g=0,y=-1;g<v;++g)(w=n.tween[g].value.call(e,e.__data__,n.index,n.group))&&(s[++y]=w);s.length=y+1}}function u(f){for(var g=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=ms,1),y=-1,v=s.length;++y<v;)s[y].call(e,g);n.state===ms&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=tr,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function nr(e,t){var n=e.__transition,r,s,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}s=r.state>gs&&r.state<ms,r.state=tr,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function rf(e){return this.each(function(){nr(this,e)})}function sf(e,t){var n,r;return function(){var s=dt(this,e),a=s.tween;if(a!==n){r=n=a;for(var i=0,u=r.length;i<u;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function of(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=dt(this,e),i=a.tween;if(i!==r){s=(r=i).slice();for(var u={name:t,value:n},l=0,f=s.length;l<f;++l)if(s[l].name===t){s[l]=u;break}l===f&&s.push(u)}a.tween=s}}function af(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ye(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((t==null?sf:of)(n,e,t))}function Gs(e,t,n){var r=e._id;return e.each(function(){var s=dt(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Ye(s,r).value[t]}}function ha(e,t){var n;return(typeof t=="number"?Nt:t instanceof _o?vo:(n=_o(t))?(t=n,vo):Ld)(e,t)}function uf(e){return function(){this.removeAttribute(e)}}function df(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cf(e,t,n){var r,s=n+"",a;return function(){var i=this.getAttribute(e);return i===s?null:i===r?a:a=t(r=i,n)}}function lf(e,t,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===r?a:a=t(r=i,n)}}function ff(e,t,n){var r,s,a;return function(){var i,u=n(this),l;return u==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=u+"",i===l?null:i===r&&l===s?a:(s=l,a=t(r=i,u)))}}function hf(e,t,n){var r,s,a;return function(){var i,u=n(this),l;return u==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=u+"",i===l?null:i===r&&l===s?a:(s=l,a=t(r=i,u)))}}function pf(e,t){var n=_r(e),r=n==="transform"?Gl:ha;return this.attrTween(e,typeof t=="function"?(n.local?hf:ff)(n,r,Gs(this,"attr."+e,t)):t==null?(n.local?df:uf)(n):(n.local?lf:cf)(n,r,t))}function gf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yf(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&mf(e,a)),n}return s._value=t,s}function bf(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&gf(e,a)),n}return s._value=t,s}function wf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_r(e);return this.tween(n,(r.local?yf:bf)(r,t))}function _f(e,t){return function(){Ws(this,e).delay=+t.apply(this,arguments)}}function vf(e,t){return t=+t,function(){Ws(this,e).delay=t}}function xf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_f:vf)(t,e)):Ye(this.node(),t).delay}function kf(e,t){return function(){dt(this,e).duration=+t.apply(this,arguments)}}function Sf(e,t){return t=+t,function(){dt(this,e).duration=t}}function Cf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kf:Sf)(t,e)):Ye(this.node(),t).duration}function Ef(e,t){if(typeof t!="function")throw new Error;return function(){dt(this,e).ease=t}}function Mf(e){var t=this._id;return arguments.length?this.each(Ef(t,e)):Ye(this.node(),t).ease}function jf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dt(this,e).ease=n}}function Tf(e){if(typeof e!="function")throw new Error;return this.each(jf(this._id,e))}function Af(e){typeof e!="function"&&(e=Xi(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,u=r[s]=[],l,f=0;f<i;++f)(l=a[f])&&e.call(l,l.__data__,f,a)&&u.push(l);return new mt(r,this._parents,this._name,this._id)}function If(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,a=Math.min(r,s),i=new Array(r),u=0;u<a;++u)for(var l=t[u],f=n[u],g=l.length,y=i[u]=new Array(g),v,w=0;w<g;++w)(v=l[w]||f[w])&&(y[w]=v);for(;u<r;++u)i[u]=t[u];return new mt(i,this._parents,this._name,this._id)}function Nf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Df(e,t,n){var r,s,a=Nf(t)?Ws:dt;return function(){var i=a(this,e),u=i.on;u!==r&&(s=(r=u).copy()).on(t,n),i.on=s}}function Lf(e,t){var n=this._id;return arguments.length<2?Ye(this.node(),n).on.on(e):this.each(Df(n,e,t))}function Rf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $f(){return this.on("end.remove",Rf(this._id))}function zf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bs(e));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var u=r[i],l=u.length,f=a[i]=new Array(l),g,y,v=0;v<l;++v)(g=u[v])&&(y=e.call(g,g.__data__,v,u))&&("__data__"in g&&(y.__data__=g.__data__),f[v]=y,xr(f[v],t,n,v,f,Ye(g,n)));return new mt(a,this._parents,t,n)}function Hf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ki(e));for(var r=this._groups,s=r.length,a=[],i=[],u=0;u<s;++u)for(var l=r[u],f=l.length,g,y=0;y<f;++y)if(g=l[y]){for(var v=e.call(g,g.__data__,y,l),w,A=Ye(g,n),C=0,I=v.length;C<I;++C)(w=v[C])&&xr(w,t,n,C,v,A);a.push(v),i.push(g)}return new mt(a,i,t,n)}var Vf=Ln.prototype.constructor;function Pf(){return new Vf(this._groups,this._parents)}function Bf(e,t){var n,r,s;return function(){var a=en(this,e),i=(this.style.removeProperty(e),en(this,e));return a===i?null:a===n&&i===r?s:s=t(n=a,r=i)}}function pa(e){return function(){this.style.removeProperty(e)}}function Of(e,t,n){var r,s=n+"",a;return function(){var i=en(this,e);return i===s?null:i===r?a:a=t(r=i,n)}}function Ff(e,t,n){var r,s,a;return function(){var i=en(this,e),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(e),en(this,e))),i===l?null:i===r&&l===s?a:(s=l,a=t(r=i,u))}}function Wf(e,t){var n,r,s,a="style."+t,i="end."+a,u;return function(){var l=dt(this,e),f=l.on,g=l.value[a]==null?u||(u=pa(t)):void 0;(f!==n||s!==g)&&(r=(n=f).copy()).on(i,s=g),l.on=r}}function Gf(e,t,n){var r=(e+="")=="transform"?Wl:ha;return t==null?this.styleTween(e,Bf(e,r)).on("end.style."+e,pa(e)):typeof t=="function"?this.styleTween(e,Ff(e,r,Gs(this,"style."+e,t))).each(Wf(this._id,e)):this.styleTween(e,Of(e,r,t),n).on("end.style."+e,null)}function Uf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qf(e,t,n){var r,s;function a(){var i=t.apply(this,arguments);return i!==s&&(r=(s=i)&&Uf(e,i,n)),r}return a._value=t,a}function Kf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qf(e,t,n??""))}function Xf(e){return function(){this.textContent=e}}function Yf(e){return function(){var t=e(this);this.textContent=t??""}}function Zf(e){return this.tween("text",typeof e=="function"?Yf(Gs(this,"text",e)):Xf(e==null?"":e+""))}function Jf(e){return function(t){this.textContent=e.call(this,t)}}function Qf(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&Jf(s)),t}return r._value=e,r}function eh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qf(e))}function th(){for(var e=this._name,t=this._id,n=ga(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],u=i.length,l,f=0;f<u;++f)if(l=i[f]){var g=Ye(l,t);xr(l,e,n,f,i,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new mt(r,this._parents,e,n)}function nh(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var u={value:i},l={value:function(){--s===0&&a()}};n.each(function(){var f=dt(this,r),g=f.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(l)),f.on=t}),s===0&&a()})}var rh=0;function mt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ga(){return++rh}var pt=Ln.prototype;mt.prototype={constructor:mt,select:zf,selectAll:Hf,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:Af,merge:If,selection:Pf,transition:th,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:Lf,attr:pf,attrTween:wf,style:Gf,styleTween:Kf,text:Zf,textTween:eh,remove:$f,tween:af,delay:xf,duration:Cf,ease:Mf,easeVarying:Tf,end:nh,[Symbol.iterator]:pt[Symbol.iterator]};function sh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oh={time:null,delay:0,duration:250,ease:sh};function ih(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ah(e){var t,n;e instanceof mt?(t=e._id,e=e._name):(t=ga(),(n=oh).time=Fs(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],u=i.length,l,f=0;f<u;++f)(l=i[f])&&xr(l,e,t,f,i,n||ih(l,t));return new mt(r,this._parents,e,t)}Ln.prototype.interrupt=rf;Ln.prototype.transition=ah;const Gn=e=>()=>e;function uh(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function gt(e,t,n){this.k=e,this.x=t,this.y=n}gt.prototype={constructor:gt,scale:function(e){return e===1?this:new gt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new gt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Et=new gt(1,0,0);gt.prototype;function Kr(e){e.stopImmediatePropagation()}function hn(e){e.preventDefault(),e.stopImmediatePropagation()}function dh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ch(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Do(){return this.__zoom||Et}function lh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fh(){return navigator.maxTouchPoints||"ontouchstart"in this}function hh(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function ph(){var e=dh,t=ch,n=hh,r=lh,s=fh,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Xl,f=wr("start","zoom","end"),g,y,v,w=500,A=150,C=0,I=10;function M(_){_.property("__zoom",Do).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",x).filter(s).on("touchstart.zoom",j).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(_,S,h,T){var z=_.selection?_.selection():_;z.property("__zoom",Do),_!==z?c(_,S,h,T):z.interrupt().each(function(){d(this,arguments).event(T).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},M.scaleBy=function(_,S,h,T){M.scaleTo(_,function(){var z=this.__zoom.k,D=typeof S=="function"?S.apply(this,arguments):S;return z*D},h,T)},M.scaleTo=function(_,S,h,T){M.transform(_,function(){var z=t.apply(this,arguments),D=this.__zoom,V=h==null?o(z):typeof h=="function"?h.apply(this,arguments):h,R=D.invert(V),P=typeof S=="function"?S.apply(this,arguments):S;return n($(L(D,P),V,R),z,i)},h,T)},M.translateBy=function(_,S,h,T){M.transform(_,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof h=="function"?h.apply(this,arguments):h),t.apply(this,arguments),i)},null,T)},M.translateTo=function(_,S,h,T,z){M.transform(_,function(){var D=t.apply(this,arguments),V=this.__zoom,R=T==null?o(D):typeof T=="function"?T.apply(this,arguments):T;return n(Et.translate(R[0],R[1]).scale(V.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof h=="function"?-h.apply(this,arguments):-h),D,i)},T,z)};function L(_,S){return S=Math.max(a[0],Math.min(a[1],S)),S===_.k?_:new gt(S,_.x,_.y)}function $(_,S,h){var T=S[0]-h[0]*_.k,z=S[1]-h[1]*_.k;return T===_.x&&z===_.y?_:new gt(_.k,T,z)}function o(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function c(_,S,h,T){_.on("start.zoom",function(){d(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){d(this,arguments).event(T).end()}).tween("zoom",function(){var z=this,D=arguments,V=d(z,D).event(T),R=t.apply(z,D),P=h==null?o(R):typeof h=="function"?h.apply(z,D):h,O=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),W=z.__zoom,X=typeof S=="function"?S.apply(z,D):S,ee=l(W.invert(P).concat(O/W.k),X.invert(P).concat(O/X.k));return function(q){if(q===1)q=X;else{var U=ee(q),ne=O/U[2];q=new gt(ne,P[0]-U[0]*ne,P[1]-U[1]*ne)}V.zoom(null,q)}})}function d(_,S,h){return!h&&_.__zooming||new m(_,S)}function m(_,S){this.that=_,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,S),this.taps=0}m.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,S){return this.mouse&&_!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var S=qe(this.that).datum();f.call(_,this.that,new uh(_,{sourceEvent:this.sourceEvent,target:M,type:_,transform:this.that.__zoom,dispatch:f}),S)}};function b(_,...S){if(!e.apply(this,arguments))return;var h=d(this,S).event(_),T=this.__zoom,z=Math.max(a[0],Math.min(a[1],T.k*Math.pow(2,r.apply(this,arguments)))),D=ot(_);if(h.wheel)(h.mouse[0][0]!==D[0]||h.mouse[0][1]!==D[1])&&(h.mouse[1]=T.invert(h.mouse[0]=D)),clearTimeout(h.wheel);else{if(T.k===z)return;h.mouse=[D,T.invert(D)],nr(this),h.start()}hn(_),h.wheel=setTimeout(V,A),h.zoom("mouse",n($(L(T,z),h.mouse[0],h.mouse[1]),h.extent,i));function V(){h.wheel=null,h.end()}}function k(_,...S){if(v||!e.apply(this,arguments))return;var h=_.currentTarget,T=d(this,S,!0).event(_),z=qe(_.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",O,!0),D=ot(_,h),V=_.clientX,R=_.clientY;oa(_.view),Kr(_),T.mouse=[D,this.__zoom.invert(D)],nr(this),T.start();function P(W){if(hn(W),!T.moved){var X=W.clientX-V,ee=W.clientY-R;T.moved=X*X+ee*ee>C}T.event(W).zoom("mouse",n($(T.that.__zoom,T.mouse[0]=ot(W,h),T.mouse[1]),T.extent,i))}function O(W){z.on("mousemove.zoom mouseup.zoom",null),ia(W.view,T.moved),hn(W),T.event(W).end()}}function x(_,...S){if(e.apply(this,arguments)){var h=this.__zoom,T=ot(_.changedTouches?_.changedTouches[0]:_,this),z=h.invert(T),D=h.k*(_.shiftKey?.5:2),V=n($(L(h,D),T,z),t.apply(this,S),i);hn(_),u>0?qe(this).transition().duration(u).call(c,V,T,_):qe(this).call(M.transform,V,T,_)}}function j(_,...S){if(e.apply(this,arguments)){var h=_.touches,T=h.length,z=d(this,S,_.changedTouches.length===T).event(_),D,V,R,P;for(Kr(_),V=0;V<T;++V)R=h[V],P=ot(R,this),P=[P,this.__zoom.invert(P),R.identifier],z.touch0?!z.touch1&&z.touch0[2]!==P[2]&&(z.touch1=P,z.taps=0):(z.touch0=P,D=!0,z.taps=1+!!g);g&&(g=clearTimeout(g)),D&&(z.taps<2&&(y=P[0],g=setTimeout(function(){g=null},w)),nr(this),z.start())}}function H(_,...S){if(this.__zooming){var h=d(this,S).event(_),T=_.changedTouches,z=T.length,D,V,R,P;for(hn(_),D=0;D<z;++D)V=T[D],R=ot(V,this),h.touch0&&h.touch0[2]===V.identifier?h.touch0[0]=R:h.touch1&&h.touch1[2]===V.identifier&&(h.touch1[0]=R);if(V=h.that.__zoom,h.touch1){var O=h.touch0[0],W=h.touch0[1],X=h.touch1[0],ee=h.touch1[1],q=(q=X[0]-O[0])*q+(q=X[1]-O[1])*q,U=(U=ee[0]-W[0])*U+(U=ee[1]-W[1])*U;V=L(V,Math.sqrt(q/U)),R=[(O[0]+X[0])/2,(O[1]+X[1])/2],P=[(W[0]+ee[0])/2,(W[1]+ee[1])/2]}else if(h.touch0)R=h.touch0[0],P=h.touch0[1];else return;h.zoom("touch",n($(V,R,P),h.extent,i))}}function N(_,...S){if(this.__zooming){var h=d(this,S).event(_),T=_.changedTouches,z=T.length,D,V;for(Kr(_),v&&clearTimeout(v),v=setTimeout(function(){v=null},w),D=0;D<z;++D)V=T[D],h.touch0&&h.touch0[2]===V.identifier?delete h.touch0:h.touch1&&h.touch1[2]===V.identifier&&delete h.touch1;if(h.touch1&&!h.touch0&&(h.touch0=h.touch1,delete h.touch1),h.touch0)h.touch0[1]=this.__zoom.invert(h.touch0[0]);else if(h.end(),h.taps===2&&(V=ot(V,this),Math.hypot(y[0]-V[0],y[1]-V[1])<I)){var R=qe(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return M.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Gn(+_),M):r},M.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Gn(!!_),M):e},M.touchable=function(_){return arguments.length?(s=typeof _=="function"?_:Gn(!!_),M):s},M.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Gn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),M):t},M.scaleExtent=function(_){return arguments.length?(a[0]=+_[0],a[1]=+_[1],M):[a[0],a[1]]},M.translateExtent=function(_){return arguments.length?(i[0][0]=+_[0][0],i[1][0]=+_[1][0],i[0][1]=+_[0][1],i[1][1]=+_[1][1],M):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},M.constrain=function(_){return arguments.length?(n=_,M):n},M.duration=function(_){return arguments.length?(u=+_,M):u},M.interpolate=function(_){return arguments.length?(l=_,M):l},M.on=function(){var _=f.on.apply(f,arguments);return _===f?M:_},M.clickDistance=function(_){return arguments.length?(C=(_=+_)*_,M):Math.sqrt(C)},M.tapDistance=function(_){return arguments.length?(I=+_,M):I},M}const kr=E.createContext(null),gh=kr.Provider,yt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ma=yt.error001();function me(e,t){const n=E.useContext(kr);if(n===null)throw new Error(ma);return Ui(n,e,t)}const Ce=()=>{const e=E.useContext(kr);if(e===null)throw new Error(ma);return E.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},mh=e=>e.userSelectionActive?"none":"all";function yh({position:e,children:t,className:n,style:r,...s}){const a=me(mh),i=`${e}`.split("-");return F.createElement("div",{className:Ge(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s},t)}function bh({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:F.createElement(yh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},F.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const wh=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:u=2,children:l,className:f,...g})=>{const y=E.useRef(null),[v,w]=E.useState({x:0,y:0,width:0,height:0}),A=Ge(["react-flow__edge-textwrapper",f]);return E.useEffect(()=>{if(y.current){const C=y.current.getBBox();w({x:C.x,y:C.y,width:C.width,height:C.height})}},[n]),typeof n>"u"||!n?null:F.createElement("g",{transform:`translate(${e-v.width/2} ${t-v.height/2})`,className:A,visibility:v.width?"visible":"hidden",...g},s&&F.createElement("rect",{width:v.width+2*i[0],x:-i[0],y:-i[1],height:v.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),F.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:y,style:r},n),l)};var _h=E.memo(wh);const Us=e=>({width:e.offsetWidth,height:e.offsetHeight}),nn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),qs=(e={x:0,y:0},t)=>({x:nn(e.x,t[0][0],t[1][0]),y:nn(e.y,t[0][1],t[1][1])}),Lo=(e,t,n)=>e<t?nn(Math.abs(e-t),1,50)/50:e>n?-nn(Math.abs(e-n),1,50)/50:0,ya=(e,t)=>{const n=Lo(e.x,35,t.width-35)*20,r=Lo(e.y,35,t.height-35)*20;return[n,r]},ba=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},wa=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Cn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),_a=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ro=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),k0=(e,t)=>_a(wa(Cn(e),Cn(t))),ys=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},vh=e=>Fe(e.width)&&Fe(e.height)&&Fe(e.x)&&Fe(e.y),Fe=e=>!isNaN(e)&&isFinite(e),_e=Symbol.for("internals"),va=["Enter"," ","Escape"],xh=(e,t)=>{},kh=e=>"nativeEvent"in e;function bs(e){var s,a;const t=kh(e)?e.nativeEvent:e,n=((a=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:a[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const xa=e=>"clientX"in e,Mt=(e,t)=>{var a,i;const n=xa(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},lr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Rn=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:y,markerStart:v,interactionWidth:w=20})=>F.createElement(F.Fragment,null,F.createElement("path",{id:e,style:g,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:v}),w&&F.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),s&&Fe(n)&&Fe(r)?F.createElement(_h,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f}):null);Rn.displayName="BaseEdge";function pn(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(a=>a.id===e);s&&n(r,{...s})}}function ka({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,a=n<e?n+s:n-s,i=Math.abs(r-t)/2,u=r<t?r+i:r-i;return[a,u,s,i]}function Sa({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:u}){const l=e*.125+s*.375+i*.375+n*.125,f=t*.125+a*.375+u*.375+r*.125,g=Math.abs(l-e),y=Math.abs(f-t);return[l,f,g,y]}var Vt;(function(e){e.Strict="strict",e.Loose="loose"})(Vt||(Vt={}));var Rt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Rt||(Rt={}));var En;(function(e){e.Partial="partial",e.Full="full"})(En||(En={}));var Ct;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ct||(Ct={}));var fr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(fr||(fr={}));var J;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(J||(J={}));function $o({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===J.Left||e===J.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function Ca({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:a=J.Top}){const[i,u]=$o({pos:n,x1:e,y1:t,x2:r,y2:s}),[l,f]=$o({pos:a,x1:r,y1:s,x2:e,y2:t}),[g,y,v,w]=Sa({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:i,sourceControlY:u,targetControlX:l,targetControlY:f});return[`M${e},${t} C${i},${u} ${l},${f} ${r},${s}`,g,y,v,w]}const Ks=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=J.Bottom,targetPosition:a=J.Top,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:y,style:v,markerEnd:w,markerStart:A,interactionWidth:C})=>{const[I,M,L]=Ca({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return F.createElement(Rn,{path:I,labelX:M,labelY:L,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:y,style:v,markerEnd:w,markerStart:A,interactionWidth:C})});Ks.displayName="SimpleBezierEdge";const zo={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},Sh=({source:e,sourcePosition:t=J.Bottom,target:n})=>t===J.Left||t===J.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ho=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ch({source:e,sourcePosition:t=J.Bottom,target:n,targetPosition:r=J.Top,center:s,offset:a}){const i=zo[t],u=zo[r],l={x:e.x+i.x*a,y:e.y+i.y*a},f={x:n.x+u.x*a,y:n.y+u.y*a},g=Sh({source:l,sourcePosition:t,target:f}),y=g.x!==0?"x":"y",v=g[y];let w=[],A,C;const I={x:0,y:0},M={x:0,y:0},[L,$,o,c]=ka({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[y]*u[y]===-1){A=s.x||L,C=s.y||$;const m=[{x:A,y:l.y},{x:A,y:f.y}],b=[{x:l.x,y:C},{x:f.x,y:C}];i[y]===v?w=y==="x"?m:b:w=y==="x"?b:m}else{const m=[{x:l.x,y:f.y}],b=[{x:f.x,y:l.y}];if(y==="x"?w=i.x===v?b:m:w=i.y===v?m:b,t===r){const N=Math.abs(e[y]-n[y]);if(N<=a){const _=Math.min(a-1,a-N);i[y]===v?I[y]=(l[y]>e[y]?-1:1)*_:M[y]=(f[y]>n[y]?-1:1)*_}}if(t!==r){const N=y==="x"?"y":"x",_=i[y]===u[N],S=l[N]>f[N],h=l[N]<f[N];(i[y]===1&&(!_&&S||_&&h)||i[y]!==1&&(!_&&h||_&&S))&&(w=y==="x"?m:b)}const k={x:l.x+I.x,y:l.y+I.y},x={x:f.x+M.x,y:f.y+M.y},j=Math.max(Math.abs(k.x-w[0].x),Math.abs(x.x-w[0].x)),H=Math.max(Math.abs(k.y-w[0].y),Math.abs(x.y-w[0].y));j>=H?(A=(k.x+x.x)/2,C=w[0].y):(A=w[0].x,C=(k.y+x.y)/2)}return[[e,{x:l.x+I.x,y:l.y+I.y},...w,{x:f.x+M.x,y:f.y+M.y},n],A,C,o,c]}function Eh(e,t,n,r){const s=Math.min(Ho(e,t)/2,Ho(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const f=e.x<n.x?-1:1,g=e.y<n.y?1:-1;return`L ${a+s*f},${i}Q ${a},${i} ${a},${i+s*g}`}const u=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*u},${i}`}function ws({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:a=J.Top,borderRadius:i=5,centerX:u,centerY:l,offset:f=20}){const[g,y,v,w,A]=Ch({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:u,y:l},offset:f});return[g.reduce((I,M,L)=>{let $="";return L>0&&L<g.length-1?$=Eh(g[L-1],M,g[L+1],i):$=`${L===0?"M":"L"}${M.x} ${M.y}`,I+=$,I},""),y,v,w,A]}const Sr=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,sourcePosition:y=J.Bottom,targetPosition:v=J.Top,markerEnd:w,markerStart:A,pathOptions:C,interactionWidth:I})=>{const[M,L,$]=ws({sourceX:e,sourceY:t,sourcePosition:y,targetX:n,targetY:r,targetPosition:v,borderRadius:C==null?void 0:C.borderRadius,offset:C==null?void 0:C.offset});return F.createElement(Rn,{path:M,labelX:L,labelY:$,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:w,markerStart:A,interactionWidth:I})});Sr.displayName="SmoothStepEdge";const Xs=E.memo(e=>{var t;return F.createElement(Sr,{...e,pathOptions:E.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Xs.displayName="StepEdge";function Mh({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,a,i,u]=ka({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,a,i,u]}const Ys=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:y,markerStart:v,interactionWidth:w})=>{const[A,C,I]=Mh({sourceX:e,sourceY:t,targetX:n,targetY:r});return F.createElement(Rn,{path:A,labelX:C,labelY:I,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:y,markerStart:v,interactionWidth:w})});Ys.displayName="StraightEdge";function Un(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Vo({pos:e,x1:t,y1:n,x2:r,y2:s,c:a}){switch(e){case J.Left:return[t-Un(t-r,a),n];case J.Right:return[t+Un(r-t,a),n];case J.Top:return[t,n-Un(n-s,a)];case J.Bottom:return[t,n+Un(s-n,a)]}}function Ea({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:a=J.Top,curvature:i=.25}){const[u,l]=Vo({pos:n,x1:e,y1:t,x2:r,y2:s,c:i}),[f,g]=Vo({pos:a,x1:r,y1:s,x2:e,y2:t,c:i}),[y,v,w,A]=Sa({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:u,sourceControlY:l,targetControlX:f,targetControlY:g});return[`M${e},${t} C${u},${l} ${f},${g} ${r},${s}`,y,v,w,A]}const hr=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=J.Bottom,targetPosition:a=J.Top,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:y,style:v,markerEnd:w,markerStart:A,pathOptions:C,interactionWidth:I})=>{const[M,L,$]=Ea({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:C==null?void 0:C.curvature});return F.createElement(Rn,{path:M,labelX:L,labelY:$,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:y,style:v,markerEnd:w,markerStart:A,interactionWidth:I})});hr.displayName="BezierEdge";const Zs=E.createContext(null),jh=Zs.Provider;Zs.Consumer;const Th=()=>E.useContext(Zs),Ah=e=>"id"in e&&"source"in e&&"target"in e,Ih=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,_s=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Nh=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Dh=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ah(e)?n={...e}:n={...e,id:Ih(e)},Nh(n,t)?t:t.concat(n)},vs=({x:e,y:t},[n,r,s],a,[i,u])=>{const l={x:(e-n)/s,y:(t-r)/s};return a?{x:i*Math.round(l.x/i),y:u*Math.round(l.y/u)}:l},Ma=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),Yt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},Js=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:a,y:i}=Yt(s,t).positionAbsolute;return wa(r,Cn({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _a(n)},ja=(e,t,[n,r,s]=[0,0,1],a=!1,i=!1,u=[0,0])=>{const l={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},f=[];return e.forEach(g=>{const{width:y,height:v,selectable:w=!0,hidden:A=!1}=g;if(i&&!w||A)return!1;const{positionAbsolute:C}=Yt(g,u),I={x:C.x,y:C.y,width:y||0,height:v||0},M=ys(l,I),L=typeof y>"u"||typeof v>"u"||y===null||v===null,$=a&&M>0,o=(y||0)*(v||0);(L||$||M>=o||g.dragging)&&f.push(g)}),f},Ta=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Aa=(e,t,n,r,s,a=.1)=>{const i=t/(e.width*(1+a)),u=n/(e.height*(1+a)),l=Math.min(i,u),f=nn(l,r,s),g=e.x+e.width/2,y=e.y+e.height/2,v=t/2-g*f,w=n/2-y*f;return{x:v,y:w,zoom:f}},Dt=(e,t=0)=>e.transition().duration(t);function Po(e,t,n,r){return(t[n]||[]).reduce((s,a)=>{var i,u;return`${e.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((u=e.positionAbsolute)==null?void 0:u.y)??0)+a.y+a.height/2}),s},[])}function Lh(e,t,n,r,s,a){const{x:i,y:u}=Mt(e),f=t.elementsFromPoint(i,u).find(A=>A.classList.contains("react-flow__handle"));if(f){const A=f.getAttribute("data-nodeid");if(A){const C=Qs(void 0,f),I=f.getAttribute("data-handleid"),M=a({nodeId:A,id:I,type:C});if(M){const L=s.find($=>$.nodeId===A&&$.type===C&&$.id===I);return{handle:{id:I,type:C,nodeId:A,x:(L==null?void 0:L.x)||n.x,y:(L==null?void 0:L.y)||n.y},validHandleResult:M}}}}let g=[],y=1/0;if(s.forEach(A=>{const C=Math.sqrt((A.x-n.x)**2+(A.y-n.y)**2);if(C<=r){const I=a(A);C<=y&&(C<y?g=[{handle:A,validHandleResult:I}]:C===y&&g.push({handle:A,validHandleResult:I}),y=C)}}),!g.length)return{handle:null,validHandleResult:Ia()};if(g.length===1)return g[0];const v=g.some(({validHandleResult:A})=>A.isValid),w=g.some(({handle:A})=>A.type==="target");return g.find(({handle:A,validHandleResult:C})=>w?A.type==="target":v?C.isValid:!0)||g[0]}const Rh={source:null,target:null,sourceHandle:null,targetHandle:null},Ia=()=>({handleDomNode:null,isValid:!1,connection:Rh,endHandle:null});function Na(e,t,n,r,s,a,i){const u=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),f={...Ia(),handleDomNode:l};if(l){const g=Qs(void 0,l),y=l.getAttribute("data-nodeid"),v=l.getAttribute("data-handleid"),w=l.classList.contains("connectable"),A=l.classList.contains("connectableend"),C={source:u?y:n,sourceHandle:u?v:r,target:u?n:y,targetHandle:u?r:v};f.connection=C,w&&A&&(t===Vt.Strict?u&&g==="source"||!u&&g==="target":y!==n||v!==r)&&(f.endHandle={nodeId:y,handleId:v,type:g},f.isValid=a(C))}return f}function $h({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,a)=>{if(a[_e]){const{handleBounds:i}=a[_e];let u=[],l=[];i&&(u=Po(a,i,"source",`${t}-${n}-${r}`),l=Po(a,i,"target",`${t}-${n}-${r}`)),s.push(...u,...l)}return s},[])}function Qs(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Xr(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function zh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Da({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:i,isValidConnection:u,edgeUpdaterType:l,onEdgeUpdateEnd:f}){const g=ba(e.target),{connectionMode:y,domNode:v,autoPanOnConnect:w,connectionRadius:A,onConnectStart:C,panBy:I,getNodes:M,cancelConnection:L}=a();let $=0,o;const{x:c,y:d}=Mt(e),m=g==null?void 0:g.elementFromPoint(c,d),b=Qs(l,m),k=v==null?void 0:v.getBoundingClientRect();if(!k||!b)return;let x,j=Mt(e,k),H=!1,N=null,_=!1,S=null;const h=$h({nodes:M(),nodeId:n,handleId:t,handleType:b}),T=()=>{if(!w)return;const[V,R]=ya(j,k);I({x:V,y:R}),$=requestAnimationFrame(T)};i({connectionPosition:j,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:b,connectionStartHandle:{nodeId:n,handleId:t,type:b},connectionEndHandle:null}),C==null||C(e,{nodeId:n,handleId:t,handleType:b});function z(V){const{transform:R}=a();j=Mt(V,k);const{handle:P,validHandleResult:O}=Lh(V,g,vs(j,R,!1,[1,1]),A,h,W=>Na(W,y,n,t,s?"target":"source",u,g));if(o=P,H||(T(),H=!0),S=O.handleDomNode,N=O.connection,_=O.isValid,i({connectionPosition:o&&_?Ma({x:o.x,y:o.y},R):j,connectionStatus:zh(!!o,_),connectionEndHandle:O.endHandle}),!o&&!_&&!S)return Xr(x);N.source!==N.target&&S&&(Xr(x),x=S,S.classList.add("connecting","react-flow__handle-connecting"),S.classList.toggle("valid",_),S.classList.toggle("react-flow__handle-valid",_))}function D(V){var R,P;(o||S)&&N&&_&&(r==null||r(N)),(P=(R=a()).onConnectEnd)==null||P.call(R,V),l&&(f==null||f(V)),Xr(x),L(),cancelAnimationFrame($),H=!1,_=!1,N=null,S=null,g.removeEventListener("mousemove",z),g.removeEventListener("mouseup",D),g.removeEventListener("touchmove",z),g.removeEventListener("touchend",D)}g.addEventListener("mousemove",z),g.addEventListener("mouseup",D),g.addEventListener("touchmove",z),g.addEventListener("touchend",D)}const Bo=()=>!0,Hh=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Vh=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},La=E.forwardRef(({type:e="source",position:t=J.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:u,children:l,className:f,onMouseDown:g,onTouchStart:y,...v},w)=>{var k,x;const A=i||null,C=e==="target",I=Ce(),M=Th(),{connectOnClick:L,noPanClassName:$}=me(Hh,$e),{connecting:o,clickConnecting:c}=me(Vh(M,A,e),$e);M||(x=(k=I.getState()).onError)==null||x.call(k,"010",yt.error010());const d=j=>{const{defaultEdgeOptions:H,onConnect:N,hasDefaultEdges:_}=I.getState(),S={...H,...j};if(_){const{edges:h,setEdges:T}=I.getState();T(Dh(S,h))}N==null||N(S),u==null||u(S)},m=j=>{if(!M)return;const H=xa(j);s&&(H&&j.button===0||!H)&&Da({event:j,handleId:A,nodeId:M,onConnect:d,isTarget:C,getState:I.getState,setState:I.setState,isValidConnection:n||I.getState().isValidConnection||Bo}),H?g==null||g(j):y==null||y(j)},b=j=>{const{onClickConnectStart:H,onClickConnectEnd:N,connectionClickStartHandle:_,connectionMode:S,isValidConnection:h}=I.getState();if(!M||!_&&!s)return;if(!_){H==null||H(j,{nodeId:M,handleId:A,handleType:e}),I.setState({connectionClickStartHandle:{nodeId:M,type:e,handleId:A}});return}const T=ba(j.target),z=n||h||Bo,{connection:D,isValid:V}=Na({nodeId:M,id:A,type:e},S,_.nodeId,_.handleId||null,_.type,z,T);V&&d(D),N==null||N(j),I.setState({connectionClickStartHandle:null})};return F.createElement("div",{"data-handleid":A,"data-nodeid":M,"data-handlepos":t,"data-id":`${M}-${A}-${e}`,className:Ge(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",$,f,{source:!C,target:C,connectable:r,connectablestart:s,connectableend:a,connecting:c,connectionindicator:r&&(s&&!o||a&&o)}]),onMouseDown:m,onTouchStart:m,onClick:L?b:void 0,ref:w,...v},l)});La.displayName="Handle";var rn=E.memo(La);const Ra=({data:e,isConnectable:t,targetPosition:n=J.Top,sourcePosition:r=J.Bottom})=>F.createElement(F.Fragment,null,F.createElement(rn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,F.createElement(rn,{type:"source",position:r,isConnectable:t}));Ra.displayName="DefaultNode";var xs=E.memo(Ra);const $a=({data:e,isConnectable:t,sourcePosition:n=J.Bottom})=>F.createElement(F.Fragment,null,e==null?void 0:e.label,F.createElement(rn,{type:"source",position:n,isConnectable:t}));$a.displayName="InputNode";var za=E.memo($a);const Ha=({data:e,isConnectable:t,targetPosition:n=J.Top})=>F.createElement(F.Fragment,null,F.createElement(rn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ha.displayName="OutputNode";var Va=E.memo(Ha);const eo=()=>null;eo.displayName="GroupNode";const Ph=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),qn=e=>e.id;function Bh(e,t){return $e(e.selectedNodes.map(qn),t.selectedNodes.map(qn))&&$e(e.selectedEdges.map(qn),t.selectedEdges.map(qn))}const Pa=E.memo(({onSelectionChange:e})=>{const t=Ce(),{selectedNodes:n,selectedEdges:r}=me(Ph,Bh);return E.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChange.forEach(a=>a(s))},[n,r,e]),null});Pa.displayName="SelectionListener";const Oh=e=>!!e.onSelectionChange;function Fh({onSelectionChange:e}){const t=me(Oh);return e||t?F.createElement(Pa,{onSelectionChange:e}):null}const Wh=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Bt(e,t){E.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function se(e,t,n){E.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Gh=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:u,onClickConnectEnd:l,nodesDraggable:f,nodesConnectable:g,nodesFocusable:y,edgesFocusable:v,edgesUpdatable:w,elevateNodesOnSelect:A,minZoom:C,maxZoom:I,nodeExtent:M,onNodesChange:L,onEdgesChange:$,elementsSelectable:o,connectionMode:c,snapGrid:d,snapToGrid:m,translateExtent:b,connectOnClick:k,defaultEdgeOptions:x,fitView:j,fitViewOptions:H,onNodesDelete:N,onEdgesDelete:_,onNodeDrag:S,onNodeDragStart:h,onNodeDragStop:T,onSelectionDrag:z,onSelectionDragStart:D,onSelectionDragStop:V,noPanClassName:R,nodeOrigin:P,rfId:O,autoPanOnConnect:W,autoPanOnNodeDrag:X,onError:ee,connectionRadius:q,isValidConnection:U,nodeDragThreshold:ne})=>{const{setNodes:re,setEdges:ue,setDefaultNodesAndEdges:Ee,setMinZoom:Ae,setMaxZoom:ye,setTranslateExtent:De,setNodeExtent:ie,reset:Me}=me(Wh,$e),Q=Ce();return E.useEffect(()=>{const Ze=r==null?void 0:r.map(ct=>({...ct,...x}));return Ee(n,Ze),()=>{Me()}},[]),se("defaultEdgeOptions",x,Q.setState),se("connectionMode",c,Q.setState),se("onConnect",s,Q.setState),se("onConnectStart",a,Q.setState),se("onConnectEnd",i,Q.setState),se("onClickConnectStart",u,Q.setState),se("onClickConnectEnd",l,Q.setState),se("nodesDraggable",f,Q.setState),se("nodesConnectable",g,Q.setState),se("nodesFocusable",y,Q.setState),se("edgesFocusable",v,Q.setState),se("edgesUpdatable",w,Q.setState),se("elementsSelectable",o,Q.setState),se("elevateNodesOnSelect",A,Q.setState),se("snapToGrid",m,Q.setState),se("snapGrid",d,Q.setState),se("onNodesChange",L,Q.setState),se("onEdgesChange",$,Q.setState),se("connectOnClick",k,Q.setState),se("fitViewOnInit",j,Q.setState),se("fitViewOnInitOptions",H,Q.setState),se("onNodesDelete",N,Q.setState),se("onEdgesDelete",_,Q.setState),se("onNodeDrag",S,Q.setState),se("onNodeDragStart",h,Q.setState),se("onNodeDragStop",T,Q.setState),se("onSelectionDrag",z,Q.setState),se("onSelectionDragStart",D,Q.setState),se("onSelectionDragStop",V,Q.setState),se("noPanClassName",R,Q.setState),se("nodeOrigin",P,Q.setState),se("rfId",O,Q.setState),se("autoPanOnConnect",W,Q.setState),se("autoPanOnNodeDrag",X,Q.setState),se("onError",ee,Q.setState),se("connectionRadius",q,Q.setState),se("isValidConnection",U,Q.setState),se("nodeDragThreshold",ne,Q.setState),Bt(e,re),Bt(t,ue),Bt(C,Ae),Bt(I,ye),Bt(b,De),Bt(M,ie),null},Oo={display:"none"},Uh={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ba="react-flow__node-desc",Oa="react-flow__edge-desc",qh="react-flow__aria-live",Kh=e=>e.ariaLiveMessage;function Xh({rfId:e}){const t=me(Kh);return F.createElement("div",{id:`${qh}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Uh},t)}function Yh({rfId:e,disableKeyboardA11y:t}){return F.createElement(F.Fragment,null,F.createElement("div",{id:`${Ba}-${e}`,style:Oo},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),F.createElement("div",{id:`${Oa}-${e}`,style:Oo},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&F.createElement(Xh,{rfId:e}))}var Mn=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=E.useState(!1),s=E.useRef(!1),a=E.useRef(new Set([])),[i,u]=E.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.split("+")),g=f.reduce((y,v)=>y.concat(...v),[]);return[f,g]}return[[],[]]},[e]);return E.useEffect(()=>{const l=typeof document<"u"?document:null,f=(t==null?void 0:t.target)||l;if(e!==null){const g=w=>{if(s.current=w.ctrlKey||w.metaKey||w.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&bs(w))return!1;const C=Wo(w.code,u);a.current.add(w[C]),Fo(i,a.current,!1)&&(w.preventDefault(),r(!0))},y=w=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&bs(w))return!1;const C=Wo(w.code,u);Fo(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(w[C]),w.key==="Meta"&&a.current.clear(),s.current=!1},v=()=>{a.current.clear(),r(!1)};return f==null||f.addEventListener("keydown",g),f==null||f.addEventListener("keyup",y),window.addEventListener("blur",v),()=>{f==null||f.removeEventListener("keydown",g),f==null||f.removeEventListener("keyup",y),window.removeEventListener("blur",v)}}},[e,r]),n};function Fo(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function Wo(e,t){return t.includes(e)?"code":"key"}function Fa(e,t,n,r){var i,u;if(!e.parentNode)return n;const s=t.get(e.parentNode),a=Yt(s,r);return Fa(s,t,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(((i=s[_e])==null?void 0:i.z)??0)>(n.z??0)?((u=s[_e])==null?void 0:u.z)??0:n.z??0},r)}function Wa(e,t,n){e.forEach(r=>{var s;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:a,y:i,z:u}=Fa(r,e,{...r.position,z:((s=r[_e])==null?void 0:s.z)??0},t);r.positionAbsolute={x:a,y:i},r[_e].z=u,n!=null&&n[r.id]&&(r[_e].isParent=!0)}})}function Yr(e,t,n,r){const s=new Map,a={},i=r?1e3:0;return e.forEach(u=>{var v;const l=(Fe(u.zIndex)?u.zIndex:0)+(u.selected?i:0),f=t.get(u.id),g={...u,positionAbsolute:{x:u.position.x,y:u.position.y}};u.parentNode&&(a[u.parentNode]=!0);const y=(f==null?void 0:f.type)&&(f==null?void 0:f.type)!==u.type;Object.defineProperty(g,_e,{enumerable:!1,value:{handleBounds:y||(v=f==null?void 0:f[_e])==null?void 0:v.handleBounds,z:l}}),s.set(u.id,g)}),Wa(s,n,a),s}function Ga(e,t={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:i,d3Zoom:u,d3Selection:l,fitViewOnInitDone:f,fitViewOnInit:g,nodeOrigin:y}=e(),v=t.initial&&!f&&g;if(u&&l&&(v||!t.initial)){const A=n().filter(I=>{var L;const M=t.includeHiddenNodes?I.width&&I.height:!I.hidden;return(L=t.nodes)!=null&&L.length?M&&t.nodes.some($=>$.id===I.id):M}),C=A.every(I=>I.width&&I.height);if(A.length>0&&C){const I=Js(A,y),{x:M,y:L,zoom:$}=Aa(I,r,s,t.minZoom??a,t.maxZoom??i,t.padding??.1),o=Et.translate(M,L).scale($);return typeof t.duration=="number"&&t.duration>0?u.transform(Dt(l,t.duration),o):u.transform(l,o),!0}}return!1}function Zh(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[_e]:r[_e],selected:n.selected})}),new Map(t)}function Jh(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Kn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:u,hasDefaultNodes:l,hasDefaultEdges:f}=n();e!=null&&e.length&&(l&&r({nodeInternals:Zh(e,s)}),i==null||i(e)),t!=null&&t.length&&(f&&r({edges:Jh(t,a)}),u==null||u(t))}const Ot=()=>{},Qh={zoomIn:Ot,zoomOut:Ot,zoomTo:Ot,getZoom:()=>1,setViewport:Ot,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ot,fitBounds:Ot,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ep=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),tp=()=>{const e=Ce(),{d3Zoom:t,d3Selection:n}=me(ep,$e);return E.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(Dt(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(Dt(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>t.scaleTo(Dt(n,a==null?void 0:a.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,a)=>{const[i,u,l]=e.getState().transform,f=Et.translate(s.x??i,s.y??u).scale(s.zoom??l);t.transform(Dt(n,a==null?void 0:a.duration),f)},getViewport:()=>{const[s,a,i]=e.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>Ga(e.getState,s),setCenter:(s,a,i)=>{const{width:u,height:l,maxZoom:f}=e.getState(),g=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:f,y=u/2-s*g,v=l/2-a*g,w=Et.translate(y,v).scale(g);t.transform(Dt(n,i==null?void 0:i.duration),w)},fitBounds:(s,a)=>{const{width:i,height:u,minZoom:l,maxZoom:f}=e.getState(),{x:g,y,zoom:v}=Aa(s,i,u,l,f,(a==null?void 0:a.padding)??.1),w=Et.translate(g,y).scale(v);t.transform(Dt(n,a==null?void 0:a.duration),w)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:u}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),vs(s,a,i,u)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:u,domNode:l}=e.getState();if(!l)return s;const{x:f,y:g}=l.getBoundingClientRect(),y={x:s.x-f,y:s.y-g};return vs(y,a,i,u)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=e.getState();if(!i)return s;const{x:u,y:l}=i.getBoundingClientRect(),f=Ma(s,a);return{x:f.x+u,y:f.y+l}},viewportInitialized:!0}:Qh,[t,n])};function Ua(){const e=tp(),t=Ce(),n=E.useCallback(()=>t.getState().getNodes().map(C=>({...C})),[]),r=E.useCallback(C=>t.getState().nodeInternals.get(C),[]),s=E.useCallback(()=>{const{edges:C=[]}=t.getState();return C.map(I=>({...I}))},[]),a=E.useCallback(C=>{const{edges:I=[]}=t.getState();return I.find(M=>M.id===C)},[]),i=E.useCallback(C=>{const{getNodes:I,setNodes:M,hasDefaultNodes:L,onNodesChange:$}=t.getState(),o=I(),c=typeof C=="function"?C(o):C;if(L)M(c);else if($){const d=c.length===0?o.map(m=>({type:"remove",id:m.id})):c.map(m=>({item:m,type:"reset"}));$(d)}},[]),u=E.useCallback(C=>{const{edges:I=[],setEdges:M,hasDefaultEdges:L,onEdgesChange:$}=t.getState(),o=typeof C=="function"?C(I):C;if(L)M(o);else if($){const c=o.length===0?I.map(d=>({type:"remove",id:d.id})):o.map(d=>({item:d,type:"reset"}));$(c)}},[]),l=E.useCallback(C=>{const I=Array.isArray(C)?C:[C],{getNodes:M,setNodes:L,hasDefaultNodes:$,onNodesChange:o}=t.getState();if($){const d=[...M(),...I];L(d)}else if(o){const c=I.map(d=>({item:d,type:"add"}));o(c)}},[]),f=E.useCallback(C=>{const I=Array.isArray(C)?C:[C],{edges:M=[],setEdges:L,hasDefaultEdges:$,onEdgesChange:o}=t.getState();if($)L([...M,...I]);else if(o){const c=I.map(d=>({item:d,type:"add"}));o(c)}},[]),g=E.useCallback(()=>{const{getNodes:C,edges:I=[],transform:M}=t.getState(),[L,$,o]=M;return{nodes:C().map(c=>({...c})),edges:I.map(c=>({...c})),viewport:{x:L,y:$,zoom:o}}},[]),y=E.useCallback(({nodes:C,edges:I})=>{const{nodeInternals:M,getNodes:L,edges:$,hasDefaultNodes:o,hasDefaultEdges:c,onNodesDelete:d,onEdgesDelete:m,onNodesChange:b,onEdgesChange:k}=t.getState(),x=(C||[]).map(S=>S.id),j=(I||[]).map(S=>S.id),H=L().reduce((S,h)=>{const T=!x.includes(h.id)&&h.parentNode&&S.find(D=>D.id===h.parentNode);return(typeof h.deletable=="boolean"?h.deletable:!0)&&(x.includes(h.id)||T)&&S.push(h),S},[]),N=$.filter(S=>typeof S.deletable=="boolean"?S.deletable:!0),_=N.filter(S=>j.includes(S.id));if(H||_){const S=Ta(H,N),h=[..._,...S],T=h.reduce((z,D)=>(z.includes(D.id)||z.push(D.id),z),[]);if((c||o)&&(c&&t.setState({edges:$.filter(z=>!T.includes(z.id))}),o&&(H.forEach(z=>{M.delete(z.id)}),t.setState({nodeInternals:new Map(M)}))),T.length>0&&(m==null||m(h),k&&k(T.map(z=>({id:z,type:"remove"})))),H.length>0&&(d==null||d(H),b)){const z=H.map(D=>({id:D.id,type:"remove"}));b(z)}}},[]),v=E.useCallback(C=>{const I=vh(C),M=I?null:t.getState().nodeInternals.get(C.id);return!I&&!M?[null,null,I]:[I?C:Ro(M),M,I]},[]),w=E.useCallback((C,I=!0,M)=>{const[L,$,o]=v(C);return L?(M||t.getState().getNodes()).filter(c=>{if(!o&&(c.id===$.id||!c.positionAbsolute))return!1;const d=Ro(c),m=ys(d,L);return I&&m>0||m>=L.width*L.height}):[]},[]),A=E.useCallback((C,I,M=!0)=>{const[L]=v(C);if(!L)return!1;const $=ys(L,I);return M&&$>0||$>=L.width*L.height},[]);return E.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:i,setEdges:u,addNodes:l,addEdges:f,toObject:g,deleteElements:y,getIntersectingNodes:w,isNodeIntersecting:A}),[e,n,r,s,a,i,u,l,f,g,y,w,A])}const np={actInsideInputWithModifier:!1};var rp=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ce(),{deleteElements:r}=Ua(),s=Mn(e,np),a=Mn(t);E.useEffect(()=>{if(s){const{edges:i,getNodes:u}=n.getState(),l=u().filter(g=>g.selected),f=i.filter(g=>g.selected);r({nodes:l,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),E.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function sp(e){const t=Ce();E.useEffect(()=>{let n;const r=()=>{var a,i;if(!e.current)return;const s=Us(e.current);(s.height===0||s.width===0)&&((i=(a=t.getState()).onError)==null||i.call(a,"004",yt.error004())),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const to={position:"absolute",width:"100%",height:"100%",top:0,left:0},op=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Xn=e=>({x:e.x,y:e.y,zoom:e.k}),Ft=(e,t)=>e.target.closest(`.${t}`),Go=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Uo=e=>{const t=e.ctrlKey&&lr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},ip=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ap=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:u=.5,panOnScrollMode:l=Rt.Free,zoomOnDoubleClick:f=!0,elementsSelectable:g,panOnDrag:y=!0,defaultViewport:v,translateExtent:w,minZoom:A,maxZoom:C,zoomActivationKeyCode:I,preventScrolling:M=!0,children:L,noWheelClassName:$,noPanClassName:o})=>{const c=E.useRef(),d=Ce(),m=E.useRef(!1),b=E.useRef(!1),k=E.useRef(null),x=E.useRef({x:0,y:0,zoom:0}),{d3Zoom:j,d3Selection:H,d3ZoomHandler:N,userSelectionActive:_}=me(ip,$e),S=Mn(I),h=E.useRef(0),T=E.useRef(!1),z=E.useRef();return sp(k),E.useEffect(()=>{if(k.current){const D=k.current.getBoundingClientRect(),V=ph().scaleExtent([A,C]).translateExtent(w),R=qe(k.current).call(V),P=Et.translate(v.x,v.y).scale(nn(v.zoom,A,C)),O=[[0,0],[D.width,D.height]],W=V.constrain()(P,O,w);V.transform(R,W),V.wheelDelta(Uo),d.setState({d3Zoom:V,d3Selection:R,d3ZoomHandler:R.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:k.current.closest(".react-flow")})}},[]),E.useEffect(()=>{H&&j&&(i&&!S&&!_?H.on("wheel.zoom",D=>{if(Ft(D,$))return!1;D.preventDefault(),D.stopImmediatePropagation();const V=H.property("__zoom").k||1,R=lr();if(D.ctrlKey&&a&&R){const ne=ot(D),re=Uo(D),ue=V*Math.pow(2,re);j.scaleTo(H,ue,ne,D);return}const P=D.deltaMode===1?20:1;let O=l===Rt.Vertical?0:D.deltaX*P,W=l===Rt.Horizontal?0:D.deltaY*P;!R&&D.shiftKey&&l!==Rt.Vertical&&(O=D.deltaY*P,W=0),j.translateBy(H,-(O/V)*u,-(W/V)*u,{internal:!0});const X=Xn(H.property("__zoom")),{onViewportChangeStart:ee,onViewportChange:q,onViewportChangeEnd:U}=d.getState();clearTimeout(z.current),T.current||(T.current=!0,t==null||t(D,X),ee==null||ee(X)),T.current&&(e==null||e(D,X),q==null||q(X),z.current=setTimeout(()=>{n==null||n(D,X),U==null||U(X),T.current=!1},150))},{passive:!1}):typeof N<"u"&&H.on("wheel.zoom",function(D,V){if(!M||Ft(D,$))return null;D.preventDefault(),N.call(this,D,V)},{passive:!1}))},[_,i,l,H,j,N,S,a,M,$,t,e,n]),E.useEffect(()=>{j&&j.on("start",D=>{var P,O;if(!D.sourceEvent||D.sourceEvent.internal)return null;h.current=(P=D.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:V}=d.getState(),R=Xn(D.transform);m.current=!0,x.current=R,((O=D.sourceEvent)==null?void 0:O.type)==="mousedown"&&d.setState({paneDragging:!0}),V==null||V(R),t==null||t(D.sourceEvent,R)})},[j,t]),E.useEffect(()=>{j&&(_&&!m.current?j.on("zoom",null):_||j.on("zoom",D=>{var R;const{onViewportChange:V}=d.getState();if(d.setState({transform:[D.transform.x,D.transform.y,D.transform.k]}),b.current=!!(r&&Go(y,h.current??0)),(e||V)&&!((R=D.sourceEvent)!=null&&R.internal)){const P=Xn(D.transform);V==null||V(P),e==null||e(D.sourceEvent,P)}}))},[_,j,e,y,r]),E.useEffect(()=>{j&&j.on("end",D=>{if(!D.sourceEvent||D.sourceEvent.internal)return null;const{onViewportChangeEnd:V}=d.getState();if(m.current=!1,d.setState({paneDragging:!1}),r&&Go(y,h.current??0)&&!b.current&&r(D.sourceEvent),b.current=!1,(n||V)&&op(x.current,D.transform)){const R=Xn(D.transform);x.current=R,clearTimeout(c.current),c.current=setTimeout(()=>{V==null||V(R),n==null||n(D.sourceEvent,R)},i?150:0)}})},[j,i,y,n,r]),E.useEffect(()=>{j&&j.filter(D=>{const V=S||s,R=a&&D.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&D.button===1&&D.type==="mousedown"&&(Ft(D,"react-flow__node")||Ft(D,"react-flow__edge")))return!0;if(!y&&!V&&!i&&!f&&!a||_||!f&&D.type==="dblclick"||Ft(D,$)&&D.type==="wheel"||Ft(D,o)&&(D.type!=="wheel"||i&&D.type==="wheel"&&!S)||!a&&D.ctrlKey&&D.type==="wheel"||!V&&!i&&!R&&D.type==="wheel"||!y&&(D.type==="mousedown"||D.type==="touchstart")||Array.isArray(y)&&!y.includes(D.button)&&(D.type==="mousedown"||D.type==="touchstart"))return!1;const P=Array.isArray(y)&&y.includes(D.button)||!D.button||D.button<=1;return(!D.ctrlKey||D.type==="wheel")&&P})},[_,j,s,a,i,f,y,g,S]),F.createElement("div",{className:"react-flow__renderer",ref:k,style:to},L)},up=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function dp(){const{userSelectionActive:e,userSelectionRect:t}=me(up,$e);return e&&t?F.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function qo(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(r>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),s>0&&(n.style.height+=s),t.position.x<0){const a=Math.abs(t.position.x);n.position.x=n.position.x-a,n.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);n.position.y=n.position.y-a,n.style.height+=a,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function qa(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const a=e.filter(u=>u.id===s.id);if(a.length===0)return r.push(s),r;const i={...s};for(const u of a)if(u)switch(u.type){case"select":{i.selected=u.selected;break}case"position":{typeof u.position<"u"&&(i.position=u.position),typeof u.positionAbsolute<"u"&&(i.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(i.dragging=u.dragging),i.expandParent&&qo(r,i);break}case"dimensions":{typeof u.dimensions<"u"&&(i.width=u.dimensions.width,i.height=u.dimensions.height),typeof u.updateStyle<"u"&&(i.style={...i.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(i.resizing=u.resizing),i.expandParent&&qo(r,i);break}case"remove":return r}return r.push(i),r},n)}function Ka(e,t){return qa(e,t)}function cp(e,t){return qa(e,t)}const kt=(e,t)=>({id:e,type:"select",selected:t});function Gt(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(kt(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(kt(r.id,!1))),n},[])}const Zr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},lp=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Xa=E.memo(({isSelecting:e,selectionMode:t=En.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:u,onPaneMouseEnter:l,onPaneMouseMove:f,onPaneMouseLeave:g,children:y})=>{const v=E.useRef(null),w=Ce(),A=E.useRef(0),C=E.useRef(0),I=E.useRef(),{userSelectionActive:M,elementsSelectable:L,dragging:$}=me(lp,$e),o=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),A.current=0,C.current=0},c=N=>{a==null||a(N),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},d=N=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){N.preventDefault();return}i==null||i(N)},m=u?N=>u(N):void 0,b=N=>{const{resetSelectedElements:_,domNode:S}=w.getState();if(I.current=S==null?void 0:S.getBoundingClientRect(),!L||!e||N.button!==0||N.target!==v.current||!I.current)return;const{x:h,y:T}=Mt(N,I.current);_(),w.setState({userSelectionRect:{width:0,height:0,startX:h,startY:T,x:h,y:T}}),r==null||r(N)},k=N=>{const{userSelectionRect:_,nodeInternals:S,edges:h,transform:T,onNodesChange:z,onEdgesChange:D,nodeOrigin:V,getNodes:R}=w.getState();if(!e||!I.current||!_)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=Mt(N,I.current),O=_.startX??0,W=_.startY??0,X={..._,x:P.x<O?P.x:O,y:P.y<W?P.y:W,width:Math.abs(P.x-O),height:Math.abs(P.y-W)},ee=R(),q=ja(S,X,T,t===En.Partial,!0,V),U=Ta(q,h).map(re=>re.id),ne=q.map(re=>re.id);if(A.current!==ne.length){A.current=ne.length;const re=Gt(ee,ne);re.length&&(z==null||z(re))}if(C.current!==U.length){C.current=U.length;const re=Gt(h,U);re.length&&(D==null||D(re))}w.setState({userSelectionRect:X})},x=N=>{if(N.button!==0)return;const{userSelectionRect:_}=w.getState();!M&&_&&N.target===v.current&&(c==null||c(N)),w.setState({nodesSelectionActive:A.current>0}),o(),s==null||s(N)},j=N=>{M&&(w.setState({nodesSelectionActive:A.current>0}),s==null||s(N)),o()},H=L&&(e||M);return F.createElement("div",{className:Ge(["react-flow__pane",{dragging:$,selection:e}]),onClick:H?void 0:Zr(c,v),onContextMenu:Zr(d,v),onWheel:Zr(m,v),onMouseEnter:H?void 0:l,onMouseDown:H?b:void 0,onMouseMove:H?k:f,onMouseUp:H?x:void 0,onMouseLeave:H?j:g,ref:v,style:to},y,F.createElement(dp,null))});Xa.displayName="Pane";function Ya(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Ya(n,t):!1}function Ko(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function fp(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||!Ya(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode,width:s.width,height:s.height,expandParent:s.expandParent}})}function hp(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Za(e,t,n,r,s=[0,0],a){const i=hp(e,e.extent||r);let u=i;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const g=n.get(e.parentNode),{x:y,y:v}=Yt(g,s).positionAbsolute;u=g&&Fe(y)&&Fe(v)&&Fe(g.width)&&Fe(g.height)?[[y+e.width*s[0],v+e.height*s[1]],[y+g.width-e.width+e.width*s[0],v+g.height-e.height+e.height*s[1]]]:u}else a==null||a("005",yt.error005()),u=i;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const g=n.get(e.parentNode),{x:y,y:v}=Yt(g,s).positionAbsolute;u=[[e.extent[0][0]+y,e.extent[0][1]+v],[e.extent[1][0]+y,e.extent[1][1]+v]]}let l={x:0,y:0};if(e.parentNode){const g=n.get(e.parentNode);l=Yt(g,s).positionAbsolute}const f=u&&u!=="parent"?qs(t,u):t;return{position:{x:f.x-l.x,y:f.y-l.y},positionAbsolute:f}}function Jr({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const Xo=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const a=Array.from(s),i=t.getBoundingClientRect(),u={x:i.width*r[0],y:i.height*r[1]};return a.map(l=>{const f=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(f.left-i.left-u.x)/n,y:(f.top-i.top-u.y)/n,...Us(l)}})};function gn(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function ks({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:u,onError:l}=t.getState(),f=u.get(e);if(!f){l==null||l("012",yt.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&i)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var g;return(g=r==null?void 0:r.current)==null?void 0:g.blur()})):s([e])}function pp(){const e=Ce();return E.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(u-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function Qr(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Ja({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const u=Ce(),[l,f]=E.useState(!1),g=E.useRef([]),y=E.useRef({x:null,y:null}),v=E.useRef(0),w=E.useRef(null),A=E.useRef({x:0,y:0}),C=E.useRef(null),I=E.useRef(!1),M=E.useRef(!1),L=pp();return E.useEffect(()=>{if(e!=null&&e.current){const $=qe(e.current),o=({x:m,y:b})=>{const{nodeInternals:k,onNodeDrag:x,onSelectionDrag:j,updateNodePositions:H,nodeExtent:N,snapGrid:_,snapToGrid:S,nodeOrigin:h,onError:T}=u.getState();y.current={x:m,y:b};let z=!1,D={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&N){const R=Js(g.current,h);D=Cn(R)}if(g.current=g.current.map(R=>{const P={x:m-R.distance.x,y:b-R.distance.y};S&&(P.x=_[0]*Math.round(P.x/_[0]),P.y=_[1]*Math.round(P.y/_[1]));const O=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];g.current.length>1&&N&&!R.extent&&(O[0][0]=R.positionAbsolute.x-D.x+N[0][0],O[1][0]=R.positionAbsolute.x+(R.width??0)-D.x2+N[1][0],O[0][1]=R.positionAbsolute.y-D.y+N[0][1],O[1][1]=R.positionAbsolute.y+(R.height??0)-D.y2+N[1][1]);const W=Za(R,P,k,O,h,T);return z=z||R.position.x!==W.position.x||R.position.y!==W.position.y,R.position=W.position,R.positionAbsolute=W.positionAbsolute,R}),!z)return;H(g.current,!0,!0),f(!0);const V=s?x:Qr(j);if(V&&C.current){const[R,P]=Jr({nodeId:s,dragItems:g.current,nodeInternals:k});V(C.current,R,P)}},c=()=>{if(!w.current)return;const[m,b]=ya(A.current,w.current);if(m!==0||b!==0){const{transform:k,panBy:x}=u.getState();y.current.x=(y.current.x??0)-m/k[2],y.current.y=(y.current.y??0)-b/k[2],x({x:m,y:b})&&o(y.current)}v.current=requestAnimationFrame(c)},d=m=>{var h;const{nodeInternals:b,multiSelectionActive:k,nodesDraggable:x,unselectNodesAndEdges:j,onNodeDragStart:H,onSelectionDragStart:N}=u.getState();M.current=!0;const _=s?H:Qr(N);(!i||!a)&&!k&&s&&((h=b.get(s))!=null&&h.selected||j()),s&&a&&i&&ks({id:s,store:u,nodeRef:e});const S=L(m);if(y.current=S,g.current=fp(b,x,S,s),_&&g.current){const[T,z]=Jr({nodeId:s,dragItems:g.current,nodeInternals:b});_(m.sourceEvent,T,z)}};if(t)$.on(".drag",null);else{const m=Bl().on("start",b=>{const{domNode:k,nodeDragThreshold:x}=u.getState();x===0&&d(b);const j=L(b);y.current=j,w.current=(k==null?void 0:k.getBoundingClientRect())||null,A.current=Mt(b.sourceEvent,w.current)}).on("drag",b=>{var H,N;const k=L(b),{autoPanOnNodeDrag:x,nodeDragThreshold:j}=u.getState();if(!I.current&&M.current&&x&&(I.current=!0,c()),!M.current){const _=k.xSnapped-(((H=y==null?void 0:y.current)==null?void 0:H.x)??0),S=k.ySnapped-(((N=y==null?void 0:y.current)==null?void 0:N.y)??0);Math.sqrt(_*_+S*S)>j&&d(b)}(y.current.x!==k.xSnapped||y.current.y!==k.ySnapped)&&g.current&&M.current&&(C.current=b.sourceEvent,A.current=Mt(b.sourceEvent,w.current),o(k))}).on("end",b=>{if(M.current&&(f(!1),I.current=!1,M.current=!1,cancelAnimationFrame(v.current),g.current)){const{updateNodePositions:k,nodeInternals:x,onNodeDragStop:j,onSelectionDragStop:H}=u.getState(),N=s?j:Qr(H);if(k(g.current,!1,!1),N){const[_,S]=Jr({nodeId:s,dragItems:g.current,nodeInternals:x});N(b.sourceEvent,_,S)}}}).filter(b=>{const k=b.target;return!b.button&&(!n||!Ko(k,`.${n}`,e))&&(!r||Ko(k,r,e))});return $.call(m),()=>{$.on(".drag",null)}}}},[e,t,n,r,a,u,s,i,L]),l}function Qa(){const e=Ce();return E.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:u,snapGrid:l,onError:f,nodesDraggable:g}=e.getState(),y=i().filter(L=>L.selected&&(L.draggable||g&&typeof L.draggable>"u")),v=u?l[0]:5,w=u?l[1]:5,A=n.isShiftPressed?4:1,C=n.x*v*A,I=n.y*w*A,M=y.map(L=>{if(L.positionAbsolute){const $={x:L.positionAbsolute.x+C,y:L.positionAbsolute.y+I};u&&($.x=l[0]*Math.round($.x/l[0]),$.y=l[1]*Math.round($.y/l[1]));const{positionAbsolute:o,position:c}=Za(L,$,r,s,void 0,f);L.position=c,L.positionAbsolute=o}return L});a(M,!0,!1)},[])}const Zt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var mn=e=>{const t=({id:n,type:r,data:s,xPos:a,yPos:i,xPosOrigin:u,yPosOrigin:l,selected:f,onClick:g,onMouseEnter:y,onMouseMove:v,onMouseLeave:w,onContextMenu:A,onDoubleClick:C,style:I,className:M,isDraggable:L,isSelectable:$,isConnectable:o,isFocusable:c,selectNodesOnDrag:d,sourcePosition:m,targetPosition:b,hidden:k,resizeObserver:x,dragHandle:j,zIndex:H,isParent:N,noDragClassName:_,noPanClassName:S,initialized:h,disableKeyboardA11y:T,ariaLabel:z,rfId:D,hasHandleBounds:V})=>{const R=Ce(),P=E.useRef(null),O=E.useRef(m),W=E.useRef(b),X=E.useRef(r),ee=$||L||g||y||v||w,q=Qa(),U=gn(n,R.getState,y),ne=gn(n,R.getState,v),re=gn(n,R.getState,w),ue=gn(n,R.getState,A),Ee=gn(n,R.getState,C),Ae=ie=>{const{nodeDragThreshold:Me}=R.getState();if($&&(!d||!L||Me>0)&&ks({id:n,store:R,nodeRef:P}),g){const Q=R.getState().nodeInternals.get(n);Q&&g(ie,{...Q})}},ye=ie=>{if(!bs(ie))if(va.includes(ie.key)&&$){const Me=ie.key==="Escape";ks({id:n,store:R,unselect:Me,nodeRef:P})}else!T&&L&&f&&Object.prototype.hasOwnProperty.call(Zt,ie.key)&&(R.setState({ariaLiveMessage:`Moved selected node ${ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),q({x:Zt[ie.key].x,y:Zt[ie.key].y,isShiftPressed:ie.shiftKey}))};E.useEffect(()=>()=>{P.current&&(x==null||x.unobserve(P.current))},[]),E.useEffect(()=>{if(P.current&&!k){const ie=P.current;(!h||!V)&&(x==null||x.unobserve(ie),x==null||x.observe(ie))}},[k,h,V]),E.useEffect(()=>{const ie=X.current!==r,Me=O.current!==m,Q=W.current!==b;P.current&&(ie||Me||Q)&&(ie&&(X.current=r),Me&&(O.current=m),Q&&(W.current=b),R.getState().updateNodeDimensions([{id:n,nodeElement:P.current,forceUpdate:!0}]))},[n,r,m,b]);const De=Ja({nodeRef:P,disabled:k||!L,noDragClassName:_,handleSelector:j,nodeId:n,isSelectable:$,selectNodesOnDrag:d});return k?null:F.createElement("div",{className:Ge(["react-flow__node",`react-flow__node-${r}`,{[S]:L},M,{selected:f,selectable:$,parent:N,dragging:De}]),ref:P,style:{zIndex:H,transform:`translate(${u}px,${l}px)`,pointerEvents:ee?"all":"none",visibility:h?"visible":"hidden",...I},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:U,onMouseMove:ne,onMouseLeave:re,onContextMenu:ue,onClick:Ae,onDoubleClick:Ee,onKeyDown:c?ye:void 0,tabIndex:c?0:void 0,role:c?"button":void 0,"aria-describedby":T?void 0:`${Ba}-${D}`,"aria-label":z},F.createElement(jh,{value:n},F.createElement(e,{id:n,data:s,type:r,xPos:a,yPos:i,selected:f,isConnectable:o,sourcePosition:m,targetPosition:b,dragging:De,dragHandle:j,zIndex:H})))};return t.displayName="NodeWrapper",E.memo(t)};const gp=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Js(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function mp({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ce(),{width:s,height:a,x:i,y:u,transformString:l,userSelectionActive:f}=me(gp,$e),g=Qa(),y=E.useRef(null);if(E.useEffect(()=>{var A;n||(A=y.current)==null||A.focus({preventScroll:!0})},[n]),Ja({nodeRef:y}),f||!s||!a)return null;const v=e?A=>{const C=r.getState().getNodes().filter(I=>I.selected);e(A,C)}:void 0,w=A=>{Object.prototype.hasOwnProperty.call(Zt,A.key)&&g({x:Zt[A.key].x,y:Zt[A.key].y,isShiftPressed:A.shiftKey})};return F.createElement("div",{className:Ge(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},F.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:n?void 0:-1,onKeyDown:n?void 0:w,style:{width:s,height:a,top:u,left:i}}))}var yp=E.memo(mp);const bp=e=>e.nodesSelectionActive,eu=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:u,onMove:l,onMoveStart:f,onMoveEnd:g,selectionKeyCode:y,selectionOnDrag:v,selectionMode:w,onSelectionStart:A,onSelectionEnd:C,multiSelectionKeyCode:I,panActivationKeyCode:M,zoomActivationKeyCode:L,elementsSelectable:$,zoomOnScroll:o,zoomOnPinch:c,panOnScroll:d,panOnScrollSpeed:m,panOnScrollMode:b,zoomOnDoubleClick:k,panOnDrag:x,defaultViewport:j,translateExtent:H,minZoom:N,maxZoom:_,preventScrolling:S,onSelectionContextMenu:h,noWheelClassName:T,noPanClassName:z,disableKeyboardA11y:D})=>{const V=me(bp),R=Mn(y),P=Mn(M),O=P||x,W=P||d,X=R||v&&O!==!0;return rp({deleteKeyCode:u,multiSelectionKeyCode:I}),F.createElement(ap,{onMove:l,onMoveStart:f,onMoveEnd:g,onPaneContextMenu:a,elementsSelectable:$,zoomOnScroll:o,zoomOnPinch:c,panOnScroll:W,panOnScrollSpeed:m,panOnScrollMode:b,zoomOnDoubleClick:k,panOnDrag:!R&&O,defaultViewport:j,translateExtent:H,minZoom:N,maxZoom:_,zoomActivationKeyCode:L,preventScrolling:S,noWheelClassName:T,noPanClassName:z},F.createElement(Xa,{onSelectionStart:A,onSelectionEnd:C,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:O,isSelecting:!!X,selectionMode:w},e,V&&F.createElement(yp,{onSelectionContextMenu:h,noPanClassName:z,disableKeyboardA11y:D})))};eu.displayName="FlowRenderer";var wp=E.memo(eu);function _p(e){return me(E.useCallback(n=>e?ja(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function vp(e){const t={input:mn(e.input||za),default:mn(e.default||xs),output:mn(e.output||Va),group:mn(e.group||eo)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=mn(e[a]||xs),s),n);return{...t,...r}}const xp=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},kp=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),tu=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:i}=me(kp,$e),u=_p(e.onlyRenderVisibleElements),l=E.useRef(),f=E.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(y=>{const v=y.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));a(v)});return l.current=g,g},[]);return E.useEffect(()=>()=>{var g;(g=l==null?void 0:l.current)==null||g.disconnect()},[]),F.createElement("div",{className:"react-flow__nodes",style:to},u.map(g=>{var c,d,m;let y=g.type||"default";e.nodeTypes[y]||(i==null||i("003",yt.error003(y)),y="default");const v=e.nodeTypes[y]||e.nodeTypes.default,w=!!(g.draggable||t&&typeof g.draggable>"u"),A=!!(g.selectable||s&&typeof g.selectable>"u"),C=!!(g.connectable||n&&typeof g.connectable>"u"),I=!!(g.focusable||r&&typeof g.focusable>"u"),M=e.nodeExtent?qs(g.positionAbsolute,e.nodeExtent):g.positionAbsolute,L=(M==null?void 0:M.x)??0,$=(M==null?void 0:M.y)??0,o=xp({x:L,y:$,width:g.width??0,height:g.height??0,origin:e.nodeOrigin});return F.createElement(v,{key:g.id,id:g.id,className:g.className,style:g.style,type:y,data:g.data,sourcePosition:g.sourcePosition||J.Bottom,targetPosition:g.targetPosition||J.Top,hidden:g.hidden,xPos:L,yPos:$,xPosOrigin:o.x,yPosOrigin:o.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!g.selected,isDraggable:w,isSelectable:A,isConnectable:C,isFocusable:I,resizeObserver:f,dragHandle:g.dragHandle,zIndex:((c=g[_e])==null?void 0:c.z)??0,isParent:!!((d=g[_e])!=null&&d.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!g.width&&!!g.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!((m=g[_e])!=null&&m.handleBounds)})}))};tu.displayName="NodeRenderer";var Sp=E.memo(tu);const Cp=(e,t,n)=>n===J.Left?e-t:n===J.Right?e+t:e,Ep=(e,t,n)=>n===J.Top?e-t:n===J.Bottom?e+t:e,Yo="react-flow__edgeupdater",Zo=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:u})=>F.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:Ge([Yo,`${Yo}-${u}`]),cx:Cp(t,r,e),cy:Ep(n,r,e),r,stroke:"transparent",fill:"transparent"}),Mp=()=>!0;var Wt=e=>{const t=({id:n,className:r,type:s,data:a,onClick:i,onEdgeDoubleClick:u,selected:l,animated:f,label:g,labelStyle:y,labelShowBg:v,labelBgStyle:w,labelBgPadding:A,labelBgBorderRadius:C,style:I,source:M,target:L,sourceX:$,sourceY:o,targetX:c,targetY:d,sourcePosition:m,targetPosition:b,elementsSelectable:k,hidden:x,sourceHandleId:j,targetHandleId:H,onContextMenu:N,onMouseEnter:_,onMouseMove:S,onMouseLeave:h,edgeUpdaterRadius:T,onEdgeUpdate:z,onEdgeUpdateStart:D,onEdgeUpdateEnd:V,markerEnd:R,markerStart:P,rfId:O,ariaLabel:W,isFocusable:X,isUpdatable:ee,pathOptions:q,interactionWidth:U})=>{const ne=E.useRef(null),[re,ue]=E.useState(!1),[Ee,Ae]=E.useState(!1),ye=Ce(),De=E.useMemo(()=>`url('#${_s(P,O)}')`,[P,O]),ie=E.useMemo(()=>`url('#${_s(R,O)}')`,[R,O]);if(x)return null;const Me=ve=>{var Be;const{edges:je,addSelectedEdges:et,unselectNodesAndEdges:Le,multiSelectionActive:ft}=ye.getState(),Re=je.find(vt=>vt.id===n);Re&&(k&&(ye.setState({nodesSelectionActive:!1}),Re.selected&&ft?(Le({nodes:[],edges:[Re]}),(Be=ne.current)==null||Be.blur()):et([n])),i&&i(ve,Re))},Q=pn(n,ye.getState,u),Ze=pn(n,ye.getState,N),ct=pn(n,ye.getState,_),It=pn(n,ye.getState,S),wt=pn(n,ye.getState,h),ze=(ve,je)=>{if(ve.button!==0)return;const{edges:et,isValidConnection:Le}=ye.getState(),ft=je?L:M,Re=(je?H:j)||null,Be=je?"target":"source",vt=Le||Mp,tt=je,nt=et.find(ht=>ht.id===n);Ae(!0),D==null||D(ve,nt,Be);const un=ht=>{Ae(!1),V==null||V(ht,nt,Be)};Da({event:ve,handleId:Re,nodeId:ft,onConnect:ht=>z==null?void 0:z(nt,ht),isTarget:tt,getState:ye.getState,setState:ye.setState,isValidConnection:vt,edgeUpdaterType:Be,onEdgeUpdateEnd:un})},Je=ve=>ze(ve,!0),_t=ve=>ze(ve,!1),Qe=()=>ue(!0),lt=()=>ue(!1),de=!k&&!i,Pe=ve=>{var je;if(va.includes(ve.key)&&k){const{unselectNodesAndEdges:et,addSelectedEdges:Le,edges:ft}=ye.getState();ve.key==="Escape"?((je=ne.current)==null||je.blur(),et({edges:[ft.find(Be=>Be.id===n)]})):Le([n])}};return F.createElement("g",{className:Ge(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:f,inactive:de,updating:re}]),onClick:Me,onDoubleClick:Q,onContextMenu:Ze,onMouseEnter:ct,onMouseMove:It,onMouseLeave:wt,onKeyDown:X?Pe:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":W===null?void 0:W||`Edge from ${M} to ${L}`,"aria-describedby":X?`${Oa}-${O}`:void 0,ref:ne},!Ee&&F.createElement(e,{id:n,source:M,target:L,selected:l,animated:f,label:g,labelStyle:y,labelShowBg:v,labelBgStyle:w,labelBgPadding:A,labelBgBorderRadius:C,data:a,style:I,sourceX:$,sourceY:o,targetX:c,targetY:d,sourcePosition:m,targetPosition:b,sourceHandleId:j,targetHandleId:H,markerStart:De,markerEnd:ie,pathOptions:q,interactionWidth:U}),ee&&F.createElement(F.Fragment,null,(ee==="source"||ee===!0)&&F.createElement(Zo,{position:m,centerX:$,centerY:o,radius:T,onMouseDown:Je,onMouseEnter:Qe,onMouseOut:lt,type:"source"}),(ee==="target"||ee===!0)&&F.createElement(Zo,{position:b,centerX:c,centerY:d,radius:T,onMouseDown:_t,onMouseEnter:Qe,onMouseOut:lt,type:"target"})))};return t.displayName="EdgeWrapper",E.memo(t)};function jp(e){const t={default:Wt(e.default||hr),straight:Wt(e.bezier||Ys),step:Wt(e.step||Xs),smoothstep:Wt(e.step||Sr),simplebezier:Wt(e.simplebezier||Ks)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=Wt(e[a]||hr),s),n);return{...t,...r}}function Jo(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case J.Top:return{x:r+a/2,y:s};case J.Right:return{x:r+a,y:s+i/2};case J.Bottom:return{x:r+a/2,y:s+i};case J.Left:return{x:r,y:s+i/2}}}function Qo(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Tp=(e,t,n,r,s,a)=>{const i=Jo(n,e,t),u=Jo(a,r,s);return{sourceX:i.x,sourceY:i.y,targetX:u.x,targetY:u.y}};function Ap({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:i,height:u,transform:l}){const f={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+a)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const g=Cn({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:u/l[2]}),y=Math.max(0,Math.min(g.x2,f.x2)-Math.max(g.x,f.x)),v=Math.max(0,Math.min(g.y2,f.y2)-Math.max(g.y,f.y));return Math.ceil(y*v)>0}function ei(e){var r,s,a,i,u;const t=((r=e==null?void 0:e[_e])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Ip=[{level:0,isMaxLevel:!0,edges:[]}];function Np(e,t,n=!1){let r=-1;const s=e.reduce((i,u)=>{var g,y;const l=Fe(u.zIndex);let f=l?u.zIndex:0;if(n){const v=t.get(u.target),w=t.get(u.source),A=u.selected||(v==null?void 0:v.selected)||(w==null?void 0:w.selected),C=Math.max(((g=w==null?void 0:w[_e])==null?void 0:g.z)||0,((y=v==null?void 0:v[_e])==null?void 0:y.z)||0,1e3);f=(l?u.zIndex:0)+(A?C:0)}return i[f]?i[f].push(u):i[f]=[u],r=f>r?f:r,i},{}),a=Object.entries(s).map(([i,u])=>{const l=+i;return{edges:u,level:l,isMaxLevel:l===r}});return a.length===0?Ip:a}function Dp(e,t,n){const r=me(E.useCallback(s=>e?s.edges.filter(a=>{const i=t.get(a.source),u=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(u==null?void 0:u.width)&&(u==null?void 0:u.height)&&Ap({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:u.width,targetHeight:u.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return Np(r,t,n)}const Lp=({color:e="none",strokeWidth:t=1})=>F.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Rp=({color:e="none",strokeWidth:t=1})=>F.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ti={[fr.Arrow]:Lp,[fr.ArrowClosed]:Rp};function $p(e){const t=Ce();return E.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(ti,e)?ti[e]:((a=(s=t.getState()).onError)==null||a.call(s,"009",yt.error009(e)),null)},[e])}const zp=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:u="auto-start-reverse"})=>{const l=$p(t);return l?F.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0"},F.createElement(l,{color:n,strokeWidth:i})):null},Hp=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const u=_s(i,t);r.includes(u)||(s.push({id:u,color:i.color||e,...i}),r.push(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},nu=({defaultColor:e,rfId:t})=>{const n=me(E.useCallback(Hp({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((a,i)=>a.id!==s[i].id)));return F.createElement("defs",null,n.map(r=>F.createElement(zp,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};nu.displayName="MarkerDefinitions";var Vp=E.memo(nu);const Pp=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ru=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeUpdate:i,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:f,onEdgeMouseLeave:g,onEdgeClick:y,edgeUpdaterRadius:v,onEdgeDoubleClick:w,onEdgeUpdateStart:A,onEdgeUpdateEnd:C,children:I})=>{const{edgesFocusable:M,edgesUpdatable:L,elementsSelectable:$,width:o,height:c,connectionMode:d,nodeInternals:m,onError:b}=me(Pp,$e),k=Dp(t,m,n);return o?F.createElement(F.Fragment,null,k.map(({level:x,edges:j,isMaxLevel:H})=>F.createElement("svg",{key:x,style:{zIndex:x},width:o,height:c,className:"react-flow__edges react-flow__container"},H&&F.createElement(Vp,{defaultColor:e,rfId:r}),F.createElement("g",null,j.map(N=>{const[_,S,h]=ei(m.get(N.source)),[T,z,D]=ei(m.get(N.target));if(!h||!D)return null;let V=N.type||"default";s[V]||(b==null||b("011",yt.error011(V)),V="default");const R=s[V]||s.default,P=d===Vt.Strict?z.target:(z.target??[]).concat(z.source??[]),O=Qo(S.source,N.sourceHandle),W=Qo(P,N.targetHandle),X=(O==null?void 0:O.position)||J.Bottom,ee=(W==null?void 0:W.position)||J.Top,q=!!(N.focusable||M&&typeof N.focusable>"u"),U=typeof i<"u"&&(N.updatable||L&&typeof N.updatable>"u");if(!O||!W)return b==null||b("008",yt.error008(O,N)),null;const{sourceX:ne,sourceY:re,targetX:ue,targetY:Ee}=Tp(_,O,X,T,W,ee);return F.createElement(R,{key:N.id,id:N.id,className:Ge([N.className,a]),type:V,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:ne,sourceY:re,targetX:ue,targetY:Ee,sourcePosition:X,targetPosition:ee,elementsSelectable:$,onEdgeUpdate:i,onContextMenu:u,onMouseEnter:l,onMouseMove:f,onMouseLeave:g,onClick:y,edgeUpdaterRadius:v,onEdgeDoubleClick:w,onEdgeUpdateStart:A,onEdgeUpdateEnd:C,rfId:r,ariaLabel:N.ariaLabel,isFocusable:q,isUpdatable:U,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth})})))),I):null};ru.displayName="EdgeRenderer";var Bp=E.memo(ru);const Op=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Fp({children:e}){const t=me(Op);return F.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Wp(e){const t=Ua(),n=E.useRef(!1);E.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Gp={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top},su=({nodeId:e,handleType:t,style:n,type:r=Ct.Bezier,CustomComponent:s,connectionStatus:a})=>{var d,m,b;const{fromNode:i,handleId:u,toX:l,toY:f,connectionMode:g}=me(E.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),$e),y=(d=i==null?void 0:i[_e])==null?void 0:d.handleBounds;let v=y==null?void 0:y[t];if(g===Vt.Loose&&(v=v||(y==null?void 0:y[t==="source"?"target":"source"])),!i||!v)return null;const w=u?v.find(k=>k.id===u):v[0],A=w?w.x+w.width/2:(i.width??0)/2,C=w?w.y+w.height/2:i.height??0,I=(((m=i.positionAbsolute)==null?void 0:m.x)??0)+A,M=(((b=i.positionAbsolute)==null?void 0:b.y)??0)+C,L=w==null?void 0:w.position,$=L?Gp[L]:null;if(!L||!$)return null;if(s)return F.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:w,fromX:I,fromY:M,toX:l,toY:f,fromPosition:L,toPosition:$,connectionStatus:a});let o="";const c={sourceX:I,sourceY:M,sourcePosition:L,targetX:l,targetY:f,targetPosition:$};return r===Ct.Bezier?[o]=Ea(c):r===Ct.Step?[o]=ws({...c,borderRadius:0}):r===Ct.SmoothStep?[o]=ws(c):r===Ct.SimpleBezier?[o]=Ca(c):o=`M${I},${M} ${l},${f}`,F.createElement("path",{d:o,fill:"none",className:"react-flow__connection-path",style:n})};su.displayName="ConnectionLine";const Up=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function qp({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:i,width:u,height:l,connectionStatus:f}=me(Up,$e);return!(s&&a&&u&&i)?null:F.createElement("svg",{style:e,width:u,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},F.createElement("g",{className:Ge(["react-flow__connection",f])},F.createElement(su,{nodeId:s,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:f})))}function ni(e,t){return E.useRef(null),Ce(),E.useMemo(()=>t(e),[e])}const ou=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:u,onNodeDoubleClick:l,onEdgeDoubleClick:f,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:w,onSelectionContextMenu:A,onSelectionStart:C,onSelectionEnd:I,connectionLineType:M,connectionLineStyle:L,connectionLineComponent:$,connectionLineContainerStyle:o,selectionKeyCode:c,selectionOnDrag:d,selectionMode:m,multiSelectionKeyCode:b,panActivationKeyCode:k,zoomActivationKeyCode:x,deleteKeyCode:j,onlyRenderVisibleElements:H,elementsSelectable:N,selectNodesOnDrag:_,defaultViewport:S,translateExtent:h,minZoom:T,maxZoom:z,preventScrolling:D,defaultMarkerColor:V,zoomOnScroll:R,zoomOnPinch:P,panOnScroll:O,panOnScrollSpeed:W,panOnScrollMode:X,zoomOnDoubleClick:ee,panOnDrag:q,onPaneClick:U,onPaneMouseEnter:ne,onPaneMouseMove:re,onPaneMouseLeave:ue,onPaneScroll:Ee,onPaneContextMenu:Ae,onEdgeUpdate:ye,onEdgeContextMenu:De,onEdgeMouseEnter:ie,onEdgeMouseMove:Me,onEdgeMouseLeave:Q,edgeUpdaterRadius:Ze,onEdgeUpdateStart:ct,onEdgeUpdateEnd:It,noDragClassName:wt,noWheelClassName:ze,noPanClassName:Je,elevateEdgesOnSelect:_t,disableKeyboardA11y:Qe,nodeOrigin:lt,nodeExtent:de,rfId:Pe})=>{const ve=ni(e,vp),je=ni(t,jp);return Wp(a),F.createElement(wp,{onPaneClick:U,onPaneMouseEnter:ne,onPaneMouseMove:re,onPaneMouseLeave:ue,onPaneContextMenu:Ae,onPaneScroll:Ee,deleteKeyCode:j,selectionKeyCode:c,selectionOnDrag:d,selectionMode:m,onSelectionStart:C,onSelectionEnd:I,multiSelectionKeyCode:b,panActivationKeyCode:k,zoomActivationKeyCode:x,elementsSelectable:N,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:R,zoomOnPinch:P,zoomOnDoubleClick:ee,panOnScroll:O,panOnScrollSpeed:W,panOnScrollMode:X,panOnDrag:q,defaultViewport:S,translateExtent:h,minZoom:T,maxZoom:z,onSelectionContextMenu:A,preventScrolling:D,noDragClassName:wt,noWheelClassName:ze,noPanClassName:Je,disableKeyboardA11y:Qe},F.createElement(Fp,null,F.createElement(Bp,{edgeTypes:je,onEdgeClick:u,onEdgeDoubleClick:f,onEdgeUpdate:ye,onlyRenderVisibleElements:H,onEdgeContextMenu:De,onEdgeMouseEnter:ie,onEdgeMouseMove:Me,onEdgeMouseLeave:Q,onEdgeUpdateStart:ct,onEdgeUpdateEnd:It,edgeUpdaterRadius:Ze,defaultMarkerColor:V,noPanClassName:Je,elevateEdgesOnSelect:!!_t,disableKeyboardA11y:Qe,rfId:Pe},F.createElement(qp,{style:L,type:M,component:$,containerStyle:o})),F.createElement("div",{className:"react-flow__edgelabel-renderer"}),F.createElement(Sp,{nodeTypes:ve,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:w,selectNodesOnDrag:_,onlyRenderVisibleElements:H,noPanClassName:Je,noDragClassName:wt,disableKeyboardA11y:Qe,nodeOrigin:lt,nodeExtent:de,rfId:Pe})))};ou.displayName="GraphView";var Kp=E.memo(ou);const Ss=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],xt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ss,nodeExtent:Ss,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Vt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:xh,isValidConnection:void 0},Xp=()=>Qd((e,t)=>({...xt,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=t();e({nodeInternals:Yr(n,r,s,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",i=s?Yr(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:u,domNode:l,nodeOrigin:f}=t(),g=l==null?void 0:l.querySelector(".react-flow__viewport");if(!g)return;const y=window.getComputedStyle(g),{m22:v}=new window.DOMMatrixReadOnly(y.transform),w=n.reduce((C,I)=>{const M=s.get(I.id);if(M){const L=Us(I.nodeElement);!!(L.width&&L.height&&(M.width!==L.width||M.height!==L.height||I.forceUpdate))&&(s.set(M.id,{...M,[_e]:{...M[_e],handleBounds:{source:Xo(".source",I.nodeElement,v,f),target:Xo(".target",I.nodeElement,v,f)}},...L}),C.push({id:M.id,type:"dimensions",dimensions:L}))}return C},[]);Wa(s,f);const A=i||a&&!i&&Ga(t,{initial:!0,...u});e({nodeInternals:new Map(s),fitViewOnInitDone:A}),(w==null?void 0:w.length)>0&&(r==null||r(w))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=t(),i=n.map(u=>{const l={id:u.id,type:"position",dragging:s};return r&&(l.positionAbsolute=u.positionAbsolute,l.position=u.position),l});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:u,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(a){const f=Ka(n,u()),g=Yr(f,s,i,l);e({nodeInternals:g})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=t();let i,u=null;r?i=n.map(l=>kt(l,!0)):(i=Gt(a(),n),u=Gt(s,[])),Kn({changedNodes:i,changedEdges:u,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=t();let i,u=null;r?i=n.map(l=>kt(l,!0)):(i=Gt(s,n),u=Gt(a(),[])),Kn({changedNodes:u,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=t(),i=n||a(),u=r||s,l=i.map(g=>(g.selected=!1,kt(g.id,!1))),f=u.map(g=>kt(g.id,!1));Kn({changedNodes:l,changedEdges:f,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r==null||r.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r==null||r.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),a=r().filter(u=>u.selected).map(u=>kt(u.id,!1)),i=n.filter(u=>u.selected).map(u=>kt(u.id,!1));Kn({changedNodes:a,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=qs(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:i,d3Selection:u,translateExtent:l}=t();if(!i||!u||!n.x&&!n.y)return!1;const f=Et.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),g=[[0,0],[s,a]],y=i==null?void 0:i.constrain()(f,g,l);return i.transform(u,y),r[0]!==y.x||r[1]!==y.y||r[2]!==y.k},cancelConnection:()=>e({connectionNodeId:xt.connectionNodeId,connectionHandleId:xt.connectionHandleId,connectionHandleType:xt.connectionHandleType,connectionStatus:xt.connectionStatus,connectionStartHandle:xt.connectionStartHandle,connectionEndHandle:xt.connectionEndHandle}),reset:()=>e({...xt})}),Object.is),iu=({children:e})=>{const t=E.useRef(null);return t.current||(t.current=Xp()),F.createElement(gh,{value:t.current},e)};iu.displayName="ReactFlowProvider";const au=({children:e})=>E.useContext(kr)?F.createElement(F.Fragment,null,e):F.createElement(iu,null,e);au.displayName="ReactFlowWrapper";const Yp={input:za,default:xs,output:Va,group:eo},Zp={default:hr,straight:Ys,step:Xs,smoothstep:Sr,simplebezier:Ks},Jp=[0,0],Qp=[15,15],eg={x:0,y:0,zoom:1},tg={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ng=E.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=Yp,edgeTypes:i=Zp,onNodeClick:u,onEdgeClick:l,onInit:f,onMove:g,onMoveStart:y,onMoveEnd:v,onConnect:w,onConnectStart:A,onConnectEnd:C,onClickConnectStart:I,onClickConnectEnd:M,onNodeMouseEnter:L,onNodeMouseMove:$,onNodeMouseLeave:o,onNodeContextMenu:c,onNodeDoubleClick:d,onNodeDragStart:m,onNodeDrag:b,onNodeDragStop:k,onNodesDelete:x,onEdgesDelete:j,onSelectionChange:H,onSelectionDragStart:N,onSelectionDrag:_,onSelectionDragStop:S,onSelectionContextMenu:h,onSelectionStart:T,onSelectionEnd:z,connectionMode:D=Vt.Strict,connectionLineType:V=Ct.Bezier,connectionLineStyle:R,connectionLineComponent:P,connectionLineContainerStyle:O,deleteKeyCode:W="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:ee=!1,selectionMode:q=En.Full,panActivationKeyCode:U="Space",multiSelectionKeyCode:ne=lr()?"Meta":"Control",zoomActivationKeyCode:re=lr()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:Ee=Qp,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:ye=!0,nodesDraggable:De,nodesConnectable:ie,nodesFocusable:Me,nodeOrigin:Q=Jp,edgesFocusable:Ze,edgesUpdatable:ct,elementsSelectable:It,defaultViewport:wt=eg,minZoom:ze=.5,maxZoom:Je=2,translateExtent:_t=Ss,preventScrolling:Qe=!0,nodeExtent:lt,defaultMarkerColor:de="#b1b1b7",zoomOnScroll:Pe=!0,zoomOnPinch:ve=!0,panOnScroll:je=!1,panOnScrollSpeed:et=.5,panOnScrollMode:Le=Rt.Free,zoomOnDoubleClick:ft=!0,panOnDrag:Re=!0,onPaneClick:Be,onPaneMouseEnter:vt,onPaneMouseMove:tt,onPaneMouseLeave:nt,onPaneScroll:un,onPaneContextMenu:zn,children:ht,onEdgeUpdate:Mr,onEdgeContextMenu:jr,onEdgeDoubleClick:Tr,onEdgeMouseEnter:Hn,onEdgeMouseMove:Ar,onEdgeMouseLeave:Vn,onEdgeUpdateStart:dn,onEdgeUpdateEnd:Ir,edgeUpdaterRadius:Nr=10,onNodesChange:Dr,onEdgesChange:Lr,noDragClassName:Rr="nodrag",noWheelClassName:$r="nowheel",noPanClassName:cn="nopan",fitView:zr=!1,fitViewOptions:Pn,connectOnClick:Bn=!0,attributionPosition:On,proOptions:Hr,defaultEdgeOptions:Vr,elevateNodesOnSelect:B=!0,elevateEdgesOnSelect:G=!1,disableKeyboardA11y:Z=!1,autoPanOnConnect:Y=!0,autoPanOnNodeDrag:ae=!0,connectionRadius:le=20,isValidConnection:fe,onError:Ie,style:he,id:pe,nodeDragThreshold:ce,...xe},Oe)=>{const ln=pe||"1";return F.createElement("div",{...xe,style:{...he,...tg},ref:Oe,className:Ge(["react-flow",s]),"data-testid":"rf__wrapper",id:pe},F.createElement(au,null,F.createElement(Kp,{onInit:f,onMove:g,onMoveStart:y,onMoveEnd:v,onNodeClick:u,onEdgeClick:l,onNodeMouseEnter:L,onNodeMouseMove:$,onNodeMouseLeave:o,onNodeContextMenu:c,onNodeDoubleClick:d,nodeTypes:a,edgeTypes:i,connectionLineType:V,connectionLineStyle:R,connectionLineComponent:P,connectionLineContainerStyle:O,selectionKeyCode:X,selectionOnDrag:ee,selectionMode:q,deleteKeyCode:W,multiSelectionKeyCode:ne,panActivationKeyCode:U,zoomActivationKeyCode:re,onlyRenderVisibleElements:Ae,selectNodesOnDrag:ye,defaultViewport:wt,translateExtent:_t,minZoom:ze,maxZoom:Je,preventScrolling:Qe,zoomOnScroll:Pe,zoomOnPinch:ve,zoomOnDoubleClick:ft,panOnScroll:je,panOnScrollSpeed:et,panOnScrollMode:Le,panOnDrag:Re,onPaneClick:Be,onPaneMouseEnter:vt,onPaneMouseMove:tt,onPaneMouseLeave:nt,onPaneScroll:un,onPaneContextMenu:zn,onSelectionContextMenu:h,onSelectionStart:T,onSelectionEnd:z,onEdgeUpdate:Mr,onEdgeContextMenu:jr,onEdgeDoubleClick:Tr,onEdgeMouseEnter:Hn,onEdgeMouseMove:Ar,onEdgeMouseLeave:Vn,onEdgeUpdateStart:dn,onEdgeUpdateEnd:Ir,edgeUpdaterRadius:Nr,defaultMarkerColor:de,noDragClassName:Rr,noWheelClassName:$r,noPanClassName:cn,elevateEdgesOnSelect:G,rfId:ln,disableKeyboardA11y:Z,nodeOrigin:Q,nodeExtent:lt}),F.createElement(Gh,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:w,onConnectStart:A,onConnectEnd:C,onClickConnectStart:I,onClickConnectEnd:M,nodesDraggable:De,nodesConnectable:ie,nodesFocusable:Me,edgesFocusable:Ze,edgesUpdatable:ct,elementsSelectable:It,elevateNodesOnSelect:B,minZoom:ze,maxZoom:Je,nodeExtent:lt,onNodesChange:Dr,onEdgesChange:Lr,snapToGrid:ue,snapGrid:Ee,connectionMode:D,translateExtent:_t,connectOnClick:Bn,defaultEdgeOptions:Vr,fitView:zr,fitViewOptions:Pn,onNodesDelete:x,onEdgesDelete:j,onNodeDragStart:m,onNodeDrag:b,onNodeDragStop:k,onSelectionDrag:_,onSelectionDragStart:N,onSelectionDragStop:S,noPanClassName:cn,nodeOrigin:Q,rfId:ln,autoPanOnConnect:Y,autoPanOnNodeDrag:ae,onError:Ie,connectionRadius:le,isValidConnection:fe,nodeDragThreshold:ce}),F.createElement(Fh,{onSelectionChange:H}),ht,F.createElement(bh,{proOptions:Hr,position:On}),F.createElement(Yh,{rfId:ln,disableKeyboardA11y:Z})))});ng.displayName="ReactFlow";const rg=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function S0({children:e}){const t=me(rg);return t?bt.createPortal(e,t):null}function sg(){const e=Ce();return E.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),a=(Array.isArray(t)?t:[t]).reduce((i,u)=>{const l=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${u}"]`);return l&&i.push({id:u,nodeElement:l,forceUpdate:!0}),i},[]);requestAnimationFrame(()=>r(a))},[])}function uu(e){return t=>{const[n,r]=E.useState(t),s=E.useCallback(a=>r(i=>e(a,i)),[]);return[n,r,s]}}const C0=uu(Ka),E0=uu(cp);var du={exports:{}};(function(e){(function(){function t(o){var c={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(o===!1)return JSON.parse(JSON.stringify(c));var d={};for(var m in c)c.hasOwnProperty(m)&&(d[m]=c[m].defaultValue);return d}function n(){var o=t(!0),c={};for(var d in o)o.hasOwnProperty(d)&&(c[d]=!0);return c}var r={},s={},a={},i=t(!0),u="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(o,c){return i[o]=c,this},r.getOption=function(o){return i[o]},r.getOptions=function(){return i},r.resetOptions=function(){i=t(!0)},r.setFlavor=function(o){if(!l.hasOwnProperty(o))throw Error(o+" flavor was not found");r.resetOptions();var c=l[o];u=o;for(var d in c)c.hasOwnProperty(d)&&(i[d]=c[d])},r.getFlavor=function(){return u},r.getFlavorOptions=function(o){if(l.hasOwnProperty(o))return l[o]},r.getDefaultOptions=function(o){return t(o)},r.subParser=function(o,c){if(r.helper.isString(o))if(typeof c<"u")s[o]=c;else{if(s.hasOwnProperty(o))return s[o];throw Error("SubParser named "+o+" not registered!")}},r.extension=function(o,c){if(!r.helper.isString(o))throw Error("Extension 'name' must be a string");if(o=r.helper.stdExtName(o),r.helper.isUndefined(c)){if(!a.hasOwnProperty(o))throw Error("Extension named "+o+" is not registered!");return a[o]}else{typeof c=="function"&&(c=c()),r.helper.isArray(c)||(c=[c]);var d=f(c,o);if(d.valid)a[o]=c;else throw Error(d.error)}},r.getAllExtensions=function(){return a},r.removeExtension=function(o){delete a[o]},r.resetExtensions=function(){a={}};function f(o,c){var d=c?"Error in "+c+" extension->":"Error in unnamed extension",m={valid:!0,error:""};r.helper.isArray(o)||(o=[o]);for(var b=0;b<o.length;++b){var k=d+" sub-extension "+b+": ",x=o[b];if(typeof x!="object")return m.valid=!1,m.error=k+"must be an object, but "+typeof x+" given",m;if(!r.helper.isString(x.type))return m.valid=!1,m.error=k+'property "type" must be a string, but '+typeof x.type+" given",m;var j=x.type=x.type.toLowerCase();if(j==="language"&&(j=x.type="lang"),j==="html"&&(j=x.type="output"),j!=="lang"&&j!=="output"&&j!=="listener")return m.valid=!1,m.error=k+"type "+j+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',m;if(j==="listener"){if(r.helper.isUndefined(x.listeners))return m.valid=!1,m.error=k+'. Extensions of type "listener" must have a property called "listeners"',m}else if(r.helper.isUndefined(x.filter)&&r.helper.isUndefined(x.regex))return m.valid=!1,m.error=k+j+' extensions must define either a "regex" property or a "filter" method',m;if(x.listeners){if(typeof x.listeners!="object")return m.valid=!1,m.error=k+'"listeners" property must be an object but '+typeof x.listeners+" given",m;for(var H in x.listeners)if(x.listeners.hasOwnProperty(H)&&typeof x.listeners[H]!="function")return m.valid=!1,m.error=k+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+H+" must be a function but "+typeof x.listeners[H]+" given",m}if(x.filter){if(typeof x.filter!="function")return m.valid=!1,m.error=k+'"filter" must be a function, but '+typeof x.filter+" given",m}else if(x.regex){if(r.helper.isString(x.regex)&&(x.regex=new RegExp(x.regex,"g")),!(x.regex instanceof RegExp))return m.valid=!1,m.error=k+'"regex" property must either be a string or a RegExp object, but '+typeof x.regex+" given",m;if(r.helper.isUndefined(x.replace))return m.valid=!1,m.error=k+'"regex" extensions must implement a replace string or function',m}}return m}r.validateExtension=function(o){var c=f(o,null);return c.valid?!0:(console.warn(c.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(o){return typeof o=="string"||o instanceof String},r.helper.isFunction=function(o){var c={};return o&&c.toString.call(o)==="[object Function]"},r.helper.isArray=function(o){return Array.isArray(o)},r.helper.isUndefined=function(o){return typeof o>"u"},r.helper.forEach=function(o,c){if(r.helper.isUndefined(o))throw new Error("obj param is required");if(r.helper.isUndefined(c))throw new Error("callback param is required");if(!r.helper.isFunction(c))throw new Error("callback param must be a function/closure");if(typeof o.forEach=="function")o.forEach(c);else if(r.helper.isArray(o))for(var d=0;d<o.length;d++)c(o[d],d,o);else if(typeof o=="object")for(var m in o)o.hasOwnProperty(m)&&c(o[m],m,o);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(o){return o.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function g(o,c){var d=c.charCodeAt(0);return"¨E"+d+"E"}r.helper.escapeCharactersCallback=g,r.helper.escapeCharacters=function(o,c,d){var m="(["+c.replace(/([\[\]\\])/g,"\\$1")+"])";d&&(m="\\\\"+m);var b=new RegExp(m,"g");return o=o.replace(b,g),o},r.helper.unescapeHTMLEntities=function(o){return o.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var y=function(o,c,d,m){var b=m||"",k=b.indexOf("g")>-1,x=new RegExp(c+"|"+d,"g"+b.replace(/g/g,"")),j=new RegExp(c,b.replace(/g/g,"")),H=[],N,_,S,h,T;do for(N=0;S=x.exec(o);)if(j.test(S[0]))N++||(_=x.lastIndex,h=_-S[0].length);else if(N&&!--N){T=S.index+S[0].length;var z={left:{start:h,end:_},match:{start:_,end:S.index},right:{start:S.index,end:T},wholeMatch:{start:h,end:T}};if(H.push(z),!k)return H}while(N&&(x.lastIndex=_));return H};r.helper.matchRecursiveRegExp=function(o,c,d,m){for(var b=y(o,c,d,m),k=[],x=0;x<b.length;++x)k.push([o.slice(b[x].wholeMatch.start,b[x].wholeMatch.end),o.slice(b[x].match.start,b[x].match.end),o.slice(b[x].left.start,b[x].left.end),o.slice(b[x].right.start,b[x].right.end)]);return k},r.helper.replaceRecursiveRegExp=function(o,c,d,m,b){if(!r.helper.isFunction(c)){var k=c;c=function(){return k}}var x=y(o,d,m,b),j=o,H=x.length;if(H>0){var N=[];x[0].wholeMatch.start!==0&&N.push(o.slice(0,x[0].wholeMatch.start));for(var _=0;_<H;++_)N.push(c(o.slice(x[_].wholeMatch.start,x[_].wholeMatch.end),o.slice(x[_].match.start,x[_].match.end),o.slice(x[_].left.start,x[_].left.end),o.slice(x[_].right.start,x[_].right.end))),_<H-1&&N.push(o.slice(x[_].wholeMatch.end,x[_+1].wholeMatch.start));x[H-1].wholeMatch.end<o.length&&N.push(o.slice(x[H-1].wholeMatch.end)),j=N.join("")}return j},r.helper.regexIndexOf=function(o,c,d){if(!r.helper.isString(o))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(c instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var m=o.substring(d||0).search(c);return m>=0?m+(d||0):m},r.helper.splitAtIndex=function(o,c){if(!r.helper.isString(o))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[o.substring(0,c),o.substring(c)]},r.helper.encodeEmailAddress=function(o){var c=[function(d){return"&#"+d.charCodeAt(0)+";"},function(d){return"&#x"+d.charCodeAt(0).toString(16)+";"},function(d){return d}];return o=o.replace(/./g,function(d){if(d==="@")d=c[Math.floor(Math.random()*2)](d);else{var m=Math.random();d=m>.9?c[2](d):m>.45?c[1](d):c[0](d)}return d}),o},r.helper.padEnd=function(c,d,m){return d=d>>0,m=String(m||" "),c.length>d?String(c):(d=d-c.length,d>m.length&&(m+=m.repeat(d/m.length)),String(c)+m.slice(0,d))},typeof console>"u"&&(console={warn:function(o){alert(o)},log:function(o){alert(o)},error:function(o){throw o}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(o){var c={},d=[],m=[],b={},k=u,x={parsed:{},raw:"",format:""};j();function j(){o=o||{};for(var h in i)i.hasOwnProperty(h)&&(c[h]=i[h]);if(typeof o=="object")for(var T in o)o.hasOwnProperty(T)&&(c[T]=o[T]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof o+" was passed instead.");c.extensions&&r.helper.forEach(c.extensions,H)}function H(h,T){if(T=T||null,r.helper.isString(h))if(h=r.helper.stdExtName(h),T=h,r.extensions[h]){console.warn("DEPRECATION WARNING: "+h+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),N(r.extensions[h],h);return}else if(!r.helper.isUndefined(a[h]))h=a[h];else throw Error('Extension "'+h+'" could not be loaded. It was either not found or is not a valid extension.');typeof h=="function"&&(h=h()),r.helper.isArray(h)||(h=[h]);var z=f(h,T);if(!z.valid)throw Error(z.error);for(var D=0;D<h.length;++D){switch(h[D].type){case"lang":d.push(h[D]);break;case"output":m.push(h[D]);break}if(h[D].hasOwnProperty("listeners"))for(var V in h[D].listeners)h[D].listeners.hasOwnProperty(V)&&_(V,h[D].listeners[V])}}function N(h,T){typeof h=="function"&&(h=h(new r.Converter)),r.helper.isArray(h)||(h=[h]);var z=f(h,T);if(!z.valid)throw Error(z.error);for(var D=0;D<h.length;++D)switch(h[D].type){case"lang":d.push(h[D]);break;case"output":m.push(h[D]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function _(h,T){if(!r.helper.isString(h))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof h+" given");if(typeof T!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof T+" given");b.hasOwnProperty(h)||(b[h]=[]),b[h].push(T)}function S(h){var T=h.match(/^\s*/)[0].length,z=new RegExp("^\\s{0,"+T+"}","gm");return h.replace(z,"")}this._dispatch=function(T,z,D,V){if(b.hasOwnProperty(T))for(var R=0;R<b[T].length;++R){var P=b[T][R](T,z,this,D,V);P&&typeof P<"u"&&(z=P)}return z},this.listen=function(h,T){return _(h,T),this},this.makeHtml=function(h){if(!h)return h;var T={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:d,outputModifiers:m,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return h=h.replace(/¨/g,"¨T"),h=h.replace(/\$/g,"¨D"),h=h.replace(/\r\n/g,`
`),h=h.replace(/\r/g,`
`),h=h.replace(/\u00A0/g,"&nbsp;"),c.smartIndentationFix&&(h=S(h)),h=`

`+h+`

`,h=r.subParser("detab")(h,c,T),h=h.replace(/^[ \t]+$/mg,""),r.helper.forEach(d,function(z){h=r.subParser("runExtension")(z,h,c,T)}),h=r.subParser("metadata")(h,c,T),h=r.subParser("hashPreCodeTags")(h,c,T),h=r.subParser("githubCodeBlocks")(h,c,T),h=r.subParser("hashHTMLBlocks")(h,c,T),h=r.subParser("hashCodeTags")(h,c,T),h=r.subParser("stripLinkDefinitions")(h,c,T),h=r.subParser("blockGamut")(h,c,T),h=r.subParser("unhashHTMLSpans")(h,c,T),h=r.subParser("unescapeSpecialChars")(h,c,T),h=h.replace(/¨D/g,"$$"),h=h.replace(/¨T/g,"¨"),h=r.subParser("completeHTMLDocument")(h,c,T),r.helper.forEach(m,function(z){h=r.subParser("runExtension")(z,h,c,T)}),x=T.metadata,h},this.makeMarkdown=this.makeMd=function(h,T){if(h=h.replace(/\r\n/g,`
`),h=h.replace(/\r/g,`
`),h=h.replace(/>[ \t]+</,">¨NBSP;<"),!T)if(window&&window.document)T=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var z=T.createElement("div");z.innerHTML=h;var D={preList:W(z)};O(z);for(var V=z.childNodes,R="",P=0;P<V.length;P++)R+=r.subParser("makeMarkdown.node")(V[P],D);function O(X){for(var ee=0;ee<X.childNodes.length;++ee){var q=X.childNodes[ee];q.nodeType===3?!/\S/.test(q.nodeValue)&&!/^[ ]+$/.test(q.nodeValue)?(X.removeChild(q),--ee):(q.nodeValue=q.nodeValue.split(`
`).join(" "),q.nodeValue=q.nodeValue.replace(/(\s)+/g,"$1")):q.nodeType===1&&O(q)}}function W(X){for(var ee=X.querySelectorAll("pre"),q=[],U=0;U<ee.length;++U)if(ee[U].childElementCount===1&&ee[U].firstChild.tagName.toLowerCase()==="code"){var ne=ee[U].firstChild.innerHTML.trim(),re=ee[U].firstChild.getAttribute("data-language")||"";if(re==="")for(var ue=ee[U].firstChild.className.split(" "),Ee=0;Ee<ue.length;++Ee){var Ae=ue[Ee].match(/^language-(.+)$/);if(Ae!==null){re=Ae[1];break}}ne=r.helper.unescapeHTMLEntities(ne),q.push(ne),ee[U].outerHTML='<precode language="'+re+'" precodenum="'+U.toString()+'"></precode>'}else q.push(ee[U].innerHTML),ee[U].innerHTML="",ee[U].setAttribute("prenum",U.toString());return q}return R},this.setOption=function(h,T){c[h]=T},this.getOption=function(h){return c[h]},this.getOptions=function(){return c},this.addExtension=function(h,T){T=T||null,H(h,T)},this.useExtension=function(h){H(h)},this.setFlavor=function(h){if(!l.hasOwnProperty(h))throw Error(h+" flavor was not found");var T=l[h];k=h;for(var z in T)T.hasOwnProperty(z)&&(c[z]=T[z])},this.getFlavor=function(){return k},this.removeExtension=function(h){r.helper.isArray(h)||(h=[h]);for(var T=0;T<h.length;++T){for(var z=h[T],D=0;D<d.length;++D)d[D]===z&&d.splice(D,1);for(var V=0;V<m.length;++V)m[V]===z&&m.splice(V,1)}},this.getAllExtensions=function(){return{language:d,output:m}},this.getMetadata=function(h){return h?x.raw:x.parsed},this.getMetadataFormat=function(){return x.format},this._setMetadataPair=function(h,T){x.parsed[h]=T},this._setMetadataFormat=function(h){x.format=h},this._setMetadataRaw=function(h){x.raw=h}},r.subParser("anchors",function(o,c,d){o=d.converter._dispatch("anchors.before",o,c,d);var m=function(b,k,x,j,H,N,_){if(r.helper.isUndefined(_)&&(_=""),x=x.toLowerCase(),b.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)j="";else if(!j)if(x||(x=k.toLowerCase().replace(/ ?\n/g," ")),j="#"+x,!r.helper.isUndefined(d.gUrls[x]))j=d.gUrls[x],r.helper.isUndefined(d.gTitles[x])||(_=d.gTitles[x]);else return b;j=j.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var S='<a href="'+j+'"';return _!==""&&_!==null&&(_=_.replace(/"/g,"&quot;"),_=_.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),S+=' title="'+_+'"'),c.openLinksInNewWindow&&!/^#/.test(j)&&(S+=' rel="noopener noreferrer" target="¨E95Eblank"'),S+=">"+k+"</a>",S};return o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,m),o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,m),o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,m),o=o.replace(/\[([^\[\]]+)]()()()()()/g,m),c.ghMentions&&(o=o.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(b,k,x,j,H){if(x==="\\")return k+j;if(!r.helper.isString(c.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var N=c.ghMentionsLink.replace(/\{u}/g,H),_="";return c.openLinksInNewWindow&&(_=' rel="noopener noreferrer" target="¨E95Eblank"'),k+'<a href="'+N+'"'+_+">"+j+"</a>"})),o=d.converter._dispatch("anchors.after",o,c,d),o});var v=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,A=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,C=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,I=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,M=function(o){return function(c,d,m,b,k,x,j){m=m.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var H=m,N="",_="",S=d||"",h=j||"";return/^www\./i.test(m)&&(m=m.replace(/^www\./i,"http://www.")),o.excludeTrailingPunctuationFromURLs&&x&&(N=x),o.openLinksInNewWindow&&(_=' rel="noopener noreferrer" target="¨E95Eblank"'),S+'<a href="'+m+'"'+_+">"+H+"</a>"+N+h}},L=function(o,c){return function(d,m,b){var k="mailto:";return m=m||"",b=r.subParser("unescapeSpecialChars")(b,o,c),o.encodeEmails?(k=r.helper.encodeEmailAddress(k+b),b=r.helper.encodeEmailAddress(b)):k=k+b,m+'<a href="'+k+'">'+b+"</a>"}};r.subParser("autoLinks",function(o,c,d){return o=d.converter._dispatch("autoLinks.before",o,c,d),o=o.replace(A,M(c)),o=o.replace(I,L(c,d)),o=d.converter._dispatch("autoLinks.after",o,c,d),o}),r.subParser("simplifiedAutoLinks",function(o,c,d){return c.simplifiedAutoLink&&(o=d.converter._dispatch("simplifiedAutoLinks.before",o,c,d),c.excludeTrailingPunctuationFromURLs?o=o.replace(w,M(c)):o=o.replace(v,M(c)),o=o.replace(C,L(c,d)),o=d.converter._dispatch("simplifiedAutoLinks.after",o,c,d)),o}),r.subParser("blockGamut",function(o,c,d){return o=d.converter._dispatch("blockGamut.before",o,c,d),o=r.subParser("blockQuotes")(o,c,d),o=r.subParser("headers")(o,c,d),o=r.subParser("horizontalRule")(o,c,d),o=r.subParser("lists")(o,c,d),o=r.subParser("codeBlocks")(o,c,d),o=r.subParser("tables")(o,c,d),o=r.subParser("hashHTMLBlocks")(o,c,d),o=r.subParser("paragraphs")(o,c,d),o=d.converter._dispatch("blockGamut.after",o,c,d),o}),r.subParser("blockQuotes",function(o,c,d){o=d.converter._dispatch("blockQuotes.before",o,c,d),o=o+`

`;var m=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return c.splitAdjacentBlockquotes&&(m=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),o=o.replace(m,function(b){return b=b.replace(/^[ \t]*>[ \t]?/gm,""),b=b.replace(/¨0/g,""),b=b.replace(/^[ \t]+$/gm,""),b=r.subParser("githubCodeBlocks")(b,c,d),b=r.subParser("blockGamut")(b,c,d),b=b.replace(/(^|\n)/g,"$1  "),b=b.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(k,x){var j=x;return j=j.replace(/^  /mg,"¨0"),j=j.replace(/¨0/g,""),j}),r.subParser("hashBlock")(`<blockquote>
`+b+`
</blockquote>`,c,d)}),o=d.converter._dispatch("blockQuotes.after",o,c,d),o}),r.subParser("codeBlocks",function(o,c,d){o=d.converter._dispatch("codeBlocks.before",o,c,d),o+="¨0";var m=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return o=o.replace(m,function(b,k,x){var j=k,H=x,N=`
`;return j=r.subParser("outdent")(j,c,d),j=r.subParser("encodeCode")(j,c,d),j=r.subParser("detab")(j,c,d),j=j.replace(/^\n+/g,""),j=j.replace(/\n+$/g,""),c.omitExtraWLInCodeBlocks&&(N=""),j="<pre><code>"+j+N+"</code></pre>",r.subParser("hashBlock")(j,c,d)+H}),o=o.replace(/¨0/,""),o=d.converter._dispatch("codeBlocks.after",o,c,d),o}),r.subParser("codeSpans",function(o,c,d){return o=d.converter._dispatch("codeSpans.before",o,c,d),typeof o>"u"&&(o=""),o=o.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(m,b,k,x){var j=x;return j=j.replace(/^([ \t]*)/g,""),j=j.replace(/[ \t]*$/g,""),j=r.subParser("encodeCode")(j,c,d),j=b+"<code>"+j+"</code>",j=r.subParser("hashHTMLSpans")(j,c,d),j}),o=d.converter._dispatch("codeSpans.after",o,c,d),o}),r.subParser("completeHTMLDocument",function(o,c,d){if(!c.completeHTMLDocument)return o;o=d.converter._dispatch("completeHTMLDocument.before",o,c,d);var m="html",b=`<!DOCTYPE HTML>
`,k="",x=`<meta charset="utf-8">
`,j="",H="";typeof d.metadata.parsed.doctype<"u"&&(b="<!DOCTYPE "+d.metadata.parsed.doctype+`>
`,m=d.metadata.parsed.doctype.toString().toLowerCase(),(m==="html"||m==="html5")&&(x='<meta charset="utf-8">'));for(var N in d.metadata.parsed)if(d.metadata.parsed.hasOwnProperty(N))switch(N.toLowerCase()){case"doctype":break;case"title":k="<title>"+d.metadata.parsed.title+`</title>
`;break;case"charset":m==="html"||m==="html5"?x='<meta charset="'+d.metadata.parsed.charset+`">
`:x='<meta name="charset" content="'+d.metadata.parsed.charset+`">
`;break;case"language":case"lang":j=' lang="'+d.metadata.parsed[N]+'"',H+='<meta name="'+N+'" content="'+d.metadata.parsed[N]+`">
`;break;default:H+='<meta name="'+N+'" content="'+d.metadata.parsed[N]+`">
`}return o=b+"<html"+j+`>
<head>
`+k+x+H+`</head>
<body>
`+o.trim()+`
</body>
</html>`,o=d.converter._dispatch("completeHTMLDocument.after",o,c,d),o}),r.subParser("detab",function(o,c,d){return o=d.converter._dispatch("detab.before",o,c,d),o=o.replace(/\t(?=\t)/g,"    "),o=o.replace(/\t/g,"¨A¨B"),o=o.replace(/¨B(.+?)¨A/g,function(m,b){for(var k=b,x=4-k.length%4,j=0;j<x;j++)k+=" ";return k}),o=o.replace(/¨A/g,"    "),o=o.replace(/¨B/g,""),o=d.converter._dispatch("detab.after",o,c,d),o}),r.subParser("ellipsis",function(o,c,d){return c.ellipsis&&(o=d.converter._dispatch("ellipsis.before",o,c,d),o=o.replace(/\.\.\./g,"…"),o=d.converter._dispatch("ellipsis.after",o,c,d)),o}),r.subParser("emoji",function(o,c,d){if(!c.emoji)return o;o=d.converter._dispatch("emoji.before",o,c,d);var m=/:([\S]+?):/g;return o=o.replace(m,function(b,k){return r.helper.emojis.hasOwnProperty(k)?r.helper.emojis[k]:b}),o=d.converter._dispatch("emoji.after",o,c,d),o}),r.subParser("encodeAmpsAndAngles",function(o,c,d){return o=d.converter._dispatch("encodeAmpsAndAngles.before",o,c,d),o=o.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),o=o.replace(/<(?![a-z\/?$!])/gi,"&lt;"),o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),o=d.converter._dispatch("encodeAmpsAndAngles.after",o,c,d),o}),r.subParser("encodeBackslashEscapes",function(o,c,d){return o=d.converter._dispatch("encodeBackslashEscapes.before",o,c,d),o=o.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),o=o.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),o=d.converter._dispatch("encodeBackslashEscapes.after",o,c,d),o}),r.subParser("encodeCode",function(o,c,d){return o=d.converter._dispatch("encodeCode.before",o,c,d),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),o=d.converter._dispatch("encodeCode.after",o,c,d),o}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(o,c,d){o=d.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",o,c,d);var m=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,b=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return o=o.replace(m,function(k){return k.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),o=o.replace(b,function(k){return k.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),o=d.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",o,c,d),o}),r.subParser("githubCodeBlocks",function(o,c,d){return c.ghCodeBlocks?(o=d.converter._dispatch("githubCodeBlocks.before",o,c,d),o+="¨0",o=o.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(m,b,k,x){var j=c.omitExtraWLInCodeBlocks?"":`
`;return x=r.subParser("encodeCode")(x,c,d),x=r.subParser("detab")(x,c,d),x=x.replace(/^\n+/g,""),x=x.replace(/\n+$/g,""),x="<pre><code"+(k?' class="'+k+" language-"+k+'"':"")+">"+x+j+"</code></pre>",x=r.subParser("hashBlock")(x,c,d),`

¨G`+(d.ghCodeBlocks.push({text:m,codeblock:x})-1)+`G

`}),o=o.replace(/¨0/,""),d.converter._dispatch("githubCodeBlocks.after",o,c,d)):o}),r.subParser("hashBlock",function(o,c,d){return o=d.converter._dispatch("hashBlock.before",o,c,d),o=o.replace(/(^\n+|\n+$)/g,""),o=`

¨K`+(d.gHtmlBlocks.push(o)-1)+`K

`,o=d.converter._dispatch("hashBlock.after",o,c,d),o}),r.subParser("hashCodeTags",function(o,c,d){o=d.converter._dispatch("hashCodeTags.before",o,c,d);var m=function(b,k,x,j){var H=x+r.subParser("encodeCode")(k,c,d)+j;return"¨C"+(d.gHtmlSpans.push(H)-1)+"C"};return o=r.helper.replaceRecursiveRegExp(o,m,"<code\\b[^>]*>","</code>","gim"),o=d.converter._dispatch("hashCodeTags.after",o,c,d),o}),r.subParser("hashElement",function(o,c,d){return function(m,b){var k=b;return k=k.replace(/\n\n/g,`
`),k=k.replace(/^\n/,""),k=k.replace(/\n+$/g,""),k=`

¨K`+(d.gHtmlBlocks.push(k)-1)+`K

`,k}}),r.subParser("hashHTMLBlocks",function(o,c,d){o=d.converter._dispatch("hashHTMLBlocks.before",o,c,d);var m=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],b=function(h,T,z,D){var V=h;return z.search(/\bmarkdown\b/)!==-1&&(V=z+d.converter.makeHtml(T)+D),`

¨K`+(d.gHtmlBlocks.push(V)-1)+`K

`};c.backslashEscapesHTMLTags&&(o=o.replace(/\\<(\/?[^>]+?)>/g,function(h,T){return"&lt;"+T+"&gt;"}));for(var k=0;k<m.length;++k)for(var x,j=new RegExp("^ {0,3}(<"+m[k]+"\\b[^>]*>)","im"),H="<"+m[k]+"\\b[^>]*>",N="</"+m[k]+">";(x=r.helper.regexIndexOf(o,j))!==-1;){var _=r.helper.splitAtIndex(o,x),S=r.helper.replaceRecursiveRegExp(_[1],b,H,N,"im");if(S===_[1])break;o=_[0].concat(S)}return o=o.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(o,c,d)),o=r.helper.replaceRecursiveRegExp(o,function(h){return`

¨K`+(d.gHtmlBlocks.push(h)-1)+`K

`},"^ {0,3}<!--","-->","gm"),o=o.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(o,c,d)),o=d.converter._dispatch("hashHTMLBlocks.after",o,c,d),o}),r.subParser("hashHTMLSpans",function(o,c,d){o=d.converter._dispatch("hashHTMLSpans.before",o,c,d);function m(b){return"¨C"+(d.gHtmlSpans.push(b)-1)+"C"}return o=o.replace(/<[^>]+?\/>/gi,function(b){return m(b)}),o=o.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(b){return m(b)}),o=o.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(b){return m(b)}),o=o.replace(/<[^>]+?>/gi,function(b){return m(b)}),o=d.converter._dispatch("hashHTMLSpans.after",o,c,d),o}),r.subParser("unhashHTMLSpans",function(o,c,d){o=d.converter._dispatch("unhashHTMLSpans.before",o,c,d);for(var m=0;m<d.gHtmlSpans.length;++m){for(var b=d.gHtmlSpans[m],k=0;/¨C(\d+)C/.test(b);){var x=RegExp.$1;if(b=b.replace("¨C"+x+"C",d.gHtmlSpans[x]),k===10){console.error("maximum nesting of 10 spans reached!!!");break}++k}o=o.replace("¨C"+m+"C",b)}return o=d.converter._dispatch("unhashHTMLSpans.after",o,c,d),o}),r.subParser("hashPreCodeTags",function(o,c,d){o=d.converter._dispatch("hashPreCodeTags.before",o,c,d);var m=function(b,k,x,j){var H=x+r.subParser("encodeCode")(k,c,d)+j;return`

¨G`+(d.ghCodeBlocks.push({text:b,codeblock:H})-1)+`G

`};return o=r.helper.replaceRecursiveRegExp(o,m,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),o=d.converter._dispatch("hashPreCodeTags.after",o,c,d),o}),r.subParser("headers",function(o,c,d){o=d.converter._dispatch("headers.before",o,c,d);var m=isNaN(parseInt(c.headerLevelStart))?1:parseInt(c.headerLevelStart),b=c.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,k=c.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;o=o.replace(b,function(H,N){var _=r.subParser("spanGamut")(N,c,d),S=c.noHeaderId?"":' id="'+j(N)+'"',h=m,T="<h"+h+S+">"+_+"</h"+h+">";return r.subParser("hashBlock")(T,c,d)}),o=o.replace(k,function(H,N){var _=r.subParser("spanGamut")(N,c,d),S=c.noHeaderId?"":' id="'+j(N)+'"',h=m+1,T="<h"+h+S+">"+_+"</h"+h+">";return r.subParser("hashBlock")(T,c,d)});var x=c.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;o=o.replace(x,function(H,N,_){var S=_;c.customizedHeaderId&&(S=_.replace(/\s?\{([^{]+?)}\s*$/,""));var h=r.subParser("spanGamut")(S,c,d),T=c.noHeaderId?"":' id="'+j(_)+'"',z=m-1+N.length,D="<h"+z+T+">"+h+"</h"+z+">";return r.subParser("hashBlock")(D,c,d)});function j(H){var N,_;if(c.customizedHeaderId){var S=H.match(/\{([^{]+?)}\s*$/);S&&S[1]&&(H=S[1])}return N=H,r.helper.isString(c.prefixHeaderId)?_=c.prefixHeaderId:c.prefixHeaderId===!0?_="section-":_="",c.rawPrefixHeaderId||(N=_+N),c.ghCompatibleHeaderId?N=N.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():c.rawHeaderId?N=N.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():N=N.replace(/[^\w]/g,"").toLowerCase(),c.rawPrefixHeaderId&&(N=_+N),d.hashLinkCounts[N]?N=N+"-"+d.hashLinkCounts[N]++:d.hashLinkCounts[N]=1,N}return o=d.converter._dispatch("headers.after",o,c,d),o}),r.subParser("horizontalRule",function(o,c,d){o=d.converter._dispatch("horizontalRule.before",o,c,d);var m=r.subParser("hashBlock")("<hr />",c,d);return o=o.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,m),o=o.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,m),o=o.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,m),o=d.converter._dispatch("horizontalRule.after",o,c,d),o}),r.subParser("images",function(o,c,d){o=d.converter._dispatch("images.before",o,c,d);var m=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,b=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,k=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,x=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,j=/!\[([^\[\]]+)]()()()()()/g;function H(_,S,h,T,z,D,V,R){return T=T.replace(/\s/g,""),N(_,S,h,T,z,D,V,R)}function N(_,S,h,T,z,D,V,R){var P=d.gUrls,O=d.gTitles,W=d.gDimensions;if(h=h.toLowerCase(),R||(R=""),_.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)T="";else if(T===""||T===null)if((h===""||h===null)&&(h=S.toLowerCase().replace(/ ?\n/g," ")),T="#"+h,!r.helper.isUndefined(P[h]))T=P[h],r.helper.isUndefined(O[h])||(R=O[h]),r.helper.isUndefined(W[h])||(z=W[h].width,D=W[h].height);else return _;S=S.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),T=T.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var X='<img src="'+T+'" alt="'+S+'"';return R&&r.helper.isString(R)&&(R=R.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),X+=' title="'+R+'"'),z&&D&&(z=z==="*"?"auto":z,D=D==="*"?"auto":D,X+=' width="'+z+'"',X+=' height="'+D+'"'),X+=" />",X}return o=o.replace(x,N),o=o.replace(k,H),o=o.replace(b,N),o=o.replace(m,N),o=o.replace(j,N),o=d.converter._dispatch("images.after",o,c,d),o}),r.subParser("italicsAndBold",function(o,c,d){o=d.converter._dispatch("italicsAndBold.before",o,c,d);function m(b,k,x){return k+b+x}return c.literalMidWordUnderscores?(o=o.replace(/\b___(\S[\s\S]*?)___\b/g,function(b,k){return m(k,"<strong><em>","</em></strong>")}),o=o.replace(/\b__(\S[\s\S]*?)__\b/g,function(b,k){return m(k,"<strong>","</strong>")}),o=o.replace(/\b_(\S[\s\S]*?)_\b/g,function(b,k){return m(k,"<em>","</em>")})):(o=o.replace(/___(\S[\s\S]*?)___/g,function(b,k){return/\S$/.test(k)?m(k,"<strong><em>","</em></strong>"):b}),o=o.replace(/__(\S[\s\S]*?)__/g,function(b,k){return/\S$/.test(k)?m(k,"<strong>","</strong>"):b}),o=o.replace(/_([^\s_][\s\S]*?)_/g,function(b,k){return/\S$/.test(k)?m(k,"<em>","</em>"):b})),c.literalMidWordAsterisks?(o=o.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(b,k,x){return m(x,k+"<strong><em>","</em></strong>")}),o=o.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(b,k,x){return m(x,k+"<strong>","</strong>")}),o=o.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(b,k,x){return m(x,k+"<em>","</em>")})):(o=o.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(b,k){return/\S$/.test(k)?m(k,"<strong><em>","</em></strong>"):b}),o=o.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(b,k){return/\S$/.test(k)?m(k,"<strong>","</strong>"):b}),o=o.replace(/\*([^\s*][\s\S]*?)\*/g,function(b,k){return/\S$/.test(k)?m(k,"<em>","</em>"):b})),o=d.converter._dispatch("italicsAndBold.after",o,c,d),o}),r.subParser("lists",function(o,c,d){function m(x,j){d.gListLevel++,x=x.replace(/\n{2,}$/,`
`),x+="¨0";var H=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,N=/\n[ \t]*\n(?!¨0)/.test(x);return c.disableForced4SpacesIndentedSublists&&(H=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),x=x.replace(H,function(_,S,h,T,z,D,V){V=V&&V.trim()!=="";var R=r.subParser("outdent")(z,c,d),P="";return D&&c.tasklists&&(P=' class="task-list-item" style="list-style-type: none;"',R=R.replace(/^[ \t]*\[(x|X| )?]/m,function(){var O='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return V&&(O+=" checked"),O+=">",O})),R=R.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(O){return"¨A"+O}),S||R.search(/\n{2,}/)>-1?(R=r.subParser("githubCodeBlocks")(R,c,d),R=r.subParser("blockGamut")(R,c,d)):(R=r.subParser("lists")(R,c,d),R=R.replace(/\n$/,""),R=r.subParser("hashHTMLBlocks")(R,c,d),R=R.replace(/\n\n+/g,`

`),N?R=r.subParser("paragraphs")(R,c,d):R=r.subParser("spanGamut")(R,c,d)),R=R.replace("¨A",""),R="<li"+P+">"+R+`</li>
`,R}),x=x.replace(/¨0/g,""),d.gListLevel--,j&&(x=x.replace(/\s+$/,"")),x}function b(x,j){if(j==="ol"){var H=x.match(/^ *(\d+)\./);if(H&&H[1]!=="1")return' start="'+H[1]+'"'}return""}function k(x,j,H){var N=c.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,_=c.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,S=j==="ul"?N:_,h="";if(x.search(S)!==-1)(function z(D){var V=D.search(S),R=b(x,j);V!==-1?(h+=`

<`+j+R+`>
`+m(D.slice(0,V),!!H)+"</"+j+`>
`,j=j==="ul"?"ol":"ul",S=j==="ul"?N:_,z(D.slice(V))):h+=`

<`+j+R+`>
`+m(D,!!H)+"</"+j+`>
`})(x);else{var T=b(x,j);h=`

<`+j+T+`>
`+m(x,!!H)+"</"+j+`>
`}return h}return o=d.converter._dispatch("lists.before",o,c,d),o+="¨0",d.gListLevel?o=o.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(x,j,H){var N=H.search(/[*+-]/g)>-1?"ul":"ol";return k(j,N,!0)}):o=o.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(x,j,H,N){var _=N.search(/[*+-]/g)>-1?"ul":"ol";return k(H,_,!1)}),o=o.replace(/¨0/,""),o=d.converter._dispatch("lists.after",o,c,d),o}),r.subParser("metadata",function(o,c,d){if(!c.metadata)return o;o=d.converter._dispatch("metadata.before",o,c,d);function m(b){d.metadata.raw=b,b=b.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),b=b.replace(/\n {4}/g," "),b.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(k,x,j){return d.metadata.parsed[x]=j,""})}return o=o.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(b,k,x){return m(x),"¨M"}),o=o.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(b,k,x){return k&&(d.metadata.format=k),m(x),"¨M"}),o=o.replace(/¨M/g,""),o=d.converter._dispatch("metadata.after",o,c,d),o}),r.subParser("outdent",function(o,c,d){return o=d.converter._dispatch("outdent.before",o,c,d),o=o.replace(/^(\t|[ ]{1,4})/gm,"¨0"),o=o.replace(/¨0/g,""),o=d.converter._dispatch("outdent.after",o,c,d),o}),r.subParser("paragraphs",function(o,c,d){o=d.converter._dispatch("paragraphs.before",o,c,d),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,"");for(var m=o.split(/\n{2,}/g),b=[],k=m.length,x=0;x<k;x++){var j=m[x];j.search(/¨(K|G)(\d+)\1/g)>=0?b.push(j):j.search(/\S/)>=0&&(j=r.subParser("spanGamut")(j,c,d),j=j.replace(/^([ \t]*)/g,"<p>"),j+="</p>",b.push(j))}for(k=b.length,x=0;x<k;x++){for(var H="",N=b[x],_=!1;/¨(K|G)(\d+)\1/.test(N);){var S=RegExp.$1,h=RegExp.$2;S==="K"?H=d.gHtmlBlocks[h]:_?H=r.subParser("encodeCode")(d.ghCodeBlocks[h].text,c,d):H=d.ghCodeBlocks[h].codeblock,H=H.replace(/\$/g,"$$$$"),N=N.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,H),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(N)&&(_=!0)}b[x]=N}return o=b.join(`
`),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),d.converter._dispatch("paragraphs.after",o,c,d)}),r.subParser("runExtension",function(o,c,d,m){if(o.filter)c=o.filter(c,m.converter,d);else if(o.regex){var b=o.regex;b instanceof RegExp||(b=new RegExp(b,"g")),c=c.replace(b,o.replace)}return c}),r.subParser("spanGamut",function(o,c,d){return o=d.converter._dispatch("spanGamut.before",o,c,d),o=r.subParser("codeSpans")(o,c,d),o=r.subParser("escapeSpecialCharsWithinTagAttributes")(o,c,d),o=r.subParser("encodeBackslashEscapes")(o,c,d),o=r.subParser("images")(o,c,d),o=r.subParser("anchors")(o,c,d),o=r.subParser("autoLinks")(o,c,d),o=r.subParser("simplifiedAutoLinks")(o,c,d),o=r.subParser("emoji")(o,c,d),o=r.subParser("underline")(o,c,d),o=r.subParser("italicsAndBold")(o,c,d),o=r.subParser("strikethrough")(o,c,d),o=r.subParser("ellipsis")(o,c,d),o=r.subParser("hashHTMLSpans")(o,c,d),o=r.subParser("encodeAmpsAndAngles")(o,c,d),c.simpleLineBreaks?/\n\n¨K/.test(o)||(o=o.replace(/\n+/g,`<br />
`)):o=o.replace(/  +\n/g,`<br />
`),o=d.converter._dispatch("spanGamut.after",o,c,d),o}),r.subParser("strikethrough",function(o,c,d){function m(b){return c.simplifiedAutoLink&&(b=r.subParser("simplifiedAutoLinks")(b,c,d)),"<del>"+b+"</del>"}return c.strikethrough&&(o=d.converter._dispatch("strikethrough.before",o,c,d),o=o.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(b,k){return m(k)}),o=d.converter._dispatch("strikethrough.after",o,c,d)),o}),r.subParser("stripLinkDefinitions",function(o,c,d){var m=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,b=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;o+="¨0";var k=function(x,j,H,N,_,S,h){return j=j.toLowerCase(),o.toLowerCase().split(j).length-1<2?x:(H.match(/^data:.+?\/.+?;base64,/)?d.gUrls[j]=H.replace(/\s/g,""):d.gUrls[j]=r.subParser("encodeAmpsAndAngles")(H,c,d),S?S+h:(h&&(d.gTitles[j]=h.replace(/"|'/g,"&quot;")),c.parseImgDimensions&&N&&_&&(d.gDimensions[j]={width:N,height:_}),""))};return o=o.replace(b,k),o=o.replace(m,k),o=o.replace(/¨0/,""),o}),r.subParser("tables",function(o,c,d){if(!c.tables)return o;var m=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,b=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function k(_){return/^:[ \t]*--*$/.test(_)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(_)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(_)?' style="text-align:center;"':""}function x(_,S){var h="";return _=_.trim(),(c.tablesHeaderId||c.tableHeaderId)&&(h=' id="'+_.replace(/ /g,"_").toLowerCase()+'"'),_=r.subParser("spanGamut")(_,c,d),"<th"+h+S+">"+_+`</th>
`}function j(_,S){var h=r.subParser("spanGamut")(_,c,d);return"<td"+S+">"+h+`</td>
`}function H(_,S){for(var h=`<table>
<thead>
<tr>
`,T=_.length,z=0;z<T;++z)h+=_[z];for(h+=`</tr>
</thead>
<tbody>
`,z=0;z<S.length;++z){h+=`<tr>
`;for(var D=0;D<T;++D)h+=S[z][D];h+=`</tr>
`}return h+=`</tbody>
</table>
`,h}function N(_){var S,h=_.split(`
`);for(S=0;S<h.length;++S)/^ {0,3}\|/.test(h[S])&&(h[S]=h[S].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(h[S])&&(h[S]=h[S].replace(/\|[ \t]*$/,"")),h[S]=r.subParser("codeSpans")(h[S],c,d);var T=h[0].split("|").map(function(X){return X.trim()}),z=h[1].split("|").map(function(X){return X.trim()}),D=[],V=[],R=[],P=[];for(h.shift(),h.shift(),S=0;S<h.length;++S)h[S].trim()!==""&&D.push(h[S].split("|").map(function(X){return X.trim()}));if(T.length<z.length)return _;for(S=0;S<z.length;++S)R.push(k(z[S]));for(S=0;S<T.length;++S)r.helper.isUndefined(R[S])&&(R[S]=""),V.push(x(T[S],R[S]));for(S=0;S<D.length;++S){for(var O=[],W=0;W<V.length;++W)r.helper.isUndefined(D[S][W]),O.push(j(D[S][W],R[W]));P.push(O)}return H(V,P)}return o=d.converter._dispatch("tables.before",o,c,d),o=o.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),o=o.replace(m,N),o=o.replace(b,N),o=d.converter._dispatch("tables.after",o,c,d),o}),r.subParser("underline",function(o,c,d){return c.underline&&(o=d.converter._dispatch("underline.before",o,c,d),c.literalMidWordUnderscores?(o=o.replace(/\b___(\S[\s\S]*?)___\b/g,function(m,b){return"<u>"+b+"</u>"}),o=o.replace(/\b__(\S[\s\S]*?)__\b/g,function(m,b){return"<u>"+b+"</u>"})):(o=o.replace(/___(\S[\s\S]*?)___/g,function(m,b){return/\S$/.test(b)?"<u>"+b+"</u>":m}),o=o.replace(/__(\S[\s\S]*?)__/g,function(m,b){return/\S$/.test(b)?"<u>"+b+"</u>":m})),o=o.replace(/(_)/g,r.helper.escapeCharactersCallback),o=d.converter._dispatch("underline.after",o,c,d)),o}),r.subParser("unescapeSpecialChars",function(o,c,d){return o=d.converter._dispatch("unescapeSpecialChars.before",o,c,d),o=o.replace(/¨E(\d+)E/g,function(m,b){var k=parseInt(b);return String.fromCharCode(k)}),o=d.converter._dispatch("unescapeSpecialChars.after",o,c,d),o}),r.subParser("makeMarkdown.blockquote",function(o,c){var d="";if(o.hasChildNodes())for(var m=o.childNodes,b=m.length,k=0;k<b;++k){var x=r.subParser("makeMarkdown.node")(m[k],c);x!==""&&(d+=x)}return d=d.trim(),d="> "+d.split(`
`).join(`
> `),d}),r.subParser("makeMarkdown.codeBlock",function(o,c){var d=o.getAttribute("language"),m=o.getAttribute("precodenum");return"```"+d+`
`+c.preList[m]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(o){return"`"+o.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(o,c){var d="";if(o.hasChildNodes()){d+="*";for(var m=o.childNodes,b=m.length,k=0;k<b;++k)d+=r.subParser("makeMarkdown.node")(m[k],c);d+="*"}return d}),r.subParser("makeMarkdown.header",function(o,c,d){var m=new Array(d+1).join("#"),b="";if(o.hasChildNodes()){b=m+" ";for(var k=o.childNodes,x=k.length,j=0;j<x;++j)b+=r.subParser("makeMarkdown.node")(k[j],c)}return b}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(o){var c="";return o.hasAttribute("src")&&(c+="!["+o.getAttribute("alt")+"](",c+="<"+o.getAttribute("src")+">",o.hasAttribute("width")&&o.hasAttribute("height")&&(c+=" ="+o.getAttribute("width")+"x"+o.getAttribute("height")),o.hasAttribute("title")&&(c+=' "'+o.getAttribute("title")+'"'),c+=")"),c}),r.subParser("makeMarkdown.links",function(o,c){var d="";if(o.hasChildNodes()&&o.hasAttribute("href")){var m=o.childNodes,b=m.length;d="[";for(var k=0;k<b;++k)d+=r.subParser("makeMarkdown.node")(m[k],c);d+="](",d+="<"+o.getAttribute("href")+">",o.hasAttribute("title")&&(d+=' "'+o.getAttribute("title")+'"'),d+=")"}return d}),r.subParser("makeMarkdown.list",function(o,c,d){var m="";if(!o.hasChildNodes())return"";for(var b=o.childNodes,k=b.length,x=o.getAttribute("start")||1,j=0;j<k;++j)if(!(typeof b[j].tagName>"u"||b[j].tagName.toLowerCase()!=="li")){var H="";d==="ol"?H=x.toString()+". ":H="- ",m+=H+r.subParser("makeMarkdown.listItem")(b[j],c),++x}return m+=`
<!-- -->
`,m.trim()}),r.subParser("makeMarkdown.listItem",function(o,c){for(var d="",m=o.childNodes,b=m.length,k=0;k<b;++k)d+=r.subParser("makeMarkdown.node")(m[k],c);return/\n$/.test(d)?d=d.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):d+=`
`,d}),r.subParser("makeMarkdown.node",function(o,c,d){d=d||!1;var m="";if(o.nodeType===3)return r.subParser("makeMarkdown.txt")(o,c);if(o.nodeType===8)return"<!--"+o.data+`-->

`;if(o.nodeType!==1)return"";var b=o.tagName.toLowerCase();switch(b){case"h1":d||(m=r.subParser("makeMarkdown.header")(o,c,1)+`

`);break;case"h2":d||(m=r.subParser("makeMarkdown.header")(o,c,2)+`

`);break;case"h3":d||(m=r.subParser("makeMarkdown.header")(o,c,3)+`

`);break;case"h4":d||(m=r.subParser("makeMarkdown.header")(o,c,4)+`

`);break;case"h5":d||(m=r.subParser("makeMarkdown.header")(o,c,5)+`

`);break;case"h6":d||(m=r.subParser("makeMarkdown.header")(o,c,6)+`

`);break;case"p":d||(m=r.subParser("makeMarkdown.paragraph")(o,c)+`

`);break;case"blockquote":d||(m=r.subParser("makeMarkdown.blockquote")(o,c)+`

`);break;case"hr":d||(m=r.subParser("makeMarkdown.hr")(o,c)+`

`);break;case"ol":d||(m=r.subParser("makeMarkdown.list")(o,c,"ol")+`

`);break;case"ul":d||(m=r.subParser("makeMarkdown.list")(o,c,"ul")+`

`);break;case"precode":d||(m=r.subParser("makeMarkdown.codeBlock")(o,c)+`

`);break;case"pre":d||(m=r.subParser("makeMarkdown.pre")(o,c)+`

`);break;case"table":d||(m=r.subParser("makeMarkdown.table")(o,c)+`

`);break;case"code":m=r.subParser("makeMarkdown.codeSpan")(o,c);break;case"em":case"i":m=r.subParser("makeMarkdown.emphasis")(o,c);break;case"strong":case"b":m=r.subParser("makeMarkdown.strong")(o,c);break;case"del":m=r.subParser("makeMarkdown.strikethrough")(o,c);break;case"a":m=r.subParser("makeMarkdown.links")(o,c);break;case"img":m=r.subParser("makeMarkdown.image")(o,c);break;default:m=o.outerHTML+`

`}return m}),r.subParser("makeMarkdown.paragraph",function(o,c){var d="";if(o.hasChildNodes())for(var m=o.childNodes,b=m.length,k=0;k<b;++k)d+=r.subParser("makeMarkdown.node")(m[k],c);return d=d.trim(),d}),r.subParser("makeMarkdown.pre",function(o,c){var d=o.getAttribute("prenum");return"<pre>"+c.preList[d]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(o,c){var d="";if(o.hasChildNodes()){d+="~~";for(var m=o.childNodes,b=m.length,k=0;k<b;++k)d+=r.subParser("makeMarkdown.node")(m[k],c);d+="~~"}return d}),r.subParser("makeMarkdown.strong",function(o,c){var d="";if(o.hasChildNodes()){d+="**";for(var m=o.childNodes,b=m.length,k=0;k<b;++k)d+=r.subParser("makeMarkdown.node")(m[k],c);d+="**"}return d}),r.subParser("makeMarkdown.table",function(o,c){var d="",m=[[],[]],b=o.querySelectorAll("thead>tr>th"),k=o.querySelectorAll("tbody>tr"),x,j;for(x=0;x<b.length;++x){var H=r.subParser("makeMarkdown.tableCell")(b[x],c),N="---";if(b[x].hasAttribute("style")){var _=b[x].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(_){case"text-align:left;":N=":---";break;case"text-align:right;":N="---:";break;case"text-align:center;":N=":---:";break}}m[0][x]=H.trim(),m[1][x]=N}for(x=0;x<k.length;++x){var S=m.push([])-1,h=k[x].getElementsByTagName("td");for(j=0;j<b.length;++j){var T=" ";typeof h[j]<"u"&&(T=r.subParser("makeMarkdown.tableCell")(h[j],c)),m[S].push(T)}}var z=3;for(x=0;x<m.length;++x)for(j=0;j<m[x].length;++j){var D=m[x][j].length;D>z&&(z=D)}for(x=0;x<m.length;++x){for(j=0;j<m[x].length;++j)x===1?m[x][j].slice(-1)===":"?m[x][j]=r.helper.padEnd(m[x][j].slice(-1),z-1,"-")+":":m[x][j]=r.helper.padEnd(m[x][j],z,"-"):m[x][j]=r.helper.padEnd(m[x][j],z);d+="| "+m[x].join(" | ")+` |
`}return d.trim()}),r.subParser("makeMarkdown.tableCell",function(o,c){var d="";if(!o.hasChildNodes())return"";for(var m=o.childNodes,b=m.length,k=0;k<b;++k)d+=r.subParser("makeMarkdown.node")(m[k],c,!0);return d.trim()}),r.subParser("makeMarkdown.txt",function(o){var c=o.nodeValue;return c=c.replace(/ +/g," "),c=c.replace(/¨NBSP;/g," "),c=r.helper.unescapeHTMLEntities(c),c=c.replace(/([*_~|`])/g,"\\$1"),c=c.replace(/^(\s*)>/g,"\\$1>"),c=c.replace(/^#/gm,"\\#"),c=c.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),c=c.replace(/^( {0,3}\d+)\./gm,"$1\\."),c=c.replace(/^( {0,3})([+-])/gm,"$1\\$2"),c=c.replace(/]([\s]*)\(/g,"\\]$1\\("),c=c.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),c});var $=this;e.exports?e.exports=r:$.showdown=r}).call(Gu)})(du);var og=du.exports;const ig=Uu(og);var no={},ag=Ms;Object.defineProperty(no,"__esModule",{value:!0});var cu=no.default=void 0,ug=ag(Es()),dg=p,cg=(0,ug.default)((0,dg.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41l-2.33-2.35zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12-2.44 2.44z"}),"AutoFixHigh");cu=no.default=cg;function lg(e){return typeof e=="string"}function fg(e,t,n){return e===void 0||lg(e)?t:te({},t,{ownerState:te({},t.ownerState,n)})}function ri(e,t,n=(r,s)=>r===s){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}const hg={disableDefaultClasses:!1},pg=E.createContext(hg);function ro(e){const{disableDefaultClasses:t}=E.useContext(pg);return n=>t?"":e(n)}function sn(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function gg(e,t,n){return typeof e=="function"?e(t,n):e}function mg(e){const{rootElementName:t="",componentName:n}=e,[r,s]=E.useState(t.toUpperCase()),a=E.useCallback(i=>{var u;s((u=i==null?void 0:i.tagName)!=null?u:"")},[]);return[r,a]}function si(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function yg(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:a}=e;if(!t){const w=ho(n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),A=te({},n==null?void 0:n.style,s==null?void 0:s.style,r==null?void 0:r.style),C=te({},n,s,r);return w.length>0&&(C.className=w),Object.keys(A).length>0&&(C.style=A),{props:C,internalRef:void 0}}const i=sn(te({},s,r)),u=si(r),l=si(s),f=t(i),g=ho(f==null?void 0:f.className,n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),y=te({},f==null?void 0:f.style,n==null?void 0:n.style,s==null?void 0:s.style,r==null?void 0:r.style),v=te({},f,n,l,u);return g.length>0&&(v.className=g),Object.keys(y).length>0&&(v.style=y),{props:v,internalRef:f.ref}}const bg=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function so(e){var t;const{elementType:n,externalSlotProps:r,ownerState:s,skipResolvingSlotProps:a=!1}=e,i=gr(e,bg),u=a?{}:gg(r,s),{props:l,internalRef:f}=yg(te({},i,{externalSlotProps:u})),g=Tn(f,u==null?void 0:u.ref,(t=e.additionalProps)==null?void 0:t.ref);return fg(n,te({},l,{ref:g}),s)}const lu="base";function wg(e){return`${lu}--${e}`}function _g(e,t){return`${lu}-${e}-${t}`}function Cr(e,t){const n=qu[t];return n?wg(n):_g(e,t)}function Er(e,t){const n={};return t.forEach(r=>{n[r]=Cr(e,r)}),n}const fu="Tabs";function vg(e){return Cr(fu,e)}Er(fu,["root","horizontal","vertical"]);const oo=E.createContext(null);function xg(e){const t=Array.from(e.keys()).map(n=>{const r=e.get(n);return{key:n,subitem:r}});return t.sort((n,r)=>{const s=n.subitem.ref.current,a=r.subitem.ref.current;return s===null||a===null||s===a?0:s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(n=>[n.key,n.subitem]))}function hu(){const[e,t]=E.useState(new Map),n=E.useRef(new Set),r=E.useCallback(function(f){n.current.delete(f),t(g=>{const y=new Map(g);return y.delete(f),y})},[]),s=E.useCallback(function(f,g){let y;return typeof f=="function"?y=f(n.current):y=f,n.current.add(y),t(v=>{const w=new Map(v);return w.set(y,g),w}),{id:y,deregister:()=>r(y)}},[r]),a=E.useMemo(()=>xg(e),[e]),i=E.useCallback(function(f){return Array.from(a.keys()).indexOf(f)},[a]);return{contextValue:E.useMemo(()=>({getItemIndex:i,registerItem:s,totalSubitemCount:e.size}),[i,s,e.size]),subitems:a}}function kg(e,t){const n=E.useContext(oo);if(n===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:r}=n,[s,a]=E.useState(typeof e=="function"?void 0:e);return Ku(()=>{const{id:i,deregister:u}=r(e,t);return a(i),u},[r,t,e]),{id:s,index:s!==void 0?n.getItemIndex(s):-1,totalItemCount:n.totalSubitemCount}}function Sg(e){const{value:t,defaultValue:n,onChange:r,orientation:s="horizontal",direction:a="ltr",selectionFollowsFocus:i=!1}=e,[u,l]=bd({controlled:t,default:n,name:"Tabs",state:"value"}),f=E.useCallback((I,M)=>{l(M),r==null||r(I,M)},[r,l]),{subitems:g,contextValue:y}=hu(),v=E.useRef(()=>{}),w=E.useCallback(I=>{var M;return(M=g.get(I))==null?void 0:M.id},[g]),A=E.useCallback(I=>v.current(I),[]),C=E.useCallback(I=>{v.current=I},[]);return{contextValue:te({direction:a,getTabId:A,getTabPanelId:w,onSelected:f,orientation:s,registerTabIdLookup:C,selectionFollowsFocus:i,value:u},y)}}const pu=E.createContext(null);function gu(){const e=E.useContext(pu);if(e==null)throw new Error("No TabsContext provided");return e}function Cg(e){const{value:t,children:n}=e,{direction:r,getItemIndex:s,onSelected:a,orientation:i,registerItem:u,registerTabIdLookup:l,selectionFollowsFocus:f,totalSubitemCount:g,value:y,getTabId:v,getTabPanelId:w}=t,A=E.useMemo(()=>({getItemIndex:s,registerItem:u,totalSubitemCount:g}),[u,s,g]),C=E.useMemo(()=>({direction:r,getTabId:v,getTabPanelId:w,onSelected:a,orientation:i,registerTabIdLookup:l,selectionFollowsFocus:f,value:y}),[r,v,w,a,i,l,f,y]);return p.jsx(oo.Provider,{value:A,children:p.jsx(pu.Provider,{value:C,children:n})})}const Eg=["children","value","defaultValue","orientation","direction","onChange","selectionFollowsFocus","slotProps","slots"],Mg=e=>{const{orientation:t}=e;return js({root:["root",t]},ro(vg))},mu=E.forwardRef(function(t,n){var r;const{children:s,orientation:a="horizontal",direction:i="ltr",slotProps:u={},slots:l={}}=t,f=gr(t,Eg),g=te({},t,{orientation:a,direction:i}),{contextValue:y}=Sg(g),v=Mg(g),w=(r=l.root)!=null?r:"div",A=so({elementType:w,externalSlotProps:u.root,externalForwardedProps:f,additionalProps:{ref:n},ownerState:g,className:v.root});return p.jsx(w,te({},A,{children:p.jsx(Cg,{value:y,children:s})}))}),yu=Dn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new on({key:new an("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const a=this.editor.isEmpty;return e.descendants((i,u)=>{const l=r>=u&&r<=u+i.nodeSize,f=!i.isLeaf&&dd(i);if((l||!this.options.showOnlyCurrent)&&f){const g=[this.options.emptyNodeClass];a&&g.push(this.options.emptyEditorClass);const y=$s.node(u,u+i.nodeSize,{class:g.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:u,hasAnchor:l}):this.options.placeholder});s.push(y)}return this.options.includeChildren}),zs.create(e,s)}}})]}}),jg=/^\s*>\s$/,Tg=We.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",we(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[vn({find:jg,type:this.type})]}}),Ag=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Ig=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Ng=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Dg=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Lg=yr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",we(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Jt({find:Ag,type:this.type}),Jt({find:Ng,type:this.type})]},addPasteRules(){return[Qt({find:Ig,type:this.type}),Qt({find:Dg,type:this.type})]}}),Rg="listItem",oi="textStyle",ii=/^\s*([-+*])\s$/,$g=We.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",we(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Rg,this.editor.getAttributes(oi)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=vn({find:ii,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=vn({find:ii,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(oi),editor:this.editor})),[e]}}),zg=/(^|[^`])`([^`]+)`(?!`)/,Hg=/(^|[^`])`([^`]+)`(?!`)/g,Vg=yr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",we(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Jt({find:zg,type:this.type})]},addPasteRules(){return[Qt({find:Hg,type:this.type})]}}),Pg=/^```([a-z]+)?[\s\n]$/,Bg=/^~~~([a-z]+)?[\s\n]$/,Og=We.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,a=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",we(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!a||!i?!1:e.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:a}=n;if(!a||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?e.commands.command(({tr:f})=>(f.setSelection(xn.near(r.resolve(u))),!0)):e.commands.exitCode()}}},addInputRules(){return[us({find:Pg,type:this.type,getAttributes:e=>({language:e[1]})}),us({find:Bg,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new on({key:new an("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,a=s==null?void 0:s.mode;if(!n||!a)return!1;const{tr:i,schema:u}=e.state,l=u.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:a},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(Kt.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),Fg=We.create({name:"doc",topNode:!0,content:"block+"});function Wg(e={}){return new on({view(t){return new Gg(t,e)}})}class Gg{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let a=i=>{this[s](i)};return t.dom.addEventListener(s,a),{name:s,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,a=s.getBoundingClientRect(),i=a.width/s.offsetWidth,u=a.height/s.offsetHeight;if(n){let y=t.nodeBefore,v=t.nodeAfter;if(y||v){let w=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(w){let A=w.getBoundingClientRect(),C=y?A.bottom:A.top;y&&v&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let I=this.width/2*u;r={left:A.left,right:A.right,top:C-I,bottom:C+I}}}}if(!r){let y=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*i;r={left:y.left-v,right:y.left+v,top:y.top,bottom:y.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,g;if(!l||l==document.body&&getComputedStyle(l).position=="static")f=-pageXOffset,g=-pageYOffset;else{let y=l.getBoundingClientRect(),v=y.width/l.offsetWidth,w=y.height/l.offsetHeight;f=y.left-l.scrollLeft*v,g=y.top-l.scrollTop*w}this.element.style.left=(r.left-f)/i+"px",this.element.style.top=(r.top-g)/u+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,a=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!a){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=cd(this.editorView.state.doc,i,this.editorView.dragging.slice);u!=null&&(i=u)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const Ug=Dn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Wg(this.options)]}});class ge extends xn{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return ge.valid(r)?new ge(r):xn.near(r)}content(){return ji.empty}eq(t){return t instanceof ge&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ge(t.resolve(n.pos))}getBookmark(){return new io(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!qg(t)||!Kg(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&ge.valid(t))return t;let s=t.pos,a=null;for(let i=t.depth;;i--){let u=t.node(i);if(n>0?t.indexAfter(i)<u.childCount:t.index(i)>0){a=u.child(n>0?t.indexAfter(i):t.index(i)-1);break}else if(i==0)return null;s+=n;let l=t.doc.resolve(s);if(ge.valid(l))return l}for(;;){let i=n>0?a.firstChild:a.lastChild;if(!i){if(a.isAtom&&!a.isText&&!Hs.isSelectable(a)){t=t.doc.resolve(s+a.nodeSize*n),r=!1;continue e}break}a=i,s+=n;let u=t.doc.resolve(s);if(ge.valid(u))return u}return null}}}ge.prototype.visible=!1;ge.findFrom=ge.findGapCursorFrom;xn.jsonID("gapcursor",ge);class io{constructor(t){this.pos=t}map(t){return new io(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return ge.valid(n)?new ge(n):xn.near(n)}}function qg(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Kg(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Xg(){return new on({props:{decorations:Qg,createSelectionBetween(e,t,n){return t.pos==n.pos&&ge.valid(n)?new ge(n):null},handleClick:Zg,handleKeyDown:Yg,handleDOMEvents:{beforeinput:Jg}}})}const Yg=ld({ArrowLeft:Yn("horiz",-1),ArrowRight:Yn("horiz",1),ArrowUp:Yn("vert",-1),ArrowDown:Yn("vert",1)});function Yn(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,a){let i=r.selection,u=t>0?i.$to:i.$from,l=i.empty;if(i instanceof Kt){if(!a.endOfTextblock(n)||u.depth==0)return!1;l=!1,u=r.doc.resolve(t>0?u.after():u.before())}let f=ge.findGapCursorFrom(u,t,l);return f?(s&&s(r.tr.setSelection(new ge(f))),!0):!1}}function Zg(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!ge.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Hs.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new ge(r))),!0)}function Jg(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof ge))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=bo.empty;for(let i=r.length-1;i>=0;i--)s=bo.from(r[i].createAndFill(null,s));let a=e.state.tr.replace(n.pos,n.pos,new ji(s,0,0));return a.setSelection(Kt.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function Qg(e){if(!(e.selection instanceof ge))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",zs.create(e.doc,[$s.widget(e.selection.head,t,{key:"gapcursor"})])}const em=Dn.create({name:"gapCursor",addProseMirrorPlugins(){return[Xg()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=fd(hd(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),tm=We.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",we(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:a}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:u}=r.extensionManager,l=a||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:f,dispatch:g})=>{if(g&&l&&i){const y=l.filter(v=>u.includes(v.type.name));f.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),nm=We.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,we(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>us({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var pr=200,Se=function(){};Se.prototype.append=function(t){return t.length?(t=Se.from(t),!this.length&&t||t.length<pr&&this.leafAppend(t)||this.length<pr&&t.leafPrepend(this)||this.appendInner(t)):this};Se.prototype.prepend=function(t){return t.length?Se.from(t).append(this):this};Se.prototype.appendInner=function(t){return new rm(this,t)};Se.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Se.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Se.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Se.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Se.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(a,i){return s.push(t(a,i))},n,r),s};Se.from=function(t){return t instanceof Se?t:t&&t.length?new bu(t):Se.empty};var bu=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new t(this.values.slice(s,a))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,a,i,u){for(var l=a;l<i;l++)if(s(this.values[l],u+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,a,i,u){for(var l=a-1;l>=i;l--)if(s(this.values[l],u+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=pr)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=pr)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Se);Se.empty=new bu([]);var rm=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,a,i){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(a,u),i)===!1||a>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,a)-u,i+u)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,a,i){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(a,u)-u,i+u)===!1||a<u&&this.left.forEachInvertedInner(r,Math.min(s,u),a,i)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(r,s):r>=a?this.right.slice(r-a,s-a):this.left.slice(r,a).append(this.right.slice(0,s-a))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Se);const sm=500;class Ke{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,a;n&&(s=this.remapping(r,this.items.length),a=s.maps.length);let i=t.tr,u,l,f=[],g=[];return this.items.forEach((y,v)=>{if(!y.step){s||(s=this.remapping(r,v+1),a=s.maps.length),a--,g.push(y);return}if(s){g.push(new rt(y.map));let w=y.step.map(s.slice(a)),A;w&&i.maybeStep(w).doc&&(A=i.mapping.maps[i.mapping.maps.length-1],f.push(new rt(A,void 0,void 0,f.length+g.length))),a--,A&&s.appendMap(A,a)}else i.maybeStep(y.step);if(y.selection)return u=s?y.selection.map(s.slice(a)):y.selection,l=new Ke(this.items.slice(0,r).append(g.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:u}}addTransform(t,n,r,s){let a=[],i=this.eventCount,u=this.items,l=!s&&u.length?u.get(u.length-1):null;for(let g=0;g<t.steps.length;g++){let y=t.steps[g].invert(t.docs[g]),v=new rt(t.mapping.maps[g],y,n),w;(w=l&&l.merge(v))&&(v=w,g?a.pop():u=u.slice(0,u.length-1)),a.push(v),n&&(i++,n=void 0),s||(l=v)}let f=i-r.depth;return f>im&&(u=om(u,f),i-=f),new Ke(u.append(a),i)}remapping(t,n){let r=new pd;return this.items.forEach((s,a)=>{let i=s.mirrorOffset!=null&&a-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},t,n),r}addMaps(t){return this.eventCount==0?this:new Ke(this.items.append(t.map(n=>new rt(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),a=t.mapping,i=t.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},s);let l=n;this.items.forEach(v=>{let w=a.getMirror(--l);if(w==null)return;i=Math.min(i,w);let A=a.maps[w];if(v.step){let C=t.steps[w].invert(t.docs[w]),I=v.selection&&v.selection.map(a.slice(l+1,w));I&&u++,r.push(new rt(A,C,I))}else r.push(new rt(A))},s);let f=[];for(let v=n;v<i;v++)f.push(new rt(a.maps[v]));let g=this.items.slice(0,s).append(f).append(r),y=new Ke(g,u);return y.emptyItemCount()>sm&&(y=y.compress(this.items.length-r.length)),y}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],a=0;return this.items.forEach((i,u)=>{if(u>=t)s.push(i),i.selection&&a++;else if(i.step){let l=i.step.map(n.slice(r)),f=l&&l.getMap();if(r--,f&&n.appendMap(f,r),l){let g=i.selection&&i.selection.map(n.slice(r));g&&a++;let y=new rt(f.invert(),l,g),v,w=s.length-1;(v=s.length&&s[w].merge(y))?s[w]=v:s.push(y)}}else i.map&&r--},this.items.length,0),new Ke(Se.from(s.reverse()),a)}}Ke.empty=new Ke(Se.empty,0);function om(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class rt{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new rt(n.getMap().invert(),n,this.selection)}}}class St{constructor(t,n,r,s,a){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=a}}const im=20;function am(e,t,n,r){let s=n.getMeta(zt),a;if(s)return s.historyState;n.getMeta(cm)&&(e=new St(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(i&&i.getMeta(zt))return i.getMeta(zt).redo?new St(e.done.addTransform(n,void 0,r,rr(t)),e.undone,ai(n.mapping.maps),e.prevTime,e.prevComposition):new St(e.done,e.undone.addTransform(n,void 0,r,rr(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),l=e.prevTime==0||!i&&e.prevComposition!=u&&(e.prevTime<(n.time||0)-r.newGroupDelay||!um(n,e.prevRanges)),f=i?es(e.prevRanges,n.mapping):ai(n.mapping.maps);return new St(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,rr(t)),Ke.empty,f,n.time,u??e.prevComposition)}else return(a=n.getMeta("rebased"))?new St(e.done.rebased(n,a),e.undone.rebased(n,a),es(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new St(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),es(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function um(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let a=0;a<t.length;a+=2)r<=t[a+1]&&s>=t[a]&&(n=!0)}),n}function ai(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,a,i)=>t.push(a,i));return t}function es(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),a=t.map(e[r+1],-1);s<=a&&n.push(s,a)}return n}function dm(e,t,n){let r=rr(t),s=zt.get(t).spec.config,a=(n?e.undone:e.done).popEvent(t,r);if(!a)return null;let i=a.selection.resolve(a.transform.doc),u=(n?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),s,r),l=new St(n?u:a.remaining,n?a.remaining:u,null,0,-1);return a.transform.setSelection(i).setMeta(zt,{redo:n,historyState:l})}let ts=!1,ui=null;function rr(e){let t=e.plugins;if(ui!=t){ts=!1,ui=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){ts=!0;break}}return ts}const zt=new an("history"),cm=new an("closeHistory");function lm(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new on({key:zt,state:{init(){return new St(Ke.empty,Ke.empty,null,0,-1)},apply(t,n,r){return am(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?_u:r=="historyRedo"?vu:null;return s?(n.preventDefault(),s(t.state,t.dispatch)):!1}}}})}function wu(e,t){return(n,r)=>{let s=zt.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let a=dm(s,n,e);a&&r(t?a.scrollIntoView():a)}return!0}}const _u=wu(!1,!0),vu=wu(!0,!0),fm=Dn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>_u(e,t),redo:()=>({state:e,dispatch:t})=>vu(e,t)}},addProseMirrorPlugins(){return[lm(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),hm=We.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",we(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{selection:n}=t,{$from:r,$to:s}=n,a=e();return r.parentOffset===0?a.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):gd(n)?a.insertContentAt(s.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:i,dispatch:u})=>{var l;if(u){const{$to:f}=i.selection,g=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?i.setSelection(Kt.create(i.doc,f.pos+1)):f.nodeAfter.isBlock?i.setSelection(Hs.create(i.doc,f.pos)):i.setSelection(Kt.create(i.doc,f.pos));else{const y=(l=f.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();y&&(i.insert(g,y),i.setSelection(Kt.create(i.doc,g+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[md({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),pm=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,gm=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,mm=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ym=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,bm=yr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",we(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Jt({find:pm,type:this.type}),Jt({find:mm,type:this.type})]},addPasteRules(){return[Qt({find:gm,type:this.type}),Qt({find:ym,type:this.type})]}}),wm=We.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",we(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_m="listItem",di="textStyle",ci=/^(\d+)\.\s$/,vm=We.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",we(this.options.HTMLAttributes,n),0]:["ol",we(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(_m,this.editor.getAttributes(di)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=vn({find:ci,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=vn({find:ci,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(di)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),xm=We.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",we(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),km=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Sm=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Cm=yr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",we(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Jt({find:km,type:this.type})]},addPasteRules(){return[Qt({find:Sm,type:this.type})]}}),Em=We.create({name:"text",group:"inline"}),xu=Dn.create({name:"starterKit",addExtensions(){const e=[];return this.options.bold!==!1&&e.push(Lg.configure(this.options.bold)),this.options.blockquote!==!1&&e.push(Tg.configure(this.options.blockquote)),this.options.bulletList!==!1&&e.push($g.configure(this.options.bulletList)),this.options.code!==!1&&e.push(Vg.configure(this.options.code)),this.options.codeBlock!==!1&&e.push(Og.configure(this.options.codeBlock)),this.options.document!==!1&&e.push(Fg.configure(this.options.document)),this.options.dropcursor!==!1&&e.push(Ug.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&e.push(em.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&e.push(tm.configure(this.options.hardBreak)),this.options.heading!==!1&&e.push(nm.configure(this.options.heading)),this.options.history!==!1&&e.push(fm.configure(this.options.history)),this.options.horizontalRule!==!1&&e.push(hm.configure(this.options.horizontalRule)),this.options.italic!==!1&&e.push(bm.configure(this.options.italic)),this.options.listItem!==!1&&e.push(wm.configure(this.options.listItem)),this.options.orderedList!==!1&&e.push(vm.configure(this.options.orderedList)),this.options.paragraph!==!1&&e.push(xm.configure(this.options.paragraph)),this.options.strike!==!1&&e.push(Cm.configure(this.options.strike)),this.options.text!==!1&&e.push(Em.configure(this.options.text)),e}});function Mm(e){var t;const{char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:a,startOfLine:i,$position:u}=e,l=r&&!s,f=yd(n),g=new RegExp(`\\s${f}$`),y=i?"^":"",v=s?"":f,w=l?new RegExp(`${y}${f}.*?(?=\\s${v}|$)`,"gm"):new RegExp(`${y}(?:^)?${f}[^\\s${v}]*`,"gm"),A=((t=u.nodeBefore)===null||t===void 0?void 0:t.isText)&&u.nodeBefore.text;if(!A)return null;const C=u.pos-A.length,I=Array.from(A.matchAll(w)).pop();if(!I||I.input===void 0||I.index===void 0)return null;const M=I.input.slice(Math.max(0,I.index-1),I.index),L=new RegExp(`^[${a==null?void 0:a.join("")}\0]?$`).test(M);if(a!==null&&!L)return null;const $=C+I.index;let o=$+I[0].length;return l&&g.test(A.slice(o-1,o+1))&&(I[0]+=" ",o+=1),$<u.pos&&o>=u.pos?{range:{from:$,to:o},query:I[0].slice(n.length),text:I[0]}:null}const jm=new an("suggestion");function Tm({pluginKey:e=jm,editor:t,char:n="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:a=[" "],startOfLine:i=!1,decorationTag:u="span",decorationClass:l="suggestion",command:f=()=>null,items:g=()=>[],render:y=()=>({}),allow:v=()=>!0,findSuggestionMatch:w=Mm}){let A;const C=y==null?void 0:y(),I=new on({key:e,view(){return{update:async(M,L)=>{var $,o,c,d,m,b,k;const x=($=this.key)===null||$===void 0?void 0:$.getState(L),j=(o=this.key)===null||o===void 0?void 0:o.getState(M.state),H=x.active&&j.active&&x.range.from!==j.range.from,N=!x.active&&j.active,_=x.active&&!j.active,S=!N&&!_&&x.query!==j.query,h=N||H&&S,T=S||H,z=_||H&&S;if(!h&&!T&&!z)return;const D=z&&!h?x:j,V=M.dom.querySelector(`[data-decoration-id="${D.decorationId}"]`);A={editor:t,range:D.range,query:D.query,text:D.text,items:[],command:R=>f({editor:t,range:D.range,props:R}),decorationNode:V,clientRect:V?()=>{var R;const{decorationId:P}=(R=this.key)===null||R===void 0?void 0:R.getState(t.state),O=M.dom.querySelector(`[data-decoration-id="${P}"]`);return(O==null?void 0:O.getBoundingClientRect())||null}:null},h&&((c=C==null?void 0:C.onBeforeStart)===null||c===void 0||c.call(C,A)),T&&((d=C==null?void 0:C.onBeforeUpdate)===null||d===void 0||d.call(C,A)),(T||h)&&(A.items=await g({editor:t,query:D.query})),z&&((m=C==null?void 0:C.onExit)===null||m===void 0||m.call(C,A)),T&&((b=C==null?void 0:C.onUpdate)===null||b===void 0||b.call(C,A)),h&&((k=C==null?void 0:C.onStart)===null||k===void 0||k.call(C,A))},destroy:()=>{var M;A&&((M=C==null?void 0:C.onExit)===null||M===void 0||M.call(C,A))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(M,L,$,o){const{isEditable:c}=t,{composing:d}=t.view,{selection:m}=M,{empty:b,from:k}=m,x={...L};if(x.composing=d,c&&(b||t.view.composing)){(k<L.range.from||k>L.range.to)&&!d&&!L.composing&&(x.active=!1);const j=w({char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:a,startOfLine:i,$position:m.$from}),H=`id_${Math.floor(Math.random()*4294967295)}`;j&&v({editor:t,state:o,range:j.range,isActive:L.active})?(x.active=!0,x.decorationId=L.decorationId?L.decorationId:H,x.range=j.range,x.query=j.query,x.text=j.text):x.active=!1}else x.active=!1;return x.active||(x.decorationId=null,x.range={from:0,to:0},x.query=null,x.text=null),x}},props:{handleKeyDown(M,L){var $;const{active:o,range:c}=I.getState(M.state);return o&&(($=C==null?void 0:C.onKeyDown)===null||$===void 0?void 0:$.call(C,{view:M,event:L,range:c}))||!1},decorations(M){const{active:L,range:$,decorationId:o}=I.getState(M);return L?zs.create(M.doc,[$s.inline($.from,$.to,{nodeName:u,class:l,"data-decoration-id":o})]):null}}});return I}const Am=new an("mention"),ku=We.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({options:e,node:t}){var n;return`${e.suggestion.char}${(n=t.attrs.label)!==null&&n!==void 0?n:t.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:e,node:t}){var n;return["span",we(this.HTMLAttributes,e.HTMLAttributes),`${e.suggestion.char}${(n=t.attrs.label)!==null&&n!==void 0?n:t.attrs.id}`]},suggestion:{char:"@",pluginKey:Am,command:({editor:e,range:t,props:n})=>{var r,s,a;const i=e.view.state.selection.$to.nodeAfter;((r=i==null?void 0:i.text)===null||r===void 0?void 0:r.startsWith(" "))&&(t.to+=1),e.chain().focus().insertContentAt(t,[{type:this.name,attrs:n},{type:"text",text:" "}]).run(),(a=(s=e.view.dom.ownerDocument.defaultView)===null||s===void 0?void 0:s.getSelection())===null||a===void 0||a.collapseToEnd()},allow:({state:e,range:t})=>{const n=e.doc.resolve(t.from),r=e.schema.nodes[this.name];return!!n.parent.type.contentMatch.matchType(r)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:t}){if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",we({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e})];const n={...this.options};n.HTMLAttributes=we({"data-type":this.name},this.options.HTMLAttributes,t);const r=this.options.renderHTML({options:n,node:e});return typeof r=="string"?["span",we({"data-type":this.name},this.options.HTMLAttributes,t),r]:r},renderText({node:e}){return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel({options:this.options,node:e})):this.options.renderText({options:this.options,node:e})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let n=!1;const{selection:r}=t,{empty:s,anchor:a}=r;return s?(t.doc.nodesBetween(a-1,a,(i,u)=>{if(i.type.name===this.name)return n=!0,e.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",u,u+i.nodeSize),!1}),n):!1})}},addProseMirrorPlugins(){return[Tm({editor:this.editor,...this.options.suggestion})]}}),Im=(e,t,n,r,s,a)=>[xu,ku.configure({HTMLAttributes:{class:"variable"},renderHTML({options:i,node:u}){return["span",we(this.HTMLAttributes,i.HTMLAttributes),`${i.suggestion.char} ${u.attrs.label??u.attrs.id} }}`]},suggestion:Ii(e,t,n,r,s,a),deleteTriggerWithBackspace:!0})],Nm=At(Ti)(({theme:e,rows:t,disabled:n})=>({"& .ProseMirror":{padding:"0px 14px",height:t?`${t*1.4375}rem`:"2.4rem",overflowY:t?"auto":"hidden",overflowX:t?"auto":"hidden",lineHeight:t?"1.4375em":"0.875em",fontWeight:500,color:n?e.palette.action.disabled:e.palette.grey[900],border:`1px solid ${e.palette.grey[900]+25}`,borderRadius:"10px",backgroundColor:e.palette.textBackground.main,boxSizing:"border-box",whiteSpace:t?"pre-wrap":"nowrap","&:hover":{borderColor:n?`${e.palette.grey[900]+25}`:e.palette.text.primary,cursor:n?"default":"text"},"&:focus":{borderColor:n?`${e.palette.grey[900]+25}`:e.palette.primary.main,outline:"none"},"& p.is-editor-empty:first-of-type::before":{content:"attr(data-placeholder)",float:"left",color:n?e.palette.action.disabled:e.palette.text.primary,opacity:n?.6:.4,pointerEvents:"none",height:0}}})),Su=({inputParam:e,value:t,nodes:n,edges:r,nodeId:s,onChange:a,disabled:i=!1})=>{const[u,l]=E.useState([]),[f,g]=E.useState([]),[y,v]=E.useState({}),[w,A]=E.useState(!1);E.useEffect(()=>{var I,M,L;if(!i&&n&&r&&s&&e){const $=e!=null&&e.acceptVariable?ir(n,r,s,e.id):[];l($);const o=n.find(m=>m.data.name==="startAgentflow"),c=(M=(I=o==null?void 0:o.data)==null?void 0:I.inputs)==null?void 0:M.startState;g(c);const d=n.find(m=>m.data.id===s);v(d==null?void 0:d.data),A(((L=n.find(m=>m.data.id===s))==null?void 0:L.extent)==="parent")}},[i,e,n,r,s]);const C=Ai({extensions:[...Im(u,f,e==null?void 0:e.acceptNodeOutputAsVariable,n,y,w),yu.configure({placeholder:e==null?void 0:e.placeholder})],content:t,onUpdate:({editor:I})=>{a(I.getHTML())},editable:!i},[u]);return p.jsx(be,{sx:{mt:1,border:""},children:p.jsx(Nm,{editor:C,rows:e==null?void 0:e.rows,disabled:i})})};Su.propTypes={inputParam:K.object,value:K.oneOfType([K.string,K.number]),onChange:K.func,disabled:K.bool,nodes:K.array,edges:K.array,nodeId:K.string};const Cu="TabsList";function Dm(e){return Cr(Cu,e)}Er(Cu,["root","horizontal","vertical"]);const Eu={valueChange:"valueChange"},ke={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function Lm(e,t,n,r,s,a){if(n.length===0||!r&&n.every((u,l)=>s(u,l)))return-1;let i=e;for(;;){if(!a&&t==="next"&&i===n.length||!a&&t==="previous"&&i===-1)return-1;if(r?!1:s(n[i],i))i+=t==="next"?1:-1,a&&(i=(i+n.length)%n.length);else return i}}function Ne(e,t,n){var r;const{items:s,isItemDisabled:a,disableListWrap:i,disabledItemsFocusable:u,itemComparer:l,focusManagement:f}=n,g=f==="DOM"?0:-1,y=s.length-1,v=e==null?-1:s.findIndex(M=>l(M,e));let w,A,C=!i;switch(t){case"reset":if(g===-1)return null;w=0,A="next",C=!1;break;case"start":w=0,A="next",C=!1;break;case"end":w=y,A="previous",C=!1;break;default:{const M=v+t;M<0?!C&&v!==-1||Math.abs(t)>1?(w=0,A="next"):(w=y,A="previous"):M>y?!C||Math.abs(t)>1?(w=y,A="previous"):(w=0,A="next"):(w=M,A=t>=0?"next":"previous")}}const I=Lm(w,A,s,u,a,C);return I===-1&&e!==null&&!a(e,v)?e:(r=s[I])!=null?r:null}function Rm(e,t,n,r){return n==="none"?[]:n==="single"?r(t[0],e)?t:[e]:t.some(s=>r(s,e))?t.filter(s=>!r(s,e)):[...t,e]}function Mu(e,t,n){const{itemComparer:r,isItemDisabled:s,selectionMode:a,items:i}=n,{selectedValues:u}=t,l=i.findIndex(g=>r(e,g));if(s(e,l))return t;const f=Rm(e,u,a,r);return te({},t,{selectedValues:f,highlightedValue:e})}function $m(e,t,n){const r=t.highlightedValue,{orientation:s,pageSize:a}=n;switch(e){case"Home":return te({},t,{highlightedValue:Ne(r,"start",n)});case"End":return te({},t,{highlightedValue:Ne(r,"end",n)});case"PageUp":return te({},t,{highlightedValue:Ne(r,-a,n)});case"PageDown":return te({},t,{highlightedValue:Ne(r,a,n)});case"ArrowUp":if(s!=="vertical")break;return te({},t,{highlightedValue:Ne(r,-1,n)});case"ArrowDown":if(s!=="vertical")break;return te({},t,{highlightedValue:Ne(r,1,n)});case"ArrowLeft":{if(s==="vertical")break;return te({},t,{highlightedValue:Ne(r,s==="horizontal-ltr"?-1:1,n)})}case"ArrowRight":{if(s==="vertical")break;return te({},t,{highlightedValue:Ne(r,s==="horizontal-ltr"?1:-1,n)})}case"Enter":case" ":return t.highlightedValue===null?t:Mu(t.highlightedValue,t,n)}return t}function zm(e,t){return t.focusManagement==="DOM"?e:te({},e,{highlightedValue:null})}function Hm(e,t,n){var r;const s=(r=n(e))==null?void 0:r.trim().toLowerCase();return!s||s.length===0?!1:s.indexOf(t)===0}function Vm(e,t,n){const{items:r,isItemDisabled:s,disabledItemsFocusable:a,getItemAsString:i}=n,u=t.length>1;let l=u?e.highlightedValue:Ne(e.highlightedValue,1,n);for(let f=0;f<r.length;f+=1){if(!l||!u&&e.highlightedValue===l)return e;if(Hm(l,t,i)&&(!s(l,r.indexOf(l))||a))return te({},e,{highlightedValue:l});l=Ne(l,1,n)}return e}function Pm(e,t,n,r){var s;const{itemComparer:a,focusManagement:i}=r;let u=null;if(n.highlightedValue!=null){var l;u=(l=e.find(y=>a(y,n.highlightedValue)))!=null?l:null}else i==="DOM"&&t.length===0&&(u=Ne(null,"reset",r));const g=((s=n.selectedValues)!=null?s:[]).filter(y=>e.some(v=>a(v,y)));return te({},n,{highlightedValue:u,selectedValues:g})}function Bm(e,t){return te({},e,{highlightedValue:Ne(null,"reset",t)})}function Om(e,t){return te({},e,{highlightedValue:Ne(null,"end",t)})}function Fm(e,t){return te({},e,{selectedValues:[],highlightedValue:Ne(null,"reset",t)})}function ju(e,t){const{type:n,context:r}=t;switch(n){case ke.keyDown:return $m(t.key,e,r);case ke.itemClick:return Mu(t.item,e,r);case ke.blur:return zm(e,r);case ke.textNavigation:return Vm(e,t.searchString,r);case ke.itemsChange:return Pm(t.items,t.previousItems,e,r);case ke.resetHighlight:return Bm(e,r);case ke.highlightLast:return Om(e,r);case ke.clearSelection:return Fm(e,r);default:return e}}function Wm(e,t){return e===t}const ns={},li=()=>{};function Cs(e,t){const n=te({},e);return Object.keys(t).forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n}function Gm(e){const{nextState:t,initialState:n,stateComparers:r,onStateChange:s,controlledProps:a,lastActionRef:i}=e,u=E.useRef(n);E.useEffect(()=>{if(i.current===null)return;const l=Cs(u.current,a);Object.keys(t).forEach(f=>{var g;const y=(g=r[f])!=null?g:Wm,v=t[f],w=l[f];if(w==null&&v!=null||w!=null&&v==null||w!=null&&v!=null&&!y(v,w)){var A,C;s==null||s((A=i.current.event)!=null?A:null,f,v,(C=i.current.type)!=null?C:"",t)}}),u.current=t,i.current=null},[u,t,i,s,r,a])}function Um(e){const t=E.useRef(null),{reducer:n,initialState:r,controlledProps:s=ns,stateComparers:a=ns,onStateChange:i=li,actionContext:u,componentName:l=""}=e;E.useRef(s);const f=E.useCallback((w,A)=>{t.current=A;const C=Cs(w,s);return n(C,A)},[s,n]),[g,y]=E.useReducer(f,r),v=E.useCallback(w=>{y(te({},w,{context:u}))},[u]);return Gm({nextState:g,initialState:r,stateComparers:a??ns,onStateChange:i??li,controlledProps:s,lastActionRef:t}),[Cs(g,s),v]}const qm=500;function Km(e){const t=E.useRef({searchString:"",lastTime:null});return E.useCallback(n=>{if(n.key.length===1&&n.key!==" "){const r=t.current,s=n.key.toLowerCase(),a=performance.now();r.searchString.length>0&&r.lastTime&&a-r.lastTime>qm?r.searchString=s:(r.searchString.length!==1||s!==r.searchString)&&(r.searchString+=s),r.lastTime=a,e(r.searchString,n)}},[e])}const fi={},Xm=()=>{},Ym=(e,t)=>e===t,Zm=()=>!1,Jm=e=>typeof e=="string"?e:String(e),Qm=()=>({highlightedValue:null,selectedValues:[]});function ey(e){const{controlledProps:t=fi,disabledItemsFocusable:n=!1,disableListWrap:r=!1,focusManagement:s="activeDescendant",getInitialState:a=Qm,getItemDomElement:i,getItemId:u,isItemDisabled:l=Zm,rootRef:f,onStateChange:g=Xm,items:y,itemComparer:v=Ym,getItemAsString:w=Jm,onChange:A,onHighlightChange:C,onItemsChange:I,orientation:M="vertical",pageSize:L=5,reducerActionContext:$=fi,selectionMode:o="single",stateReducer:c,componentName:d="useList"}=e,m=E.useRef(null),b=Tn(f,m),k=E.useCallback((q,U,ne)=>{if(C==null||C(q,U,ne),s==="DOM"&&U!=null&&(ne===ke.itemClick||ne===ke.keyDown||ne===ke.textNavigation)){var re;i==null||(re=i(U))==null||re.focus()}},[i,C,s]),x=E.useMemo(()=>({highlightedValue:v,selectedValues:(q,U)=>ri(q,U,v)}),[v]),j=E.useCallback((q,U,ne,re,ue)=>{switch(g==null||g(q,U,ne,re,ue),U){case"highlightedValue":k(q,ne,re);break;case"selectedValues":A==null||A(q,ne,re);break}},[k,A,g]),H=E.useMemo(()=>({disabledItemsFocusable:n,disableListWrap:r,focusManagement:s,isItemDisabled:l,itemComparer:v,items:y,getItemAsString:w,onHighlightChange:k,orientation:M,pageSize:L,selectionMode:o,stateComparers:x}),[n,r,s,l,v,y,w,k,M,L,o,x]),N=a(),_=c??ju,S=E.useMemo(()=>te({},$,H),[$,H]),[h,T]=Um({reducer:_,actionContext:S,initialState:N,controlledProps:t,stateComparers:x,onStateChange:j,componentName:d}),{highlightedValue:z,selectedValues:D}=h,V=Km((q,U)=>T({type:ke.textNavigation,event:U,searchString:q})),R=E.useRef([]);E.useEffect(()=>{ri(R.current,y,v)||(T({type:ke.itemsChange,event:null,items:y,previousItems:R.current}),R.current=y,I==null||I(y))},[y,v,T,I]);const P=q=>U=>{var ne;if((ne=q.onKeyDown)==null||ne.call(q,U),U.defaultMuiPrevented)return;const re=["Home","End","PageUp","PageDown"];M==="vertical"?re.push("ArrowUp","ArrowDown"):re.push("ArrowLeft","ArrowRight"),s==="activeDescendant"&&re.push(" ","Enter"),re.includes(U.key)&&U.preventDefault(),T({type:ke.keyDown,key:U.key,event:U}),V(U)},O=q=>U=>{var ne,re;(ne=q.onBlur)==null||ne.call(q,U),!U.defaultMuiPrevented&&((re=m.current)!=null&&re.contains(U.relatedTarget)||T({type:ke.blur,event:U}))},W=(q={})=>{const U=sn(q);return te({},q,{"aria-activedescendant":s==="activeDescendant"&&z!=null?u(z):void 0,tabIndex:s==="DOM"?-1:0,ref:b},U,{onBlur:O(U),onKeyDown:P(U)})},X=E.useCallback(q=>{const U=(D??[]).some(ue=>ue!=null&&v(q,ue)),ne=z!=null&&v(q,z);return{focusable:s==="DOM",highlighted:ne,selected:U}},[v,D,z,s]),ee=E.useMemo(()=>({dispatch:T,getItemState:X}),[T,X]);return E.useDebugValue({state:h}),{contextValue:ee,dispatch:T,getRootProps:W,rootRef:b,state:h}}const Tu=E.createContext(null);function ty(e){const{handlePointerOverEvents:t=!1,item:n}=e,r=E.useContext(Tu);if(!r)throw new Error("useListItem must be used within a ListProvider");const{dispatch:s,getItemState:a}=r,{highlighted:i,selected:u,focusable:l}=a(n),f=E.useCallback(w=>A=>{var C;(C=w.onClick)==null||C.call(w,A),!A.defaultPrevented&&s({type:ke.itemClick,item:n,event:A})},[s,n]),g=E.useCallback(w=>A=>{var C;(C=w.onMouseOver)==null||C.call(w,A),!A.defaultPrevented&&s({type:ke.itemHover,item:n,event:A})},[s,n]);let y;return l&&(y=i?0:-1),{getRootProps:(w={})=>{const A=sn(w);return te({},w,{onClick:f(A),onPointerOver:t?g(A):void 0,tabIndex:y})},highlighted:i,selected:u}}function ny(e,t){if(t.type===Eu.valueChange)return te({},e,{highlightedValue:t.value});const n=ju(e,t),{context:{selectionFollowsFocus:r}}=t;if(t.type===ke.itemsChange){if(n.selectedValues.length>0)return te({},n,{highlightedValue:n.selectedValues[0]});Ne(null,"reset",t.context)}return r&&n.highlightedValue!=null?te({},n,{selectedValues:[n.highlightedValue]}):n}function ry(e){var t;const{rootRef:n}=e,{direction:r="ltr",onSelected:s,orientation:a="horizontal",value:i,registerTabIdLookup:u,selectionFollowsFocus:l}=gu(),{subitems:f,contextValue:g}=hu(),y=E.useCallback(j=>{var H;return(H=f.get(j))==null?void 0:H.id},[f]);u(y);const v=E.useMemo(()=>Array.from(f.keys()),[f]),w=E.useCallback(j=>{var H,N;return j==null?null:(H=(N=f.get(j))==null?void 0:N.ref.current)!=null?H:null},[f]),A=r==="rtl";let C;a==="vertical"?C="vertical":C=A?"horizontal-rtl":"horizontal-ltr";const I=E.useCallback((j,H)=>{var N;s(j,(N=H[0])!=null?N:null)},[s]),M=E.useMemo(()=>i===void 0?{}:i!=null?{selectedValues:[i]}:{selectedValues:[]},[i]),L=E.useCallback(j=>{var H,N;return(H=(N=f.get(j))==null?void 0:N.disabled)!=null?H:!1},[f]),{contextValue:$,dispatch:o,getRootProps:c,state:{highlightedValue:d,selectedValues:m},rootRef:b}=ey({controlledProps:M,disabledItemsFocusable:!l,focusManagement:"DOM",getItemDomElement:w,isItemDisabled:L,items:v,rootRef:n,onChange:I,orientation:C,reducerActionContext:E.useMemo(()=>({selectionFollowsFocus:l||!1}),[l]),selectionMode:"single",stateReducer:ny});E.useEffect(()=>{i!==void 0&&i!=null&&o({type:Eu.valueChange,value:i})},[o,i]);const k=(j={})=>te({},j,c(j),{"aria-orientation":a==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:E.useMemo(()=>te({},g,$),[g,$]),dispatch:o,getRootProps:k,highlightedValue:d,isRtl:A,orientation:a,rootRef:b,selectedValue:(t=m[0])!=null?t:null}}function sy(e){const{value:t,children:n}=e,{dispatch:r,getItemIndex:s,getItemState:a,registerItem:i,totalSubitemCount:u}=t,l=E.useMemo(()=>({dispatch:r,getItemState:a,getItemIndex:s}),[r,s,a]),f=E.useMemo(()=>({getItemIndex:s,registerItem:i,totalSubitemCount:u}),[i,s,u]);return p.jsx(oo.Provider,{value:f,children:p.jsx(Tu.Provider,{value:l,children:n})})}const oy=["children","slotProps","slots"],iy=e=>{const{orientation:t}=e;return js({root:["root",t]},ro(Dm))},ay=E.forwardRef(function(t,n){var r;const{children:s,slotProps:a={},slots:i={}}=t,u=gr(t,oy),{isRtl:l,orientation:f,getRootProps:g,contextValue:y}=ry({rootRef:n}),v=te({},t,{isRtl:l,orientation:f}),w=iy(v),A=(r=i.root)!=null?r:"div",C=so({elementType:A,getSlotProps:g,externalSlotProps:a.root,externalForwardedProps:u,ownerState:v,className:w.root});return p.jsx(sy,{value:y,children:p.jsx(A,te({},C,{children:s}))})}),sr={50:"#F0F7FF",100:"#C2E0FF",200:"#80BFFF",300:"#66B2FF",400:"#3399FF",500:"#007FFF",600:"#0072E5",700:"#0059B2",800:"#004C99",900:"#003A75"},Au=Si(ay)(({theme:e,...t})=>{var n;return`
    min-width: 400px;
    background-color: ${((n=t.sx)==null?void 0:n.backgroundColor)||sr[500]};
    border-radius: 20px;
    margin-top: 16px;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    align-content: space-between;
    box-shadow: 0px 4px 6px ${e.palette.mode==="dark"?"rgba(0,0,0, 0.4)":"rgba(0,0,0, 0.2)"};
    `}),uy="Button",dy=Er(uy,["root","active","disabled","focusVisible"]);function cy(e={}){const{disabled:t=!1,focusableWhenDisabled:n,href:r,rootRef:s,tabIndex:a,to:i,type:u,rootElementName:l}=e,f=E.useRef(),[g,y]=E.useState(!1),{isFocusVisibleRef:v,onFocus:w,onBlur:A,ref:C}=Od(),[I,M]=E.useState(!1);t&&!n&&I&&M(!1),E.useEffect(()=>{v.current=I},[I,v]);const[L,$]=mg({rootElementName:l??(r||i?"a":void 0),componentName:"Button"}),o=S=>h=>{var T;I&&h.preventDefault(),(T=S.onMouseLeave)==null||T.call(S,h)},c=S=>h=>{var T;A(h),v.current===!1&&M(!1),(T=S.onBlur)==null||T.call(S,h)},d=S=>h=>{var T;if(f.current||(f.current=h.currentTarget),w(h),v.current===!0){var z;M(!0),(z=S.onFocusVisible)==null||z.call(S,h)}(T=S.onFocus)==null||T.call(S,h)},m=()=>{const S=f.current;return L==="BUTTON"||L==="INPUT"&&["button","submit","reset"].includes(S==null?void 0:S.type)||L==="A"&&(S==null?void 0:S.href)},b=S=>h=>{if(!t){var T;(T=S.onClick)==null||T.call(S,h)}},k=S=>h=>{var T;t||(y(!0),document.addEventListener("mouseup",()=>{y(!1)},{once:!0})),(T=S.onMouseDown)==null||T.call(S,h)},x=S=>h=>{var T;if((T=S.onKeyDown)==null||T.call(S,h),!h.defaultMuiPrevented&&(h.target===h.currentTarget&&!m()&&h.key===" "&&h.preventDefault(),h.target===h.currentTarget&&h.key===" "&&!t&&y(!0),h.target===h.currentTarget&&!m()&&h.key==="Enter"&&!t)){var z;(z=S.onClick)==null||z.call(S,h),h.preventDefault()}},j=S=>h=>{var T;if(h.target===h.currentTarget&&y(!1),(T=S.onKeyUp)==null||T.call(S,h),h.target===h.currentTarget&&!m()&&!t&&h.key===" "&&!h.defaultMuiPrevented){var z;(z=S.onClick)==null||z.call(S,h)}},H=Tn($,s,C,f),N={};return a!==void 0&&(N.tabIndex=a),L==="BUTTON"?(N.type=u??"button",n?N["aria-disabled"]=t:N.disabled=t):L==="INPUT"?u&&["button","submit","reset"].includes(u)&&(n?N["aria-disabled"]=t:N.disabled=t):L!==""&&(!r&&!i&&(N.role="button",N.tabIndex=a??0),t&&(N["aria-disabled"]=t,N.tabIndex=n?a??0:-1)),{getRootProps:(S={})=>{const h=te({},sn(e),sn(S)),T=te({type:u},h,N,S,{onBlur:c(h),onClick:b(h),onFocus:d(h),onKeyDown:x(h),onKeyUp:j(h),onMouseDown:k(h),onMouseLeave:o(h),ref:H});return delete T.onFocusVisible,T},focusVisible:I,setFocusVisible:M,active:g,rootRef:H}}const Iu="Tab";function ly(e){return Cr(Iu,e)}const fy=Er(Iu,["root","selected","disabled"]);function hy(e,t){return function(r={}){const s=te({},r,e(r));return te({},s,t(s))}}function py(e){return e.size}function gy(e){const{value:t,rootRef:n,disabled:r=!1,id:s}=e,a=E.useRef(null),i=wd(s),{value:u,selectionFollowsFocus:l,getTabPanelId:f}=gu(),g=E.useMemo(()=>({disabled:r,ref:a,id:i}),[r,a,i]),{id:y,index:v,totalItemCount:w}=kg(t??py,g),{getRootProps:A,highlighted:C,selected:I}=ty({item:y}),{getRootProps:M,rootRef:L,active:$,focusVisible:o,setFocusVisible:c}=cy({disabled:r,focusableWhenDisabled:!l,type:"button"}),d=Tn(a,n,L),m=y!==void 0?f(y):void 0;return{getRootProps:(k={})=>{const x=sn(k),j=hy(A,M);return te({},k,j(x),{role:"tab","aria-controls":m,"aria-selected":I,id:i,ref:d})},active:$,focusVisible:o,highlighted:C,index:v,rootRef:d,selected:I||y===u,setFocusVisible:c,totalTabsCount:w}}const my=["action","children","disabled","onChange","onClick","onFocus","slotProps","slots","value"],yy=e=>{const{selected:t,disabled:n}=e;return js({root:["root",t&&"selected",n&&"disabled"]},ro(ly))},by=E.forwardRef(function(t,n){var r;const{children:s,disabled:a=!1,slotProps:i={},slots:u={},value:l}=t,f=gr(t,my),g=E.useRef(),y=Tn(g,n),{active:v,highlighted:w,selected:A,getRootProps:C}=gy(te({},t,{rootRef:y,value:l})),I=te({},t,{active:v,disabled:a,highlighted:w,selected:A}),M=yy(I),L=(r=u.root)!=null?r:"button",$=so({elementType:L,getSlotProps:C,externalSlotProps:i.root,externalForwardedProps:f,additionalProps:{ref:n},ownerState:I,className:M.root});return p.jsx(L,te({},$,{children:s}))}),Nu=Si(by)(({...e})=>{var t,n;return`
  font-family: 'IBM Plex Sans', sans-serif;
  color: white;
  cursor: pointer;
  font-size: 0.75rem;
  font-weight: bold;
  background-color: transparent;
  width: 100%;
  line-height: 1.5;
  padding: 8px 12px;
  margin: 6px;
  border: none;
  border-radius: 25px;
  display: flex;
  justify-content: center;

  &:hover {
    background-color: ${((t=e.sx)==null?void 0:t.backgroundColor)||sr[400]};
  }

  &:focus {
    color: #fff;
    outline: 3px solid ${((n=e.sx)==null?void 0:n.backgroundColor)||sr[200]};
  }

  &.${fy.selected} {
    background-color: #fff;
    color: ${sr[600]};
  }

  &.${dy.disabled} {
    opacity: 0.5;
    cursor: not-allowed;
  }
 `}),Du=({data:e,inputParam:t,disabled:n=!1,arrayIndex:r=null,parentParamForArray:s=null})=>{const a=Ts(),{reactFlowInstance:i}=E.useContext(mr),[u,l]=E.useState(!1),[f,g]=E.useState({}),[y,v]=E.useState({mainValue:null,configValue:null,arrayValue:null}),w=(I,M)=>{l(M)},A=({inputParam:I,newValue:M})=>{let L=Xe.cloneDeep(f);const $={...L.inputs};$[I.name]=M;const o=Pr({...L,inputs:$});Object.keys($).forEach(d=>{const m=o.find(b=>b.name===d);m&&m.display===!1&&delete $[d]});const c=$.credential||$[Ut];L={...L,inputParams:o,inputs:$,credential:c||void 0},g(L)},C=E.useMemo(()=>({mainValue:e.inputs[t.name],configValue:e.inputs[`${t.name}Config`],arrayValue:s?e.inputs[s.name]:null}),[e.inputs,t.name,s==null?void 0:s.name]);return E.useEffect(()=>{(async()=>{const M=e.inputs[t.name],L=await xd.getSpecificNode(M);if(!L.data)return;const $=Xe.cloneDeep(yi(L.data,`${L.data.nodeName}_0`)),o=()=>s&&e.inputs[s.name],c=()=>s&&e.inputs[s.name]&&Array.isArray(e.inputs[s.name])&&e.inputs[s.name][r]&&e.inputs[s.name][r][`${t.name}Config`],d=()=>c()?e.inputs[s.name][r][t.name]:e.inputs[t.name],m=()=>c()?e.inputs[s.name][r][`${t.name}Config`]:e.inputs[`${t.name}Config`];if(c()||e.inputs[`${t.name}Config`]){const k=m(),x=d();if(k[t.name]!==x){const j=po($.inputParams);$.inputs={...j,[t.name]:x}}else $.inputs={...k,[t.name]:x}}else{const k=o()?e.inputs[s.name][r][t.name]:e.inputs[t.name];$.inputs={...$.inputs,[t.name]:k}}$.inputParams=Pr({...$,inputs:$.inputs});const b=$.inputs.credential||$.inputs[Ut];$.credential=b||void 0,g($),v({mainValue:e.inputs[t.name],configValue:e.inputs[`${t.name}Config`],arrayValue:s?e.inputs[s.name]:null})})()},[]),E.useEffect(()=>{if(!f.inputParams)return;const I=y.mainValue!==C.mainValue,M=y.configValue!==C.configValue,L=y.arrayValue!==C.arrayValue;if(!I&&!M&&!L)return;(()=>{const o=Xe.cloneDeep(f),c=()=>s&&e.inputs[s.name]&&Array.isArray(e.inputs[s.name])&&e.inputs[s.name][r]&&e.inputs[s.name][r][`${t.name}Config`],d=()=>c()?e.inputs[s.name][r][t.name]:e.inputs[t.name],m=()=>c()?e.inputs[s.name][r][`${t.name}Config`]:e.inputs[`${t.name}Config`],b=d();if(b!==void 0&&(o.inputs[t.name]=b),c()||e.inputs[`${t.name}Config`]){const x=m();if(x&&x[t.name]===b)o.inputs={...x,[t.name]:b};else if(I){const j=po(o.inputParams);o.inputs={...j,[t.name]:b}}}o.inputParams=Pr({...o,inputs:o.inputs});const k=o.inputs.credential||o.inputs[Ut];o.credential=k||void 0,g(o),v({mainValue:C.mainValue,configValue:C.configValue,arrayValue:C.arrayValue})})()},[C,f.inputParams,t.name,s==null?void 0:s.name,r]),E.useEffect(()=>{f.inputs&&i.setNodes(I=>I.map(M=>(M.id!==e.id||(r!==null&&s?(M.data.inputs[s.name]||(M.data.inputs[s.name]=[]),M.data.inputs[s.name][r]||(M.data.inputs[s.name][r]={}),M.data.inputs[s.name][r][`${t.name}Config`]=f.inputs):M.data.inputs[`${t.name}Config`]=f.inputs),M)))},[f]),p.jsx(p.Fragment,{children:p.jsx(be,{sx:{p:0,mt:1,mb:1,border:1,borderColor:a.palette.grey[900]+25,borderRadius:2},children:p.jsxs(Di,{sx:{background:"transparent"},expanded:u,onChange:w,children:[p.jsxs(Li,{expandIcon:p.jsx(Jn,{}),sx:{background:"transparent"},children:[p.jsx(Xu,{stroke:1.5,size:"1.3rem"}),p.jsxs(Te,{sx:{ml:1},children:[f==null?void 0:f.label," Parameters"]})]}),p.jsx(Ri,{children:(f.inputParams??[]).filter(I=>!I.hidden).filter(I=>I.display!==!1).map((I,M)=>p.jsx($n,{disabled:n,inputParam:I,data:f,isAdditionalParams:!0,onCustomDataChange:A},M))})]})})})};Du.propTypes={name:K.string,inputParam:K.object,data:K.object,disabled:K.bool,arrayIndex:K.number,parentParamForArray:K.object};const Lu=({show:e,dialogProps:t,onChange:n,onCancel:r})=>{const s=document.getElementById("portal"),a=An(l=>l.customization),i=Pt();E.useEffect(()=>(i(e?{type:In}:{type:it}),()=>i({type:it})),[e,i]);const u=e?p.jsxs(at,{onClose:r,open:e,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:t.inputParam.label??"Format Prompt Values"}),p.jsx(ut,{children:p.jsx(As,{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:p.jsx(Rs,{onChange:l=>n(l),value:t.value,isDarkMode:a.isDarkMode,inputParam:t.inputParam,nodes:t.nodes,edges:t.edges,nodeId:t.nodeId,isSequentialAgent:t.data.category==="Sequential Agents"})})})]}):null;return bt.createPortal(u,s)};Lu.propTypes={show:K.bool,dialogProps:K.object,onChange:K.func,onCancel:K.func};const wy=At(Ti)(({theme:e,rows:t})=>({"& .ProseMirror":{padding:"0px 14px",height:t?`${t*1.4375}rem`:"2.4rem",overflowY:t?"auto":"hidden",overflowX:t?"auto":"hidden",lineHeight:t?"1.4375em":"0.875em",fontWeight:500,color:e.palette.grey[900],border:`1px solid ${e.palette.textBackground.border}`,borderRadius:"10px",backgroundColor:e.palette.textBackground.main,boxSizing:"border-box",whiteSpace:t?"pre-wrap":"nowrap","&:hover":{borderColor:e.palette.text.primary,cursor:"text"},"&:focus":{borderColor:e.palette.primary.main,boxShadow:`0 0 0 0px ${e.palette.primary.main}`,outline:"none"},"&[disabled]":{backgroundColor:e.palette.action.disabledBackground,color:e.palette.action.disabled},"& p.is-editor-empty:first-of-type::before":{content:"attr(data-placeholder)",float:"left",color:e.palette.text.primary,opacity:.4,pointerEvents:"none",height:0}}})),_y=(e,t,n,r,s,a)=>[xu,ku.configure({HTMLAttributes:{class:"variable"},renderHTML({options:i,node:u}){return["span",we(this.HTMLAttributes,i.HTMLAttributes),`${i.suggestion.char} ${u.attrs.label??u.attrs.id} }}`]},suggestion:Ii(e,t,n,r,s,a),deleteTriggerWithBackspace:!0})],Ru=({show:e,dialogProps:t,onCancel:n,onInputHintDialogClicked:r,onConfirm:s})=>{const a=document.getElementById("portal"),i=Pt(),[u,l]=E.useState(""),[f,g]=E.useState(null),[y,v]=E.useState([]),[w,A]=E.useState([]),[C,I]=E.useState({}),[M,L]=E.useState(!1);E.useEffect(()=>(t.value&&l(t.value),t.inputParam&&g(t.inputParam),()=>{l(""),g(null)}),[t]),E.useEffect(()=>(i(e?{type:In}:{type:it}),()=>i({type:it})),[e,i]),E.useEffect(()=>{var c,d,m;if(!t.disabled&&t.nodes&&t.edges&&t.nodeId&&f){const b=f!=null&&f.acceptVariable?ir(t.nodes,t.edges,t.nodeId,f.id):[];v(b);const k=t.nodes.find(H=>H.data.name==="startAgentflow"),x=(d=(c=k==null?void 0:k.data)==null?void 0:c.inputs)==null?void 0:d.startState;A(x);const j=t.nodes.find(H=>H.data.id===t.nodeId);I(j==null?void 0:j.data),L(((m=t.nodes.find(H=>H.data.id===t.nodeId))==null?void 0:m.extent)==="parent")}},[t.disabled,f,t.nodes,t.edges,t.nodeId]);const $=Ai({extensions:[..._y(y,w,f==null?void 0:f.acceptNodeOutputAsVariable,t.nodes,C,M),yu.configure({placeholder:f==null?void 0:f.placeholder})],content:u,onUpdate:({editor:c})=>{l(c.getHTML())},editable:!t.disabled},[y]);E.useEffect(()=>{e&&$&&setTimeout(()=>{$.commands.focus()},100)},[e,$]);const o=e?p.jsxs(at,{open:e,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(ut,{children:p.jsx("div",{style:{display:"flex",flexDirection:"row"},children:f&&p.jsxs("div",{style:{flex:70,width:"100%"},children:[p.jsxs("div",{style:{marginBottom:"10px",display:"flex",flexDirection:"row"},children:[p.jsx(Te,{variant:"h4",children:f.label}),p.jsx("div",{style:{flex:1}}),f.hint&&p.jsx(oe,{sx:{p:0,px:2},color:"secondary",variant:"text",onClick:()=>{r(f.hint)},children:f.hint.label})]}),p.jsx(As,{style:{borderRadius:"12px",height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:p.jsx(be,{sx:{mt:1,border:""},children:p.jsx(wy,{editor:$,rows:15})})})]})})}),p.jsxs(Tt,{children:[p.jsx(oe,{onClick:n,children:t.cancelButtonName}),p.jsx(Nn,{disabled:t.disabled,variant:"contained",onClick:()=>s(u,f.name),children:t.confirmButtonName})]})]}):null;return bt.createPortal(o,a)};Ru.propTypes={show:K.bool,dialogProps:K.object,onCancel:K.func,onConfirm:K.func,onInputHintDialogClicked:K.func};const $u=({show:e,dialogProps:t,onCancel:n,onConfirm:r})=>{const s=document.getElementById("portal"),a=Pt(),[i,u]=E.useState(null),[l,f]=E.useState(0),[g,y]=E.useState({});E.useEffect(()=>(t.inputParam&&u(t.inputParam),t.data&&y(t.data),()=>{u(null),y({})}),[t]),E.useEffect(()=>(a(e?{type:In}:{type:it}),()=>a({type:it})),[e,a]);const v=e?p.jsxs(at,{open:e,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(ut,{children:p.jsx(p.Fragment,{children:i&&i.type.includes("conditionFunction")&&p.jsxs(p.Fragment,{children:[p.jsx(mu,{value:l,onChange:(w,A)=>f(A),"aria-label":"tabs",variant:"fullWidth",children:p.jsx(Au,{children:i.tabs.map((w,A)=>p.jsx(Nu,{children:w.label},A))})}),i.tabs.filter(w=>w.display!==!1).map((w,A)=>p.jsx(Ni,{value:l,index:A,children:p.jsx($n,{disabled:w.disabled,inputParam:w,data:g,isAdditionalParams:!0,disablePadding:!0})},A))]})})}),p.jsxs(Tt,{children:[p.jsx(oe,{onClick:n,children:t.cancelButtonName}),p.jsx(Nn,{disabled:t.disabled,variant:"contained",onClick:()=>r(g,i,l),children:t.confirmButtonName})]})]}):null;return bt.createPortal(v,s)};$u.propTypes={show:K.bool,dialogProps:K.object,onCancel:K.func,onConfirm:K.func};var ao={},vy=Ms;Object.defineProperty(ao,"__esModule",{value:!0});var zu=ao.default=void 0,xy=vy(Es()),ky=p,Sy=(0,xy.default)((0,ky.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosSharp");zu=ao.default=Sy;var uo={},Cy=Ms;Object.defineProperty(uo,"__esModule",{value:!0});var or=uo.default=void 0,Ey=Cy(Es()),My=p,jy=(0,Ey.default)((0,My.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");or=uo.default=jy;const hi="/assets/logs_empty-BSF3_JNE.svg",Ty=e=>Is.post("/prompts-list",e),Ay=e=>Is.post("/load-prompt",e),pi={getAvailablePrompts:Ty,getPrompt:Ay},Iy=({children:e=""})=>e.split(`
`).reduce(function(t,n){return t.concat(n,p.jsx("br",{}))},[]),rs=At(e=>p.jsx(Di,{disableGutters:!0,elevation:0,square:!0,...e}))(({theme:e})=>({border:`1px solid ${e.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),ss=At(e=>p.jsx(Li,{expandIcon:p.jsx(zu,{sx:{fontSize:"0.9rem"}}),...e}))(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(180deg)"},"& .MuiAccordionSummary-content":{marginLeft:e.spacing(1)}})),os=At(Ri)(({theme:e})=>({padding:e.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"})),Hu=({promptType:e,show:t,onCancel:n,onSubmit:r})=>{var V;const s=document.getElementById("portal"),a=Pt(),i=An(R=>R.customization),u=Yu(pi.getAvailablePrompts);E.useEffect(()=>(a(t?{type:In}:{type:it}),()=>a({type:it})),[t,a]),E.useEffect(()=>{e&&t&&(j(!0),u.request({tags:e==="template"?"StringPromptTemplate&":"ChatPromptTemplate&"}))},[e,t]),E.useEffect(()=>{var R;u.data&&u.data.repos&&(c(u.data.repos),(R=u.data.repos)!=null&&R.length&&N(0,u.data.repos),j(!1))},[u.data]);const g={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},y=[{id:101,name:"anthropic:claude-instant-1"},{id:102,name:"anthropic:claude-instant-1.2"},{id:103,name:"anthropic:claude-2"},{id:104,name:"google:palm-2-chat-bison"},{id:105,name:"google:palm-2-codechat-bison"},{id:106,name:"google:palm-2-text-bison"},{id:107,name:"meta:llama-2-13b-chat"},{id:108,name:"meta:llama-2-70b-chat"},{id:109,name:"openai:gpt-3.5-turbo"},{id:110,name:"openai:gpt-4"},{id:111,name:"openai:text-davinci-003"}],[v,w]=E.useState([]),A=[{id:201,name:"Agents"},{id:202,name:"Agent Stimulation"},{id:203,name:"Autonomous agents"},{id:204,name:"Classification"},{id:205,name:"Chatbots"},{id:206,name:"Code understanding"},{id:207,name:"Code writing"},{id:208,name:"Evaluation"},{id:209,name:"Extraction"},{id:210,name:"Interacting with APIs"},{id:211,name:"Multi-modal"},{id:212,name:"QA over documents"},{id:213,name:"Self-checking"},{id:214,name:"SQL"},{id:215,name:"Summarization"},{id:216,name:"Tagging"}],[C,I]=E.useState([]),M=[{id:301,name:"Chinese"},{id:302,name:"English"},{id:303,name:"French"},{id:304,name:"German"},{id:305,name:"Russian"},{id:306,name:"Spanish"}],[L,$]=E.useState([]),[o,c]=E.useState([]),[d,m]=E.useState({}),[b,k]=E.useState(["prompt"]),[x,j]=E.useState(!1),H=R=>(P,O)=>{const W=[...b];O?(W.push(R),k(W)):k(W.filter(X=>X!==R))},N=async(R,P=[])=>{const O=P.length?P[R]:o[R];if(!O.detailed){const W=await pi.getPrompt({promptName:O.full_name});W.data&&(O.detailed=W.data.templates)}m(O)},_=async()=>{let R=e==="template"?"StringPromptTemplate&":"ChatPromptTemplate&";v.forEach(P=>{R+=`tags=${P.name}&`}),C.forEach(P=>{R+=`tags=${P.name}&`}),L.forEach(P=>{R+=`tags=${P.name}&`}),j(!0),u.request({tags:R})},S=R=>{let P=[];return R.forEach(O=>{R.filter(W=>W.id===O.id).length===1&&P.push(O)}),P},h=R=>{const{target:{value:P}}=R;w(S(P))},T=R=>{const{target:{value:P}}=R;I(S(P))},z=R=>{const{target:{value:P}}=R;$(S(P))},D=t?p.jsxs(at,{onClose:n,open:t,fullWidth:!0,maxWidth:"lg","aria-labelledby":"prompt-dialog-title","aria-describedby":"prompt-dialog-description",children:[p.jsxs(jt,{sx:{fontSize:"1rem"},id:"prompt-dialog-title",children:["Langchain Hub (",e==="template"?"PromptTemplate":"ChatPromptTemplate",")"]}),p.jsxs(ut,{dividers:!0,sx:{p:1},children:[p.jsxs(be,{sx:{display:"flex",flexDirection:"row",p:2,pt:1,alignItems:"center"},children:[p.jsxs(Lt,{sx:{mr:1,width:"30%"},children:[p.jsx(_n,{size:"small",id:"model-checkbox-label",children:"Model"}),p.jsx(wn,{id:"model-checkbox",labelId:"model-checkbox-label",multiple:!0,size:"small",value:v,onChange:h,input:p.jsx($t,{label:"Model"}),renderValue:R=>R.map(P=>P.name).join(", "),endAdornment:v.length?p.jsx(He,{sx:{mr:2},onClick:()=>w([]),children:p.jsx(or,{style:{width:20,height:20}})}):!1,sx:{".MuiSvgIcon-root ":{fill:i.isDarkMode?"white !important":""}},MenuProps:g,children:y.map(R=>p.jsxs(qt,{value:R,children:[p.jsx(Br,{id:R.id,checked:v.findIndex(P=>P.id===R.id)>=0}),p.jsx(Or,{primary:R.name})]},R.id))})]}),p.jsxs(Lt,{sx:{mr:1,width:"30%"},children:[p.jsx(_n,{size:"small",id:"usecase-checkbox-label",children:"Usecase"}),p.jsx(wn,{autoWidth:!1,labelId:"usecase-checkbox-label",id:"usecase-checkbox",multiple:!0,size:"small",value:C,onChange:T,input:p.jsx($t,{label:"Usecase"}),renderValue:R=>R.map(P=>P.name).join(", "),endAdornment:C.length?p.jsx(He,{sx:{mr:2},onClick:()=>I([]),children:p.jsx(or,{style:{width:20,height:20}})}):!1,sx:{".MuiSvgIcon-root ":{fill:i.isDarkMode?"white !important":""}},MenuProps:g,children:A.map(R=>p.jsxs(qt,{value:R,children:[p.jsx(Br,{id:R.id,checked:C.findIndex(P=>P.id===R.id)>=0}),p.jsx(Or,{primary:R.name})]},R.id))})]}),p.jsxs(Lt,{sx:{mr:1,width:"30%"},children:[p.jsx(_n,{size:"small",id:"language-checkbox-label",children:"Language"}),p.jsx(wn,{labelId:"language-checkbox-label",id:"language-checkbox",multiple:!0,size:"small",value:L,onChange:z,input:p.jsx($t,{label:"language"}),renderValue:R=>R.map(P=>P.name).join(", "),endAdornment:L.length?p.jsx(He,{sx:{mr:2},onClick:()=>$([]),children:p.jsx(or,{style:{width:20,height:20}})}):!1,sx:{".MuiSvgIcon-root ":{fill:i.isDarkMode?"white !important":""}},MenuProps:g,children:M.map(R=>p.jsxs(qt,{value:R,children:[p.jsx(Br,{id:R.id,checked:L.findIndex(P=>P.id===R.id)>=0}),p.jsx(Or,{primary:R.name})]},R.id))})]}),p.jsx(Lt,{sx:{width:"10%"},children:p.jsx(oe,{disableElevation:!0,variant:"outlined",onClick:_,children:"Search"})})]}),x&&p.jsxs(Zn,{sx:{alignItems:"center",justifyContent:"center",width:"100%",pb:3},flexDirection:"column",children:[p.jsx(be,{sx:{p:5,height:"auto"},children:p.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:hi,alt:"promptEmptySVG"})}),p.jsx("div",{children:"Please wait....loading Prompts"})]}),!x&&o&&o.length===0&&p.jsxs(Zn,{sx:{alignItems:"center",justifyContent:"center",width:"100%",pb:3},flexDirection:"column",children:[p.jsx(be,{sx:{p:5,height:"auto"},children:p.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:hi,alt:"promptEmptySVG"})}),p.jsx("div",{children:"No Available Prompts"})]}),!x&&o&&o.length>0&&p.jsx(Zn,{sx:{alignItems:"center",justifyContent:"center",width:"100%"},flexDirection:"column",children:p.jsx(be,{sx:{width:"100%",p:2},children:p.jsxs(Fr,{xs:12,container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[p.jsx(Fr,{xs:4,item:!0,sx:{textAlign:"left"},children:p.jsx(be,{sx:{width:"100%",maxWidth:360},children:p.jsx(go,{variant:"outlined",sx:{height:470,overflow:"auto",borderRadius:0},children:p.jsxs(mo,{sx:{p:1},children:[p.jsx(Te,{sx:{fontSize:10},color:"text.secondary",gutterBottom:!0,children:"Available Prompts"}),p.jsx(Zu,{component:"nav","aria-label":"secondary mailbox folder",children:o.map((R,P)=>p.jsx(Ju,{selected:R.id===(d==null?void 0:d.id),onClick:()=>N(P),children:p.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[p.jsx(Te,{sx:{fontSize:16,p:1,fontWeight:500},children:R.full_name}),p.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:5},children:R.tags.map((O,W)=>p.jsx(bi,{label:O,style:{marginRight:5,marginBottom:5}},W))})]})},R.id))})]})})})}),p.jsx(Fr,{xs:8,item:!0,sx:{textAlign:"left"},children:p.jsx(be,{sx:{display:"flex",flexDirection:"column"},children:p.jsx(go,{sx:{height:470,overflow:"auto"},children:p.jsxs(mo,{sx:{p:.5},children:[p.jsxs(rs,{expanded:b.includes("prompt"),onChange:H("prompt"),children:[p.jsx(ss,{"aria-controls":"panel2d-content",expandIcon:p.jsx(Jn,{}),id:"panel2d-header",children:p.jsx(Te,{children:"Prompt"})}),p.jsx(os,{children:p.jsx(Te,{sx:{wordWrap:"true"},color:"text.primary",children:(V=d==null?void 0:d.detailed)==null?void 0:V.map(R=>p.jsxs(p.Fragment,{children:[p.jsx(Te,{sx:{fontSize:12},color:"text.secondary",gutterBottom:!0,children:R.typeDisplay.toUpperCase()}),p.jsx(Te,{children:p.jsx("p",{style:{whiteSpace:"pre-wrap -moz-pre-wrap -pre-wrap -o-pre-wrap",wordWrap:"break-word",fontFamily:"inherit",wordSpacing:"0.1rem",lineHeight:"1.5rem"},children:p.jsx(Iy,{children:R.template})})})]}))})})]}),p.jsxs(rs,{expanded:b.includes("description"),onChange:H("description"),children:[p.jsx(ss,{"aria-controls":"panel1d-content",expandIcon:p.jsx(Jn,{}),id:"panel1d-header",children:p.jsx(Te,{children:"Description"})}),p.jsx(os,{children:p.jsx(Te,{sx:{wordWrap:"true",wordSpacing:"0.1rem",lineHeight:"1.5rem"},color:"text.primary",children:d==null?void 0:d.description})})]}),p.jsxs(rs,{expanded:b.includes("readme"),onChange:H("readme"),children:[p.jsx(ss,{expandIcon:p.jsx(Jn,{}),"aria-controls":"panel3d-content",id:"panel3d-header",children:p.jsx(Te,{children:"Readme"})}),p.jsx(os,{children:p.jsx("div",{style:{lineHeight:1.75,"& a":{display:"block",marginRight:"2.5rem",wordWrap:"break-word",color:"#16bed7",fontWeight:500},"& a:hover":{opacity:.8},"& code":{color:"#0ab126",fontWeight:500,whiteSpace:"pre-wrap !important"}},children:p.jsx($i,{children:d==null?void 0:d.readme})})})]})]})})})})]})})})]}),o&&o.length>0&&p.jsxs(Tt,{children:[p.jsx(oe,{onClick:n,children:"Cancel"}),p.jsx(Nn,{disabled:!(d!=null&&d.detailed),onClick:()=>r(d.detailed),variant:"contained",children:"Load"})]})]}):null;return bt.createPortal(D,s)};Hu.propTypes={promptType:K.string,show:K.bool,onCancel:K.func,onSubmit:K.func};const Ny=(e,t,n)=>Is.get(`/fetch-links?url=${encodeURIComponent(e)}&relativeLinksMethod=${t}&limit=${n}`),Dy={fetchLinks:Ny},co=({show:e,dialogProps:t,onCancel:n,onSave:r})=>{const s=document.getElementById("portal"),a=Pt();Ns();const i=(...o)=>a(Ds(...o)),u=(...o)=>a(Ls(...o)),[l,f]=E.useState(!1),[g,y]=E.useState([]),[v,w]=E.useState("");E.useEffect(()=>(t.url&&w(t.url),t.selectedLinks&&y(t.selectedLinks),()=>{f(!1),y([]),w("")}),[t]),E.useEffect(()=>(a(e?{type:In}:{type:it}),()=>a({type:it})),[e,a]);const A=async()=>{f(!0);try{const o=await Dy.fetchLinks(v,t.relativeLinksMethod,t.limit);o.data&&(y(o.data.links),i({message:"Successfully fetched links",options:{key:new Date().getTime()+Math.random(),variant:"success",action:c=>p.jsx(oe,{style:{color:"white"},onClick:()=>u(c),children:p.jsx(st,{})})}}))}catch(o){i({message:typeof o.response.data=="object"?o.response.data.message:o.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:c=>p.jsx(oe,{style:{color:"white"},onClick:()=>u(c),children:p.jsx(st,{})})}})}f(!1)},C=(o,c)=>{const{value:d}=c.target,m=[...g];m[o]=d,y(m)},I=o=>{const c=[...g];c.splice(o,1),y(c)},M=()=>{y([])},L=()=>{r(v,g)},$=e?p.jsxs(at,{onClose:n,open:e,fullWidth:!0,maxWidth:"sm","aria-labelledby":"manage-scraped-links-dialog-title","aria-describedby":"manage-scraped-links-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"manage-scraped-links-dialog-title",children:t.title||`Manage Scraped Links - ${v}`}),p.jsxs(ut,{children:[p.jsx(be,{sx:{mb:4},children:p.jsxs(Zn,{flexDirection:"row",gap:1,sx:{width:"100%"},children:[p.jsx(Lt,{sx:{mt:1,width:"100%",display:"flex",flexShrink:1},size:"small",children:p.jsx($t,{id:"url",size:"small",type:"text",value:v,name:"url",onChange:o=>{w(o.target.value)}})}),p.jsx(oe,{disabled:!v,sx:{borderRadius:"12px",mt:1,display:"flex",flexShrink:0},size:"small",variant:"contained",onClick:A,children:"Fetch Links"})]})}),p.jsxs(be,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.5},children:[p.jsx(Te,{sx:{fontWeight:500},children:"Scraped Links"}),g.length>0?p.jsx(oe,{sx:{height:"max-content",width:"max-content"},variant:"outlined",color:"error",title:"Clear All Links",onClick:M,startIcon:p.jsx(Fd,{}),children:"Clear All"}):null]}),p.jsxs(p.Fragment,{children:[l&&p.jsx(zi,{open:l}),g.length>0?p.jsx(As,{style:{height:"100%",maxHeight:"320px",overflowX:"hidden",display:"flex",flexDirection:"column",gap:4},children:g.map((o,c)=>p.jsxs("div",{style:{display:"flex",width:"100%"},children:[p.jsx(be,{sx:{display:"flex",width:"100%"},children:p.jsx($t,{sx:{width:"100%"},type:"text",onChange:d=>C(c,d),size:"small",value:o,name:`link_${c}`},c)}),p.jsx(be,{sx:{width:"auto",flexGrow:1},children:p.jsx(He,{sx:{height:30,width:30},size:"small",color:"error",onClick:()=>I(c),edge:"end",children:p.jsx(Vi,{})})})]},c))}):p.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:p.jsx(Te,{sx:{my:2},children:"Links scraped from the URL will appear here"})})]})]}),p.jsxs(Tt,{children:[p.jsx(oe,{onClick:n,children:"Cancel"}),p.jsx(Nn,{variant:"contained",onClick:L,children:"Save"})]})]}):null;return bt.createPortal($,s)};co.propTypes={show:K.bool,dialogProps:K.object,onCancel:K.func,onSave:K.func};const Vu=({show:e,dialogProps:t,onCancel:n})=>{const r=document.getElementById("portal"),s=e?p.jsxs(at,{onClose:n,open:e,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:t.label}),p.jsx(ut,{children:p.jsx($i,{children:t==null?void 0:t.value})})]}):null;return bt.createPortal(s,r)};Vu.propTypes={show:K.bool,dialogProps:K.object,onCancel:K.func};const Pu=({open:e,onClose:t,onComplete:n})=>{const r=document.getElementById("portal"),s={"nvcr.io/nim/meta/llama-3.1-8b-instruct:1.8.0-RTX":{label:"Llama 3.1 8B Instruct",licenseUrl:"https://catalog.ngc.nvidia.com/orgs/nim/teams/meta/containers/llama-3.1-8b-instruct"},"nvcr.io/nim/deepseek-ai/deepseek-r1-distill-llama-8b:1.8.0-RTX":{label:"DeepSeek R1 Distill Llama 8B",licenseUrl:"https://catalog.ngc.nvidia.com/orgs/nim/teams/deepseek-ai/containers/deepseek-r1-distill-llama-8b"},"nvcr.io/nim/nv-mistralai/mistral-nemo-12b-instruct:1.8.0-rtx":{label:"Mistral Nemo 12B Instruct",licenseUrl:"https://catalog.ngc.nvidia.com/orgs/nim/teams/nv-mistralai/containers/mistral-nemo-12b-instruct"}},[a,i]=E.useState(0),[u,l]=E.useState(!1),[f,g]=E.useState(""),[y,v]=E.useState(null),[w,A]=E.useState("0"),[C,I]=E.useState("8080"),[M,L]=E.useState(!1),[$,o]=E.useState(null),c=["Download Installer","Pull Image","Start Container"],d=async()=>{var _;try{l(!0),await Ue.get("/api/v1/nvidia-nim/download-installer"),l(!1)}catch(S){let h=S.message;typeof S=="string"?h=S:(_=S.response)!=null&&_.data&&(h=S.response.data.message),alert("Failed to download installer: "+h),l(!1)}},m=async()=>{var _;try{l(!0),await Ue.get("/api/v1/nvidia-nim/preload"),l(!1),i(1)}catch(S){let h=S.message;typeof S=="string"?h=S:(_=S.response)!=null&&_.data&&(h=S.response.data.message),alert("Failed to preload: "+h),l(!1)}},b=async()=>{var _,S;try{l(!0);try{const D=await Ue.post("/api/v1/nvidia-nim/get-image",{imageTag:f});if(D.data&&D.data.tag===f){l(!1),i(2);return}}catch(D){if(((_=D.response)==null?void 0:_.status)!==404)throw D}const T=(await Ue.get("/api/v1/nvidia-nim/get-token")).data.access_token;await Ue.post("/api/v1/nvidia-nim/pull-image",{imageTag:f,apiKey:T});const z=setInterval(async()=>{var D;try{(await Ue.post("/api/v1/nvidia-nim/get-image",{imageTag:f})).data&&(clearInterval(z),l(!1),i(2))}catch(V){((D=V.response)==null?void 0:D.status)!==404&&(clearInterval(z),alert("Failed to check image status: "+V.message),l(!1))}},5e3);v(z)}catch(h){let T=h.message;typeof h=="string"?T=h:(S=h.response)!=null&&S.data&&(T=h.response.data.message),alert("Failed to pull image: "+T),l(!1)}},k=async()=>{var _,S,h;try{l(!0);try{const T=await Ue.post("/api/v1/nvidia-nim/get-container",{imageTag:f,port:parseInt(C)});if(T.data){o(T.data),L(!0),l(!1);return}}catch(T){if(((_=T.response)==null?void 0:_.status)===409){alert(`Port ${C} is already in use by another container. Please choose a different port.`),l(!1);return}if(((S=T.response)==null?void 0:S.status)!==404)throw T}await x()}catch(T){let z=T.message;typeof T=="string"?z=T:(h=T.response)!=null&&h.data&&(z=T.response.data.message),alert("Failed to check container status: "+z),l(!1)}},x=async()=>{var _;try{l(!0);const h=(await Ue.get("/api/v1/nvidia-nim/get-token")).data.access_token;await Ue.post("/api/v1/nvidia-nim/start-container",{imageTag:f,apiKey:h,nimRelaxMemConstraints:parseInt(w),hostPort:parseInt(C)});const T=setInterval(async()=>{var z;try{const D=await Ue.post("/api/v1/nvidia-nim/get-container",{imageTag:f,port:parseInt(C)});D.data&&(clearInterval(T),l(!1),n(D.data),t())}catch(D){((z=D.response)==null?void 0:z.status)!==404&&(clearInterval(T),alert("Failed to check container status: "+D.message),l(!1))}},5e3);v(T)}catch(S){let h=S.message;typeof S=="string"?h=S:(_=S.response)!=null&&_.data&&(h=S.response.data.message),alert("Failed to start container: "+h),l(!1)}},j=async()=>{var _;try{l(!0);const S=setInterval(async()=>{var h;try{const T=await Ue.post("/api/v1/nvidia-nim/get-container",{imageTag:f,port:parseInt(C)});T.data&&(clearInterval(S),l(!1),n(T.data),t())}catch(T){((h=T.response)==null?void 0:h.status)!==404&&(clearInterval(S),alert("Failed to check container status: "+T.message),l(!1))}},5e3);v(S)}catch(S){let h=S.message;typeof S=="string"?h=S:(_=S.response)!=null&&_.data&&(h=S.response.data.message),alert("Failed to check container status: "+h),l(!1)}},H=()=>{if(a===1&&!f){alert("Please enter an image tag");return}if(a===2){const _=parseInt(C);if(isNaN(_)||_<1||_>65535){alert("Please enter a valid port number between 1 and 65535");return}}switch(a){case 0:m();break;case 1:b();break;case 2:k();break;default:i(_=>_+1)}};E.useEffect(()=>()=>{y&&clearInterval(y)},[y]),E.useEffect(()=>{e||(i(0),l(!1),g(""))},[e]);const N=e?p.jsxs(p.Fragment,{children:[p.jsxs(at,{open:e,children:[p.jsx(jt,{children:"NIM Setup"}),p.jsxs(ut,{children:[p.jsx(Ed,{activeStep:a,children:c.map(_=>p.jsx(Md,{children:p.jsx(jd,{children:_})},_))}),a===0&&p.jsxs("div",{style:{marginTop:20},children:[p.jsx("p",{style:{marginBottom:20},children:"Would you like to download the NIM installer? Click Next if it has been installed"}),u&&p.jsx(Wr,{})]}),a===1&&p.jsxs("div",{children:[p.jsxs(Lt,{fullWidth:!0,sx:{mt:2},children:[p.jsx(_n,{children:"Model"}),p.jsx(wn,{label:"Model",value:f,onChange:_=>g(_.target.value),children:Object.entries(s).map(([_,{label:S}])=>p.jsx(qt,{value:_,children:S},_))})]}),f&&p.jsx(oe,{variant:"text",size:"small",sx:{mt:1},onClick:()=>window.open(s[f].licenseUrl,"_blank"),children:"View License"}),u&&p.jsxs("div",{children:[p.jsx("div",{style:{marginBottom:20}}),p.jsx(Wr,{}),p.jsx("p",{children:"Pulling image..."})]})]}),a===2&&p.jsx("div",{children:u?p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{marginBottom:20}}),p.jsx(Wr,{}),p.jsx("p",{children:"Starting container..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs(Lt,{fullWidth:!0,sx:{mt:2},children:[p.jsx(_n,{children:"Relax Memory Constraints"}),p.jsxs(wn,{label:"Relax Memory Constraints",value:w,onChange:_=>A(_.target.value),children:[p.jsx(qt,{value:"1",children:"Yes"}),p.jsx(qt,{value:"0",children:"No"})]})]}),p.jsx(Fi,{fullWidth:!0,type:"number",label:"Host Port",value:C,onChange:_=>I(_.target.value),inputProps:{min:1,max:65535},sx:{mt:2}}),p.jsx("p",{style:{marginTop:20},children:"Click Next to start the container."})]})})]}),p.jsxs(Tt,{children:[p.jsx(oe,{onClick:t,variant:"outline",children:"Cancel"}),a===0&&p.jsx(oe,{onClick:H,variant:"outline",color:"secondary",children:"Next"}),p.jsx(oe,{onClick:a===0?d:H,disabled:u||a===2&&(!w||!C),children:a===0?"Download":"Next"})]})]}),p.jsxs(at,{open:M,onClose:()=>L(!1),children:[p.jsx(jt,{children:"Container Already Exists"}),p.jsxs(ut,{children:[p.jsx("p",{children:"A container for this image already exists:"}),p.jsxs("div",{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Name:"})," ",($==null?void 0:$.name)||"N/A"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Status:"})," ",($==null?void 0:$.status)||"N/A"]})]}),p.jsx("p",{children:"You can:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Use the existing container (recommended)"}),p.jsx("li",{children:"Change the port and try again"})]})]}),p.jsxs(Tt,{children:[p.jsx(oe,{onClick:()=>{L(!1),o(null)},children:"Cancel"}),p.jsx(oe,{onClick:()=>{L(!1),j()},children:"Use Existing"})]})]})]}):null;return bt.createPortal(N,r)};Pu.propTypes={open:K.bool,onClose:K.func,onComplete:K.func};const Ly=[{text:"Summarize a document",img:p.jsx(Gd,{})},{text:"Translate the language",img:p.jsx(Nd,{})},{text:"Write me an email",img:p.jsx(Wd,{})},{text:"Convert the code to another language",img:p.jsx(kd,{})},{text:"Research and generate a report",img:p.jsx(Ud,{})},{text:"Plan a trip",img:p.jsx(Qu,{})}],Bu=({show:e,dialogProps:t,onCancel:n,onConfirm:r})=>{const s=document.getElementById("portal"),[a,i]=E.useState(""),[u,l]=E.useState(""),[f,g]=E.useState(!1),y=Pt();Ns();const v=(...I)=>y(Ds(...I)),w=(...I)=>y(Ls(...I)),A=async()=>{try{g(!0);const I={name:t.data.selectedChatModel.name,inputs:t.data.selectedChatModel.inputs},M=await Wi.generateAssistantInstruction({selectedChatModel:I,task:a});M.data&&(g(!1),M.data.content&&l(M.data.content))}catch(I){g(!1),v({message:typeof I.response.data=="object"?I.response.data.message:I.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:M=>p.jsx(oe,{style:{color:"white"},onClick:()=>w(M),children:p.jsx(st,{})})}})}};E.useEffect(()=>{e||(i(""),l(""))},[e]);const C=e?p.jsx(p.Fragment,{children:p.jsxs(at,{fullWidth:!0,maxWidth:"md",open:e,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:t.title}),p.jsxs(ut,{children:[p.jsx("span",{children:t.description}),p.jsx("div",{style:{display:"block",flexDirection:"row",width:"100%",marginTop:"15px"},children:Ly.map((I,M)=>p.jsx(oe,{size:"small",sx:{textTransform:"none",mr:1,mb:1,borderRadius:"16px"},variant:"outlined",color:"inherit",onClick:()=>{i(I.text),l("")},startIcon:I.img,children:I.text},M))}),!u&&p.jsx($t,{sx:{mt:2,width:"100%"},type:"text",multiline:!0,rows:12,disabled:f,value:a,placeholder:"Describe your task here",onChange:I=>i(I.target.value)}),u&&p.jsx($t,{sx:{mt:2,width:"100%"},type:"text",multiline:!0,rows:12,value:u,onChange:I=>l(I.target.value)})]}),p.jsxs(Tt,{sx:{pb:3,pr:3},children:[!u&&p.jsx(Td,{loading:f,variant:"contained",onClick:()=>{A()},startIcon:p.jsx(cs,{size:20}),children:"Generate"}),u&&p.jsx(oe,{variant:"outlined",startIcon:p.jsx(Ad,{size:20}),onClick:()=>{l("")},children:"Back"}),u&&p.jsx(Nn,{variant:"contained",onClick:()=>r(u),children:"Apply"})]})]})}):null;return bt.createPortal(C,s)};Bu.propTypes={show:K.bool,dialogProps:K.object,onConfirm:K.func,onCancel:K.func};const gi=["selectedTool","selectedAssistant"],mi=At(({className:e,...t})=>p.jsx(Gi,{...t,classes:{popper:e}}))({[`& .${Dd.tooltip}`]:{maxWidth:500}}),Ry=At(ed)({boxShadow:"0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)",borderRadius:"10px",[`& .${_d.listbox}`]:{boxSizing:"border-box","& ul":{padding:10,margin:10}}}),$y=new ig.Converter({simplifiedAutoLink:!0,strikethrough:!0,tables:!0,tasklists:!0}),$n=({inputAnchor:e,inputParam:t,data:n,disabled:r=!1,isAdditionalParams:s=!1,disablePadding:a=!1,parentParamForArray:i=null,arrayIndex:u=null,onHideNodeInfoDialog:l,onCustomDataChange:f})=>{const g=Ts(),y=An(B=>B.customization),v=E.useRef(null),{reactFlowInstance:w,deleteEdge:A,onNodeDataChange:C}=E.useContext(mr),I=sg();Ns();const M=Pt(),L=(...B)=>M(Ds(...B)),$=(...B)=>M(Ls(...B)),[o,c]=E.useState(0),[d,m]=E.useState(!1),[b,k]=E.useState({}),[x,j]=E.useState(!1),[H,N]=E.useState({}),[_,S]=E.useState(""),[h,T]=E.useState({}),[z,D]=E.useState(Date.now().toString()),[V,R]=E.useState(!1),[P,O]=E.useState({}),[W,X]=E.useState(!1),[ee,q]=E.useState(!1),[U,ne]=E.useState({}),[re,ue]=E.useState(!1),[Ee,Ae]=E.useState({}),[ye,De]=E.useState(!1),[ie,Me]=E.useState({}),[Q,Ze]=E.useState(!1),[ct,It]=E.useState(0),[wt,ze]=E.useState(!1),[Je,_t]=E.useState([]),[Qe,lt]=E.useState([]),[de,Pe]=E.useState({}),[ve,je]=E.useState(null),[et,Le]=E.useState(!1),[ft,Re]=E.useState(!1),[Be,vt]=E.useState({}),tt=({inputParam:B,newValue:G})=>{n.inputs[B.name]=G,["boolean","asyncOptions","asyncMultiOptions","options","multiOptions"].includes(B.type)&&(f?f({nodeId:n.id,inputParam:B,newValue:G}):C({nodeId:n.id,inputParam:B,newValue:G}))},nt=B=>{const G={...B};Ae(G),ue(!0)},un=(B,G,Z)=>{const Y={value:B,inputParam:G,disabled:r,languageType:Z,nodes:(w==null?void 0:w.getNodes())||[],edges:(w==null?void 0:w.getEdges())||[],nodeId:n.id,confirmButtonName:"Save",cancelButtonName:"Cancel"};G.acceptVariable?(N(Y),j(!0)):(k(Y),m(!0))},zn=B=>{Me({data:n,inputParam:B,disabled:r,confirmButtonName:"Save",cancelButtonName:"Cancel"}),De(!0),l(!0)},ht=()=>{X(!0)},Mr=B=>{X(!1);for(const G of B)Object.prototype.hasOwnProperty.call(n.inputs,G.type)&&(n.inputs[G.type]=G.template)},jr=(B,G,Z,Y)=>{ne({url:B,relativeLinksMethod:Z,limit:Y,selectedLinks:G,confirmButtonName:"Save",cancelButtonName:"Cancel"}),q(!0)},Tr=(B,G)=>{q(!1),n.inputs.url=B,n.inputs.selectedLinks=G},Hn=B=>{if(!B)return"";const G={},Z=nd(B);for(const Y of Z)G[Y]="";return Object.keys(G).length?JSON.stringify(G):""},Ar=(B,G)=>{const Z=[];for(const Y of B){const ae=w?w.getNodes().find(le=>le.data.name==="seqState"):null;if(Y.type==="asyncSingleSelect"&&Y.loadMethod&&Y.loadMethod.includes("loadStateKeys"))if(ae){const le=ae.data.inputParams.find(fe=>fe.tabIdentifier);if(le&&le.tabs.length>0){const fe=le.tabIdentifier,Ie=ae.data.inputs[`${fe}_${ae.data.id}`]||le.default||le.tabs[0].name,he=ae.data.inputs[Ie];if(he)try{const pe=JSON.parse(he),ce=Array.isArray(pe)?pe.map(xe=>xe.key):Object.keys(pe);Z.push({...Y,field:Y.field,headerName:Y.headerName,type:"singleSelect",editable:!0,valueOptions:ce})}catch(pe){console.error("Error parsing stateMemory",pe)}}}else Z.push({...Y,field:Y.field,headerName:Y.headerName,type:"singleSelect",editable:!0,valueOptions:[]});else if(Y.type==="freeSolo"){const le=[];if(Y.loadMethod&&Y.loadMethod.includes("getPreviousMessages")){const fe=ir((w==null?void 0:w.getNodes())||[],(w==null?void 0:w.getEdges())||[],n.id,G.id);for(const Ie of fe)le.push({value:`$${Ie.id}`,label:`Output from ${Ie.data.id}`})}if(Y.loadMethod&&Y.loadMethod.includes("loadStateKeys")&&ae){const fe=ae.data.inputParams.find(Ie=>Ie.tabIdentifier);if(fe&&fe.tabs.length>0){const Ie=fe.tabIdentifier,he=ae.data.inputs[`${Ie}_${ae.data.id}`]||fe.default||fe.tabs[0].name,pe=ae.data.inputs[he];if(pe)try{const ce=JSON.parse(pe),xe=Array.isArray(ce)?ce.map(Oe=>Oe.key):Object.keys(ce);for(const Oe of xe)le.push({value:`$flow.state.${Oe}`,label:`Value from ${Oe}`})}catch(ce){console.error("Error parsing stateMemory",ce)}}}Z.push({...Y,field:Y.field,headerName:Y.headerName,renderEditCell:({id:fe,field:Ie,value:he})=>{const pe=ad();return p.jsx(vd,{id:Y.field,freeSolo:!0,fullWidth:!0,options:[...le,...Y.valueOptions],value:he,PopperComponent:Ry,renderInput:ce=>p.jsx(Fi,{...ce}),renderOption:(ce,xe)=>p.jsx("li",{...ce,children:p.jsxs("div",{children:[p.jsx("strong",{children:xe.value}),p.jsx("br",{}),p.jsx("small",{children:xe.label})]})}),getOptionLabel:ce=>typeof ce=="string"?ce:ce.value,onInputChange:(ce,xe)=>{pe.current.setEditCellValue({id:fe,field:Ie,value:xe})},sx:{"& .MuiInputBase-root":{height:"50px"},"& .MuiOutlinedInput-root":{border:"none"},"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{border:"none"}}})}})}else Z.push(Y)}return Z},Vn=B=>{const G=[];if(B.loadPreviousNodes){const Z=ir((w==null?void 0:w.getNodes())||[],(w==null?void 0:w.getEdges())||[],n.id,B.id);for(const Y of Z)G.push({name:`{{ ${Y.data.id} }}`,label:`{{ ${Y.data.id} }}`,description:`Output from ${Y.data.id}`})}return[...G,...B.options]},dn=B=>B.tabs.findIndex(G=>G.name===n.inputs[`${B.tabIdentifier}_${n.id}`])>=0?B.tabs.findIndex(G=>G.name===n.inputs[`${B.tabIdentifier}_${n.id}`]):ct,Ir=(B,G)=>{let Z=B;if(G.name==="promptValues"&&!B){const ae=(n.inputs.template??"")+(n.inputs.systemMessagePrompt??"")+(n.inputs.humanMessagePrompt??"")+(n.inputs.workerPrompt??"");Z=Hn(ae)}const Y={value:Z,inputParam:G,nodes:(w==null?void 0:w.getNodes())||[],edges:(w==null?void 0:w.getEdges())||[],nodeId:n.id,data:n};O(Y),R(!0)},Nr=(B,G)=>{n.inputs[G]=B,m(!1)},Dr=(B,G)=>{n.inputs[G]=B,j(!1)},Lr=(B,G,Z)=>{n.inputs[`${G.tabIdentifier}_${n.id}`]=G.tabs[Z].name;const Y=(w==null?void 0:w.getEdges().filter(fe=>fe.source===n.id))||[],{outputAnchors:ae,toBeRemovedEdgeIds:le}=rd(B.inputs[G.tabs[Z].name],n.id,Y,G.tabs[Z].type==="datagrid");if(ae){n.outputAnchors=ae;for(const fe of le)A(fe);De(!1),l(!1)}},Rr=(B,G)=>{B==="selectedTool"?T({title:"Edit Tool",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",toolId:G}):B==="selectedAssistant"&&T({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",assistantId:G}),S(B)},$r=B=>{B==="selectedTool"?T({title:"Add New Tool",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}):B==="selectedAssistant"&&T({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),S(B)},cn=(B="")=>{B?(n.inputs[_]=B,tt({inputParam:{name:_},newValue:B}),D(Date.now().toString())):(n.inputs[_]="",tt({inputParam:{name:_},newValue:""})),T({}),S("")},zr=B=>{B&&(n.inputs.basePath=B.baseUrl,n.inputs.modelName=B.image)},Pn=async()=>{try{const B=await Wi.getChatModels();if(B.data){const G=B.data??[],Z=G.map(Y=>({name:Y.name,label:Y.label,description:Y.description,imageSrc:`${sd}/api/v1/node-icon/${Y.name}`}));_t(G),lt(Z)}}catch(B){console.error("Error loading chat models:",B)}},Bn=()=>{let B=!0;if(de&&Object.keys(de).length>0){const G=(de.inputParams??[]).filter(Z=>!Z.hidden);for(const Z of G)if(!Z.optional&&(!de.inputs[Z.name]||!de.credential)){if(Z.type==="credential"&&!de.credential){B=!1;break}else if(Z.type!=="credential"&&!de.inputs[Z.name]){B=!1;break}}}return B},On=()=>{L({message:"Please fill in all mandatory fields.",options:{key:new Date().getTime()+Math.random(),variant:"warning",action:B=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(B),children:p.jsx(st,{})})}})},Hr=async B=>{var le,fe,Ie;if(!B){L({message:"Please select a knowledge base",options:{key:new Date().getTime()+Math.random(),variant:"error",action:he=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(he),children:p.jsx(st,{})})}});return}if(B=B.split(":")[0],!Bn()){On();return}const Z=w==null?void 0:w.getNodes().find(he=>he.id===n.id),Y=(le=Z==null?void 0:Z.data)==null?void 0:le.inputs,ae=(Y==null?void 0:Y.llmModel)||(Y==null?void 0:Y.agentModel)||(Y==null?void 0:Y.humanInputModel);if(ae){try{Le(!0);const he={name:ae,inputs:(Y==null?void 0:Y.llmModelConfig)||(Y==null?void 0:Y.agentModelConfig)||(Y==null?void 0:Y.humanInputModelConfig)},pe=await wo.generateDocStoreToolDesc(B,{selectedChatModel:he});if(pe.data){Le(!1);const ce=((fe=pe.data)==null?void 0:fe.content)||((Ie=pe.data.kwargs)==null?void 0:Ie.content);n.inputs[t.name]=ce,L({message:"Document Store Tool Description generated successfully",options:{key:new Date().getTime()+Math.random(),variant:"success",action:xe=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(xe),children:p.jsx(st,{})})}})}}catch(he){console.error("Error generating doc store tool desc",he),Le(!1),L({message:typeof he.response.data=="object"?he.response.data.message:he.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:pe=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(pe),children:p.jsx(st,{})})}})}return}await Pn(),je(()=>async he=>{var pe,ce;try{Le(!0);const xe={name:he.name,inputs:he.inputs},Oe=await wo.generateDocStoreToolDesc(B,{selectedChatModel:xe});if(Oe.data){Le(!1);const ln=((pe=Oe.data)==null?void 0:pe.content)||((ce=Oe.data.kwargs)==null?void 0:ce.content);n.inputs[t.name]=ln,L({message:"Document Store Tool Description generated successfully",options:{key:new Date().getTime()+Math.random(),variant:"success",action:Ou=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(Ou),children:p.jsx(st,{})})}})}}catch(xe){console.error("Error generating doc store tool desc",xe),Le(!1),L({message:typeof xe.response.data=="object"?xe.response.data.message:xe.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:Oe=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(Oe),children:p.jsx(st,{})})}})}}),ze(!0)},Vr=async()=>{var ae;if(!Bn()){On();return}const G=w==null?void 0:w.getNodes().find(le=>le.id===n.id),Z=(ae=G==null?void 0:G.data)==null?void 0:ae.inputs,Y=(Z==null?void 0:Z.llmModel)||(Z==null?void 0:Z.agentModel)||(Z==null?void 0:Z.humanInputModel);if(Y){vt({title:"Generate Instructions",description:"You can generate a prompt template by sharing basic details about your task.",data:{selectedChatModel:{name:Y,inputs:(Z==null?void 0:Z.llmModelConfig)||(Z==null?void 0:Z.agentModelConfig)||(Z==null?void 0:Z.humanInputModelConfig)}}}),Re(!0);return}await Pn(),je(()=>async le=>{vt({title:"Generate Instructions",description:"You can generate a prompt template by sharing basic details about your task.",data:{selectedChatModel:le}}),Re(!0)}),ze(!0)};return E.useEffect(()=>{v.current&&v.current.offsetTop&&v.current.clientHeight&&(c(v.current.offsetTop+v.current.clientHeight/2),I(n.id))},[n.id,v,I]),E.useEffect(()=>{I(n.id)},[n.id,o,I]),p.jsxs("div",{ref:v,children:[e&&p.jsxs(p.Fragment,{children:[p.jsx(mi,{placement:"left",title:e.type,children:p.jsx(rn,{type:"target",position:J.Left,id:e.id,isValidConnection:B=>yo(B,w),style:{height:10,width:10,backgroundColor:n.selected?g.palette.primary.main:g.palette.text.secondary,top:o}},e.id)}),p.jsx(be,{sx:{p:2},children:p.jsxs(Te,{children:[e.label,!e.optional&&p.jsx("span",{style:{color:"red"},children:" *"}),e.description&&p.jsx(as,{style:{marginLeft:10},title:e.description})]})})]}),(t&&!t.additionalParams||s)&&p.jsxs(p.Fragment,{children:[t.acceptVariable&&!s&&p.jsx(mi,{placement:"left",title:t.type,children:p.jsx(rn,{type:"target",position:J.Left,id:t.id,isValidConnection:B=>yo(B,w),style:{height:10,width:10,backgroundColor:n.selected?g.palette.primary.main:g.palette.text.secondary,top:o}},t.id)}),p.jsxs(be,{sx:{p:a?0:2},children:[(n.name==="promptTemplate"||n.name==="chatPromptTemplate")&&(t.name==="template"||t.name==="systemMessagePrompt")&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},disabled:r,sx:{borderRadius:25,width:"100%",mb:2,mt:0},variant:"outlined",onClick:()=>ht(),endIcon:p.jsx(cu,{}),children:"Langchain Hub"}),p.jsx(Hu,{promptType:t.name,show:W,onCancel:()=>X(!1),onSubmit:Mr})]}),n.name==="chatNvidiaNIM"&&t.name==="modelName"&&p.jsx(p.Fragment,{children:p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},sx:{borderRadius:"12px",width:"100%",mb:2,mt:-1},variant:"outlined",onClick:()=>Ze(!0),children:"Setup NIM Locally"})}),p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[p.jsxs(Te,{children:[t.label,!t.optional&&p.jsx("span",{style:{color:"red"},children:" *"}),t.description&&p.jsx(as,{style:{marginLeft:10},title:t.description})]}),p.jsx("div",{style:{flexGrow:1}}),t.hint&&!s&&p.jsx(He,{size:"small",sx:{height:25,width:25},title:t.hint.label,color:"secondary",onClick:()=>nt(t.hint),children:p.jsx(xo,{})}),t.hint&&s&&p.jsx(oe,{sx:{p:0,px:2},color:"secondary",variant:"text",onClick:()=>{nt(t.hint)},startIcon:p.jsx(xo,{size:17}),children:t.hint.label}),t.acceptVariable&&t.type==="string"&&p.jsx(Gi,{title:"Type {{ to select variables",children:p.jsx(td,{size:20,style:{color:"teal"}})}),t.generateDocStoreDescription&&p.jsx(He,{title:"Generate knowledge base description",sx:{height:25,width:25},size:"small",color:"secondary",onClick:()=>Hr(n.inputs.documentStore),children:p.jsx(cs,{})}),t.generateInstruction&&p.jsx(He,{title:"Generate instructions",sx:{height:25,width:25,ml:.5},size:"small",color:"secondary",onClick:()=>Vr(),children:p.jsx(cs,{})}),(t.type==="string"&&t.rows||t.type==="code")&&p.jsx(He,{size:"small",sx:{height:25,width:25,ml:.5},title:"Expand",color:"primary",onClick:()=>un(n.inputs[t.name]??t.default??"",t),children:p.jsx(Pi,{})})]}),t.warning&&p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:10,background:"rgb(254,252,191)",padding:10,marginTop:10,marginBottom:10},children:[p.jsx(Bi,{size:30,color:"orange"}),p.jsx("span",{style:{color:"rgb(116,66,16)",marginLeft:10},children:t.warning})]}),t.type==="credential"&&p.jsx(_i,{disabled:r,data:n,inputParam:t,onSelect:B=>{n.credential=B,n.inputs[Ut]=B}}),t.type==="tabs"&&p.jsxs(p.Fragment,{children:[p.jsx(mu,{value:dn(t),onChange:(B,G)=>{It(G),n.inputs[`${t.tabIdentifier}_${n.id}`]=t.tabs[G].name},"aria-label":"tabs",variant:"fullWidth",defaultValue:dn(t),children:p.jsx(Au,{children:t.tabs.map((B,G)=>p.jsx(Nu,{children:B.label},G))})}),t.tabs.filter(B=>B.display!==!1).map((B,G)=>p.jsx(Ni,{value:dn(t),index:G,children:p.jsx($n,{disabled:B.disabled,inputParam:B,data:n,isAdditionalParams:!0,disablePadding:!0})},G))]}),t.type==="file"&&p.jsx(Ci,{disabled:r,fileType:t.fileType||"*",onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]??t.default??"Choose a file to upload"}),t.type==="boolean"&&p.jsx(Ei,{disabled:r,onChange:B=>tt({inputParam:t,newValue:B}),value:n.inputs[t.name]??t.default??!1}),t.type==="datagrid"&&p.jsx(Ps,{disabled:r,columns:Ar(t.datagrid,t),hideFooter:!0,rows:n.inputs[t.name]??JSON.stringify(t.default)??[],onChange:B=>n.inputs[t.name]=B}),t.type==="code"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},children:t.codeExample&&p.jsx(oe,{variant:"outlined",onClick:()=>{n.inputs[t.name]=t.codeExample,D(Date.now().toString())},children:"See Example"})}),p.jsx("div",{style:{marginTop:"10px",border:"1px solid",borderColor:g.palette.grey[900]+25,borderRadius:"6px",height:t.rows?"100px":"200px"},children:p.jsx(Mi,{disabled:r,value:n.inputs[t.name]??t.default??"",height:t.rows?"100px":"200px",theme:y.isDarkMode?"dark":"light",lang:"js",placeholder:t.placeholder,onValueChange:B=>n.inputs[t.name]=B,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1}})},`${z}_${n.id}}`)]}),(t.type==="string"||t.type==="password"||t.type==="number")&&(t!=null&&t.acceptVariable&&(window.location.href.includes("v2/agentcanvas")||window.location.href.includes("v2/marketplace"))?p.jsx(Su,{placeholder:t.placeholder,disabled:r,inputParam:t,onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]??t.default??"",nodes:w?w.getNodes():[],edges:w?w.getEdges():[],nodeId:n.id},n.inputs[t.name]):p.jsx(xi,{placeholder:t.placeholder,disabled:r,inputParam:t,onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]??t.default??"",nodes:[],edges:[],nodeId:n.id},n.inputs[t.name])),t.type==="json"&&p.jsxs(p.Fragment,{children:[!(t!=null&&t.acceptVariable)&&p.jsx(Rs,{disabled:r,onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]||t.default||Hn(n.inputs.workerPrompt)||"",isSequentialAgent:n.category==="Sequential Agents",isDarkMode:y.isDarkMode}),(t==null?void 0:t.acceptVariable)&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{sx:{borderRadius:25,width:"100%",mb:0,mt:2},variant:"outlined",disabled:r,onClick:()=>Ir(n.inputs[t.name]??"",t),children:t.label}),p.jsx(Lu,{show:V,dialogProps:P,onCancel:()=>R(!1),onChange:B=>n.inputs[t.name]=B})]})]}),t.type==="options"&&p.jsx("div",{children:p.jsx(is,{disabled:r,name:t.name,options:Vn(t),freeSolo:t.freeSolo,onSelect:B=>tt({inputParam:t,newValue:B}),value:n.inputs[t.name]??t.default??"choose an option"})},`${n.id}_${JSON.stringify(n.inputs[t.name])}`),t.type==="multiOptions"&&p.jsx("div",{children:p.jsx(wi,{disabled:r,name:t.name,options:Vn(t),onSelect:B=>tt({inputParam:t,newValue:B}),value:n.inputs[t.name]??t.default??"choose an option"})},`${n.id}_${JSON.stringify(n.inputs[t.name])}`),(t.type==="asyncOptions"||t.type==="asyncMultiOptions")&&p.jsxs(p.Fragment,{children:[n.inputParams.length===1&&p.jsx("div",{style:{marginTop:10}}),p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[p.jsx(vi,{disabled:r,name:t.name,nodeData:n,value:n.inputs[t.name]??t.default??"choose an option",freeSolo:t.freeSolo,multiple:t.type==="asyncMultiOptions",isCreateNewOption:gi.includes(t.name),onSelect:B=>{t.loadConfig&&D(Date.now().toString()),tt({inputParam:t,newValue:B})},onCreateNew:()=>$r(t.name)}),gi.includes(t.name)&&n.inputs[t.name]&&p.jsx(He,{title:"Edit",color:"primary",size:"small",onClick:()=>Rr(t.name,n.inputs[t.name]),children:p.jsx(Id,{})}),t.refresh&&p.jsx(He,{title:"Refresh",color:"primary",size:"small",onClick:()=>D(Date.now().toString()),children:p.jsx(Oi,{})})]},`${z}_${n.id}_${JSON.stringify(n.inputs[t.name])}`)]}),t.type==="array"&&p.jsx(lo,{inputParam:t,data:n,disabled:r}),t.type.includes("conditionFunction")&&p.jsx(p.Fragment,{children:p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},sx:{borderRadius:"12px",width:"100%",mt:1},variant:"outlined",onClick:()=>zn(t),children:t.label})}),(n.name==="cheerioWebScraper"||n.name==="puppeteerWebScraper"||n.name==="playwrightWebScraper")&&t.name==="url"&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},disabled:r,sx:{borderRadius:"12px",width:"100%",mt:1},variant:"outlined",onClick:()=>jr(n.inputs[t.name]??t.default??"",n.inputs.selectedLinks,n.inputs.relativeLinksMethod??"webCrawl",parseInt(n.inputs.limit)??0),children:"Manage Links"}),p.jsx(co,{show:ee,dialogProps:U,onCancel:()=>q(!1),onSave:Tr})]}),t.loadConfig&&n&&n.inputs&&n.inputs[t.name]&&p.jsx(p.Fragment,{children:p.jsx(Du,{data:n,inputParam:t,disabled:r,arrayIndex:u,parentParamForArray:i},`${n.id}_${JSON.stringify(n.inputs[t.name])}_${u}_${i==null?void 0:i.name}`)})]})]}),p.jsx(Sd,{show:_==="selectedTool",dialogProps:h,onCancel:()=>S(""),onConfirm:cn}),p.jsx(Cd,{show:_==="selectedAssistant",dialogProps:h,onCancel:()=>S(""),onConfirm:cn}),p.jsx(Hi,{show:d,dialogProps:b,onCancel:()=>m(!1),onConfirm:(B,G)=>Nr(B,G),onInputHintDialogClicked:nt}),p.jsx(Ru,{show:x,dialogProps:H,onCancel:()=>j(!1),onConfirm:(B,G)=>Dr(B,G),onInputHintDialogClicked:nt}),p.jsx($u,{show:ye,dialogProps:ie,onCancel:()=>{De(!1),l(!1)},onConfirm:(B,G,Z)=>Lr(B,G,Z)}),p.jsx(Vu,{show:re,dialogProps:Ee,onCancel:()=>ue(!1)}),p.jsx(Pu,{open:Q,onClose:()=>Ze(!1),onComplete:zr}),p.jsxs(at,{open:wt,onClose:()=>{ze(!1),Pe({})},"aria-labelledby":"model-selection-dialog-title",maxWidth:"sm",fullWidth:!0,children:[p.jsx(jt,{id:"model-selection-dialog-title",children:"Select Model"}),p.jsx(ut,{children:p.jsxs(be,{sx:{mt:2},children:[p.jsx(be,{sx:{px:2},children:p.jsx(is,{name:"chatModel",options:Qe??[],onSelect:B=>{if(!B)Pe({});else{const G=Je.find(Z=>Z.name===B);if(G){const Z=`${G.name}_0`,Y=Xe.cloneDeep(G),ae=yi(Y,Z);Pe(ae)}}},value:(de==null?void 0:de.name)??"choose an option"})}),de&&Object.keys(de).length>0&&p.jsx(be,{sx:{mt:2},children:(de.inputParams??[]).filter(B=>!B.hidden).map((B,G)=>p.jsx(fo,{inputParam:B,data:de},G))})]})}),p.jsxs(Tt,{children:[p.jsx(oe,{onClick:()=>{ze(!1),Pe({})},children:"Cancel"}),p.jsx(oe,{disabled:!de||Object.keys(de).length===0,onClick:async()=>{ze(!1),ve&&await ve(de),Pe({})},variant:"contained",children:"Confirm"})]})]}),p.jsx(Bu,{show:ft,dialogProps:Be,onCancel:()=>Re(!1),onConfirm:B=>{try{if(t!=null&&t.acceptVariable&&window.location.href.includes("v2/agentcanvas")){const G=$y.makeHtml(B);n.inputs[t.name]=G}else n.inputs[t.name]=B;Re(!1)}catch{L({message:"Error setting generated instruction",options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:Z=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(Z),children:p.jsx(st,{})})}})}}}),et&&p.jsx(zi,{open:et})]})};$n.propTypes={inputAnchor:K.object,inputParam:K.object,data:K.object,disabled:K.bool,isAdditionalParams:K.bool,disablePadding:K.bool,parentParamForArray:K.object,arrayIndex:K.number,onCustomDataChange:K.func,onHideNodeInfoDialog:K.func};const lo=({inputParam:e,data:t,disabled:n,isDocStore:r=!1})=>{const[s,a]=E.useState([]),[i,u]=E.useState([]),l=Ts(),f=An(M=>M.customization),g=E.useContext(mr),{reactFlowInstance:y}=g||{},v=({inputParam:M,newValue:L},$)=>{let o=Xe.cloneDeep(t);const c=[...s],d={...c[$]};for(let b=0;b<e.array.length;b+=1){const k=e.array[b];(k.show||k.hide)&&(d[k.name]=k.default||"")}d[M.name]=L,c[$]=d,a(c),t.inputs[e.name]=c,o.inputs[e.name]=c;const m=Gr(o,"inputParams",Xe.cloneDeep(e.array),$);if(m.length){const b=[...i];b[$]=m,u(b)}};E.useEffect(()=>{const M=t.inputs[e.name]||[];a(M);const L=[];for(let $=0;$<M.length;$+=1){const o=Gr(t,"inputParams",Xe.cloneDeep(e.array),$);o.length&&L.push(o)}u(L)},[t,e]);const w=(M,L,$)=>{if(r||!y||t.name!=="conditionAgentflow"&&t.name!=="conditionAgentAgentflow")return;const o=M.map((m,b)=>({id:`${t.id}-output-${b}`,label:b,name:b,description:`Condition ${b}`}));t.name==="conditionAgentflow"&&o.push({id:`${t.id}-output-${M.length}`,label:M.length,name:M.length,description:"Else"}),t.outputAnchors=o;const d=y.getNodes().map(m=>m.id===t.id?{...m,data:{...m.data,outputAnchors:o}}:m);if(y.setNodes(d),L==="DELETE"){const b=y.getEdges().filter(k=>!(k.sourceHandle&&k.sourceHandle.includes(t.id)&&k.sourceHandle.split("-").pop()===$.toString()));y.setEdges(b)}},A=()=>{let M={};for(const o of e.array)M[o.name]=o.default||"";const L=[...s,M];a(L),t.inputs[e.name]=L;const $=[];for(let o=0;o<L.length;o+=1){const c=Gr(t,"inputParams",Xe.cloneDeep(e.array),o);c.length&&$.push(c)}u($),w(L,"ADD")},C=M=>{const L=s.filter((o,c)=>c!==M);a(L),t.inputs[e.name]=L;const $=i.filter((o,c)=>c!==M);u($),w(L,"DELETE",M)},I=t.name!=="conditionAgentflow"&&t.name!=="conditionAgentAgentflow"||s.length>1;return p.jsxs(p.Fragment,{children:[s.map((M,L)=>{const $={...t,inputs:M,inputParams:i[L]||[]};return p.jsxs(be,{sx:{p:2,mt:2,mb:1,border:1,borderColor:l.palette.grey[900]+25,borderRadius:2,position:"relative"},children:[I&&p.jsx(He,{title:"Delete",onClick:()=>C(L),sx:{position:"absolute",height:"35px",width:"35px",right:10,top:10,color:f!=null&&f.isDarkMode?l.palette.grey[300]:"inherit","&:hover":{color:"red"}},children:p.jsx(Vi,{})}),p.jsx(bi,{label:`${L}`,size:"small",sx:{position:"absolute",right:I?45:10,top:16}}),i[L].filter(o=>o.display!==!1).map((o,c)=>r?p.jsx(fo,{disabled:n,inputParam:o,data:$,onNodeDataChange:({inputParam:d,newValue:m})=>{v({inputParam:d,newValue:m},L)}},c):p.jsx($n,{disabled:n,inputParam:o,data:$,isAdditionalParams:!0,parentParamForArray:e,arrayIndex:L,onCustomDataChange:({inputParam:d,newValue:m})=>{v({inputParam:d,newValue:m},L)}},c))]},L)}),p.jsxs(oe,{fullWidth:!0,size:"small",variant:"outlined",sx:{borderRadius:"16px",mt:2},startIcon:p.jsx(ki,{}),onClick:A,children:["Add ",e.label]})]})};lo.propTypes={inputParam:K.object.isRequired,data:K.object.isRequired,disabled:K.bool,isDocStore:K.bool};const fo=({inputParam:e,data:t,disabled:n=!1,onNodeDataChange:r})=>{var m;const s=An(b=>b.customization),a=E.useContext(mr),i=r||(a==null?void 0:a.onNodeDataChange),[u,l]=E.useState(!1),[f,g]=E.useState({}),[y,v]=E.useState(!1),[w,A]=E.useState({}),[C,I]=E.useState(Date.now().toString()),M=({inputParam:b,newValue:k})=>{t.inputs[b.name]=k,["boolean","asyncOptions","asyncMultiOptions","options","multiOptions"].includes(b.type)&&i&&i({nodeId:t.id,inputParam:b,newValue:k})},L=(b,k)=>{g({value:b,inputParam:k,disabled:n,confirmButtonName:"Save",cancelButtonName:"Cancel"}),l(!0)},$=(b,k,x,j)=>{A({url:b,relativeLinksMethod:x,limit:j,selectedLinks:k,confirmButtonName:"Save",cancelButtonName:"Cancel"}),v(!0)},o=(b,k)=>{v(!1),t.inputs.url=b,t.inputs.selectedLinks=k},c=(b,k)=>{l(!1),t.inputs[k]=b},d=()=>{const b=t.inputs.credential||t.inputs[Ut];return b?{credential:b}:{}};return p.jsxs("div",{children:[e&&p.jsx(p.Fragment,{children:p.jsxs(be,{sx:{p:2},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[p.jsxs(Te,{children:[e.label,!e.optional&&p.jsx("span",{style:{color:"red"},children:" *"}),e.description&&p.jsx(as,{style:{marginLeft:10},title:e.description})]}),p.jsx("div",{style:{flexGrow:1}}),(e.type==="string"&&e.rows||e.type==="code")&&p.jsx(He,{size:"small",sx:{height:25,width:25},title:"Expand",color:"primary",onClick:()=>L(t.inputs[e.name]??e.default??"",e),children:p.jsx(Pi,{})})]}),e.warning&&p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:10,background:"rgb(254,252,191)",padding:10,marginTop:10,marginBottom:10},children:[p.jsx(Bi,{size:30,color:"orange"}),p.jsx("span",{style:{color:"rgb(116,66,16)",marginLeft:10},children:e.warning})]}),e.type==="credential"&&p.jsx(_i,{disabled:n,data:d(),inputParam:e,onSelect:b=>{t.credential=b,t.inputs[Ut]=b}},JSON.stringify(e)),e.type==="file"&&p.jsx(Ci,{disabled:n,fileType:e.fileType||"*",onChange:b=>t.inputs[e.name]=b,value:t.inputs[e.name]??e.default??"Choose a file to upload"}),e.type==="boolean"&&p.jsx(Ei,{disabled:n,onChange:b=>M({inputParam:e,newValue:b}),value:t.inputs[e.name]??e.default??!1}),e.type==="datagrid"&&p.jsx(Ps,{disabled:n,columns:e.datagrid,hideFooter:!0,rows:t.inputs[e.name]??JSON.stringify(e.default)??[],onChange:b=>t.inputs[e.name]=b}),e.type==="code"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{height:"5px"}}),p.jsx("div",{style:{height:e.rows?"100px":"200px"},children:p.jsx(Mi,{disabled:n,value:t.inputs[e.name]??e.default??"",height:e.rows?"100px":"200px",theme:s.isDarkMode?"dark":"light",lang:"js",placeholder:e.placeholder,onValueChange:b=>t.inputs[e.name]=b,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1}})})]}),(e.type==="string"||e.type==="password"||e.type==="number")&&p.jsx(xi,{disabled:n,inputParam:e,onChange:b=>t.inputs[e.name]=b,value:t.inputs[e.name]??e.default??"",nodeId:t.id},t.inputs[e.name]),e.type==="json"&&p.jsx(Rs,{disabled:n,onChange:b=>t.inputs[e.name]=b,value:t.inputs[e.name]??e.default??"",isDarkMode:s.isDarkMode}),e.type==="options"&&p.jsx(is,{disabled:n,name:e.name,options:e.options,onSelect:b=>M({inputParam:e,newValue:b}),value:t.inputs[e.name]??e.default??"choose an option"},JSON.stringify(e)),e.type==="multiOptions"&&p.jsx(wi,{disabled:n,name:e.name,options:e.options,onSelect:b=>M({inputParam:e,newValue:b}),value:t.inputs[e.name]??e.default??"choose an option"},JSON.stringify(e)),(e.type==="asyncOptions"||e.type==="asyncMultiOptions")&&p.jsxs(p.Fragment,{children:[((m=t.inputParams)==null?void 0:m.length)===1&&p.jsx("div",{style:{marginTop:10}}),p.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[p.jsx("div",{style:{flex:1},children:p.jsx(vi,{disabled:n,name:e.name,nodeData:t,freeSolo:e.freeSolo,multiple:e.type==="asyncMultiOptions",value:t.inputs[e.name]??e.default??"choose an option",onSelect:b=>M({inputParam:e,newValue:b}),onCreateNew:()=>addAsyncOption(e.name),fullWidth:!0},JSON.stringify(e))},C),e.refresh&&p.jsx(He,{title:"Refresh",color:"primary",size:"small",onClick:()=>I(Date.now().toString()),children:p.jsx(Oi,{})})]})]}),e.type==="array"&&p.jsx(lo,{inputParam:e,data:t,disabled:n,isDocStore:!0}),(t.name==="cheerioWebScraper"||t.name==="puppeteerWebScraper"||t.name==="playwrightWebScraper")&&e.name==="url"&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},disabled:n,sx:{borderRadius:"12px",width:"100%",mt:1},variant:"outlined",onClick:()=>$(t.inputs[e.name]??e.default??"",t.inputs.selectedLinks,t.inputs.relativeLinksMethod??"webCrawl",parseInt(t.inputs.limit)??0),children:"Manage Links"}),p.jsx(co,{show:y,dialogProps:w,onCancel:()=>v(!1),onSave:o})]})]})}),p.jsx(Hi,{show:u,dialogProps:f,onCancel:()=>l(!1),onConfirm:(b,k)=>c(b,k)})]})};fo.propTypes={inputParam:K.object,data:K.object,disabled:K.bool,onNodeDataChange:K.func};export{Bu as A,fo as D,_h as E,rn as H,cs as I,$n as N,yh as P,ng as R,Fd as a,E0 as b,Dh as c,Ce as d,me as e,Ua as f,Ea as g,Ge as h,sg as i,J as j,Yt as k,qe as l,Et as m,k0 as n,Js as o,ot as p,S0 as q,Th as r,$e as s,_e as t,C0 as u,pp as v,Bl as w,nn as x,ph as z};
