import{t as A,M as F,P as R,a as f,r as l,j as t,B as a,d as M,l as h,z as c,n as T,u as D,R as I,cS as B,cZ as E,am as O}from"./index-B1XR3Coy.js";import{C as L,I as W,a as $,B as z}from"./style-BgWmVXbp.js";/* empty css              */import{N as j,u as G,b as _,R as H}from"./DocStoreInputHandler-9-EYgHTZ.js";import{b as J,A as Z,S as q}from"./StickyNote-D1Y7PjYe.js";import{L as U}from"./llamaindex-B_JSDULd.js";import{M as V}from"./MarketplaceCanvasHeader-CMoqBDo6.js";import"./Dropdown-BH_BuIwh.js";import"./Autocomplete-2B99MXTa.js";import"./Close-CA_iFeNy.js";import"./FormControl-Cb0ROeST.js";import"./TextField-BEeUeVUl.js";import"./InputLabel-HPVYUEFn.js";import"./MultiDropdown-OnTaU3K-.js";import"./CredentialInputHandler-NSWgGX5U.js";import"./CredentialListDialog-ooDI7A-3.js";import"./TooltipWithParser-C72LCUcD.js";import"./index-D--Rb2MU.js";import"./Tooltip-9ICsuaYn.js";import"./ConfirmDialog-Bksga_et.js";import"./Input-C2v4FwXn.js";import"./ListItem-C9nlU6HX.js";import"./Switch-BtbcRzr_.js";import"./main-BBsr8sqY.js";import"./IconArrowsMaximize-BrsSDZNx.js";import"./IconAlertTriangle-Bdlxpe5D.js";import"./InputAdornment-D6_duzKN.js";import"./IconSearch-BzBgax5m.js";import"./Delete-CvnCkEIf.js";import"./IconPlus-DpyX5kZB.js";import"./Grid-DtMOPoeK.js";import"./toPropertyKey-hKuLU48H.js";import"./createStyled-BzRwilhm.js";import"./Skeleton-BQAmmov-.js";import"./KeyboardArrowRight-KQTKBFVE.js";import"./LastPage-CMvObEkB.js";import"./GridActionsCellItem-C4fgcfe6.js";import"./File-B2PWlg1I.js";import"./CodeEditor-BjDzi2Vy.js";import"./index-DhL3T6x0.js";import"./suggestionOption-CTRD7oqB.js";import"./TabPanel-C2EL9Kp7.js";import"./ExpandMore-BP5oMSwT.js";import"./nodes-D-x6LTqi.js";import"./MemoizedReactMarkdown-CNH2mkE4.js";import"./BackdropLoader-C982mQas.js";import"./ExpandTextDialog-Sszv9N4G.js";import"./LoadingButton-BHZSG_sF.js";import"./IconTrash-BvhWIQ6v.js";import"./IconRefresh-B2aTlEaU.js";import"./ToolDialog-hiXiaWJY.js";import"./ExportAsTemplateDialog-CN3tapJC.js";import"./AssistantDialog-BG0DIOgO.js";import"./assistants-C-o7l-z6.js";import"./v4-D8aEg3BZ.js";import"./Stepper-CvQjJ8b9.js";import"./IconLanguage-Dreb5nKM.js";import"./documentstore-GQ_lrBF1.js";import"./string-3NetaFjT.js";import"./IconBulb-CwCq2_I0.js";import"./IconCopy-BBl1XuSo.js";import"./IconChevronLeft-Dkfa8829.js";const K=A(F)(({theme:e})=>({background:e.palette.card.main,color:e.darkTextPrimary,border:"solid 1px",borderColor:e.palette.primary[200]+75,width:"300px",height:"auto",padding:"10px",boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)","&:hover":{borderColor:e.palette.primary.main}})),b=({data:e})=>{const i=f(),[m,p]=l.useState(!1),[n,d]=l.useState({}),g=()=>{const r={data:e,inputParams:e.inputParams.filter(s=>s.additionalParams),disabled:!0,confirmButtonName:"Save",cancelButtonName:"Cancel"};d(r),p(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(K,{content:!1,sx:{padding:0,borderColor:e.selected?i.palette.primary.main:i.palette.text.secondary},border:!1,children:t.jsxs(a,{children:[t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[t.jsx(a,{style:{width:50,marginRight:10,padding:5},children:t.jsx("div",{style:{...i.typography.commonAvatar,...i.typography.largeAvatar,borderRadius:"50%",backgroundColor:"white",cursor:"grab"},children:t.jsx("img",{style:{width:"100%",height:"100%",padding:5,objectFit:"contain"},src:`${M}/api/v1/node-icon/${e.name}`,alt:"Notification"})})}),t.jsx(a,{children:t.jsx(h,{sx:{fontSize:"1rem",fontWeight:500},children:e.label})}),t.jsx("div",{style:{flexGrow:1}}),e.tags&&e.tags.includes("LlamaIndex")&&t.jsx(t.Fragment,{children:t.jsx("div",{style:{borderRadius:"50%",padding:15},children:t.jsx("img",{style:{width:"25px",height:"25px",borderRadius:"50%",objectFit:"contain"},src:U,alt:"LlamaIndex"})})})]}),(e.inputAnchors.length>0||e.inputParams.length>0)&&t.jsxs(t.Fragment,{children:[t.jsx(c,{}),t.jsx(a,{sx:{background:i.palette.asyncSelect.main,p:1},children:t.jsx(h,{sx:{fontWeight:500,textAlign:"center"},children:"Inputs"})}),t.jsx(c,{})]}),e.inputAnchors.map((r,s)=>t.jsx(j,{disabled:!0,inputAnchor:r,data:e},s)),e.inputParams.filter(r=>r.display!==!1).map((r,s)=>t.jsx(j,{disabled:!0,inputParam:r,data:e},s)),e.inputParams.find(r=>r.additionalParams)&&t.jsx("div",{style:{textAlign:"center",marginTop:e.inputParams.filter(r=>r.additionalParams).length===e.inputParams.length+e.inputAnchors.length?20:0},children:t.jsx(T,{sx:{borderRadius:25,width:"90%",mb:2},variant:"outlined",onClick:g,children:"Additional Parameters"})}),t.jsx(c,{}),t.jsx(a,{sx:{background:i.palette.asyncSelect.main,p:1},children:t.jsx(h,{sx:{fontWeight:500,textAlign:"center"},children:"Output"})}),t.jsx(c,{}),e.outputAnchors.map((r,s)=>t.jsx(J,{disabled:!0,outputAnchor:r,data:e},s))]})}),t.jsx(Z,{show:m,dialogProps:n,onCancel:()=>p(!1)})]})};b.propTypes={data:R.object};const Q={customNode:b,stickyNote:q},X={buttonedge:""},ne=()=>{const e=f(),i=D(),m=I(o=>o.customization),{state:p}=B(),{flowData:n,name:d}=p,[g,r,s]=G(),[y,v,w]=_(),[x,C]=l.useState(!1),N=l.useRef(null);l.useEffect(()=>{if(n){const o=JSON.parse(n);r(o.nodes||[]),v(o.edges||[])}},[n]);const S=o=>{const P=((o==null?void 0:o.nodes)||[]).some(u=>u.data.category==="Multi Agents"||u.data.category==="Sequential Agents"),k=JSON.stringify(o);i(`/${P?"agentcanvas":"canvas"}`,{state:{templateFlowData:k}})};return t.jsx(t.Fragment,{children:t.jsxs(a,{children:[t.jsx(E,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:1,sx:{bgcolor:e.palette.background.default},children:t.jsx(O,{children:t.jsx(V,{flowName:d,flowData:JSON.parse(n),onChatflowCopy:o=>S(o)})})}),t.jsx(a,{sx:{pt:"70px",height:"100vh",width:"100%"},children:t.jsx("div",{className:"reactflow-parent-wrapper",children:t.jsx("div",{className:"reactflow-wrapper",ref:N,children:t.jsxs(H,{nodes:g,edges:y,onNodesChange:s,onEdgesChange:w,nodesDraggable:!1,nodeTypes:Q,edgeTypes:X,fitView:!0,minZoom:.1,snapGrid:[25,25],snapToGrid:x,children:[t.jsx(L,{className:m.isDarkMode?"dark-mode-controls":"",style:{display:"flex",flexDirection:"row",left:"50%",transform:"translate(-50%, -50%)"},children:t.jsx("button",{className:"react-flow__controls-button react-flow__controls-interactive",onClick:()=>{C(!x)},title:"toggle snapping","aria-label":"toggle snapping",children:x?t.jsx(W,{}):t.jsx($,{})})}),t.jsx(z,{color:"#aaa",gap:16})]})})})})]})})};export{ne as default};
