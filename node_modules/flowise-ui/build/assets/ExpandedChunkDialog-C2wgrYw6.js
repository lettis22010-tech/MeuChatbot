import{P as r,R as K,o as W,r as i,q as F,H as w,j as e,D as X,h as $,l as Q,$ as L,n as U,ad as Y,a8 as Z,E as P,k as ee,s as te}from"./index-B1XR3Coy.js";import{R as M}from"./main-BBsr8sqY.js";import{C as O}from"./CodeEditor-BjDzi2Vy.js";import{I as ae}from"./IconSearch-BzBgax5m.js";import{I as se}from"./IconTrash-BvhWIQ6v.js";import{I as ne}from"./IconLanguage-Dreb5nKM.js";const oe=({show:c,dialogProps:s,onCancel:g,onChunkEdit:_,onDeleteChunk:R,isReadOnly:p})=>{var j;const V=document.getElementById("portal"),d=K(t=>t.customization),m=W(),[a,C]=i.useState(),[x,b]=i.useState(),[n,f]=i.useState(!1),[h,u]=i.useState(""),[y,l]=i.useState({}),G=t=>{const o=t.src;Array.isArray(o)||typeof o=="object"?navigator.clipboard.writeText(JSON.stringify(o,null,"  ")):navigator.clipboard.writeText(o)},J=()=>{u(a==null?void 0:a.pageContent),l(a!=null&&a.metadata?JSON.parse(a==null?void 0:a.metadata):{}),f(!1)},q=()=>{_(h,y,a)};i.useEffect(()=>{var t,o,k,S,D,E,v,I,T,A,N,z,B;return s.data&&(C((t=s.data)==null?void 0:t.selectedChunk),u((k=(o=s.data)==null?void 0:o.selectedChunk)==null?void 0:k.pageContent),b(s==null?void 0:s.data.selectedChunkNumber),(D=(S=s.data)==null?void 0:S.selectedChunk)!=null&&D.metadata&&(typeof((v=(E=s.data)==null?void 0:E.selectedChunk)==null?void 0:v.metadata)=="string"?l(JSON.parse((T=(I=s.data)==null?void 0:I.selectedChunk)==null?void 0:T.metadata)):typeof((N=(A=s.data)==null?void 0:A.selectedChunk)==null?void 0:N.metadata)=="object"&&l((B=(z=s.data)==null?void 0:z.selectedChunk)==null?void 0:B.metadata))),()=>{C(),b(),u(""),l({}),f(!1)}},[s]),i.useEffect(()=>(m(c?{type:F}:{type:w}),()=>m({type:w})),[c,m]);const H=c?e.jsxs(X,{fullWidth:!0,maxWidth:"md",open:c,onClose:g,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx($,{style:{fontSize:"1rem"},id:"alert-dialog-title",children:a&&x&&e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e.jsxs(Q,{sx:{flex:1},variant:"h4",children:["#",x,". ",a.id]}),!n&&!p&&e.jsx(L,{permissionId:"documentStores:preview-process",onClick:()=>f(!0),size:"small",color:"primary",title:"Edit Chunk",sx:{ml:2},children:e.jsx(ae,{})}),n&&!p&&e.jsx(U,{onClick:()=>J(),color:"primary",title:"Cancel",sx:{ml:2},children:"Cancel"}),n&&!p&&e.jsx(Y,{permissionId:"documentStores:preview-process",onClick:()=>q(),color:"primary",title:"Save",variant:"contained",sx:{ml:2,mr:1},children:"Save"}),!n&&!p&&e.jsx(L,{permissionId:"documentStores:delete-loader",onClick:()=>R(a),size:"small",color:"error",title:"Delete Chunk",sx:{ml:1},children:e.jsx(se,{})}),e.jsx(Z,{onClick:g,size:"small",color:"inherit",title:"Close",sx:{ml:1},children:e.jsx(P,{})})]})}),e.jsx(ee,{children:a&&x&&e.jsxs("div",{children:[e.jsxs("div",{style:{paddingLeft:"10px",paddingRight:"10px",paddingTop:"5px",paddingBottom:"5px",fontSize:"15px",width:"max-content",borderRadius:"25px",boxShadow:d.isDarkMode?"0 2px 14px 0 rgb(255 255 255 / 20%)":"0 2px 14px 0 rgb(32 40 45 / 20%)",display:"flex",flexDirection:"row",alignItems:"center",marginTop:"5px",marginBottom:"10px"},children:[e.jsx(ne,{style:{marginRight:5},size:15}),(j=a==null?void 0:a.pageContent)==null?void 0:j.length," characters"]}),e.jsx("div",{style:{marginTop:"5px"}}),!n&&e.jsx(O,{disabled:!0,height:"max-content",value:h,theme:d.isDarkMode?"dark":"light",basicSetup:{lineNumbers:!1,foldGutter:!1,autocompletion:!1,highlightActiveLine:!1}}),n&&e.jsx(O,{disabled:!1,autoFocus:!0,height:"max-content",value:h,theme:d.isDarkMode?"dark":"light",basicSetup:{lineNumbers:!1,foldGutter:!1,autocompletion:!1,highlightActiveLine:!1},onValueChange:t=>u(t)}),e.jsxs("div",{onClick:t=>t.stopPropagation(),onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&t.stopPropagation()},role:"presentation",style:{marginTop:"20px",marginBottom:"15px"},children:[!n&&e.jsx(M,{theme:d.isDarkMode?"ocean":"rjv-default",src:y,style:{padding:"10px"},name:null,quotesOnKeys:!1,enableClipboard:!1,displayDataTypes:!1,collapsed:1}),n&&e.jsx(M,{theme:d.isDarkMode?"ocean":"rjv-default",src:y,style:{padding:"10px"},name:null,quotesOnKeys:!1,displayDataTypes:!1,enableClipboard:t=>G(t),onEdit:t=>{l(t.updated_src)},onAdd:()=>{},onDelete:t=>{l(t.updated_src)}})]})]})})]}):null;return te.createPortal(H,V)};oe.propTypes={show:r.bool,dialogProps:r.object,onCancel:r.func,onChunkEdit:r.func,onDeleteChunk:r.func,isReadOnly:r.bool};export{oe as E};
