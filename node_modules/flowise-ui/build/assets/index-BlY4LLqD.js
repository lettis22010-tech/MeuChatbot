import{u as et,a as ot,r as s,b as at,c as rt,A as st,d as it,j as t,M as nt,S as P,T as h,C as lt,I as ct,e as dt,B as R,g as mt}from"./index-B1XR3Coy.js";import{I as gt}from"./ItemCard-DFH1pXJi.js";import{C as pt}from"./ConfirmDialog-Bksga_et.js";import{F as ut}from"./FlowListTable-2fPyxK1Q.js";import{V as ft}from"./ViewHeader-jo2V0q71.js";import{E as ht}from"./ErrorBoundary-WOMkE_83.js";import{D as xt,T as vt}from"./TablePagination-Dfhg7VLc.js";import{c as wt}from"./chatflows-ITLPd47E.js";import{T as G}from"./ToggleButtonGroup-D1WH89Fe.js";import{I as Ct}from"./IconLayoutGrid-DAeG3wjO.js";import{I as jt}from"./IconPlus-DpyX5kZB.js";import"./Tooltip-9ICsuaYn.js";import"./Edit-BFCL8ZvY.js";import"./Delete-CvnCkEIf.js";import"./SaveChatflowDialog-C2LCggZV.js";import"./TextField-BEeUeVUl.js";import"./FormControl-Cb0ROeST.js";import"./InputLabel-HPVYUEFn.js";import"./SpeechToText-BX3-pddK.js";import"./IconBulb-CwCq2_I0.js";import"./InputAdornment-D6_duzKN.js";import"./IconTrash-BvhWIQ6v.js";import"./Switch-BtbcRzr_.js";import"./TooltipWithParser-C72LCUcD.js";import"./index-D--Rb2MU.js";import"./CredentialInputHandler-NSWgGX5U.js";import"./CredentialListDialog-ooDI7A-3.js";import"./Dropdown-BH_BuIwh.js";import"./Autocomplete-2B99MXTa.js";import"./Close-CA_iFeNy.js";import"./Input-C2v4FwXn.js";import"./ListItem-C9nlU6HX.js";import"./main-BBsr8sqY.js";import"./IconArrowsMaximize-BrsSDZNx.js";import"./IconAlertTriangle-Bdlxpe5D.js";import"./IconSearch-BzBgax5m.js";import"./ExportAsTemplateDialog-CN3tapJC.js";import"./TableSortLabel-DZVq0i6E.js";import"./Skeleton-BQAmmov-.js";import"./StyledFab-BqTal21_.js";import"./IconCopy-BBl1XuSo.js";import"./Pagination-DyTukyc1.js";import"./LastPage-CMvObEkB.js";const St="/assets/agents_empty-CPmzgTXa.svg",pe=()=>{var L,T,D,N,F,V;const g=et(),a=ot(),[x,M]=s.useState(!0),[y,O]=s.useState({}),[A,z]=s.useState({}),[v,B]=s.useState(""),{error:E,setError:I}=at(),r=rt(wt.getAllAgentflows),[w,_]=s.useState(localStorage.getItem("flowDisplayStyle")||"card"),[m,W]=s.useState(localStorage.getItem("agentFlowVersion")||"v2"),[C,$]=s.useState(1),[p,H]=s.useState(xt),[u,U]=s.useState(0),q=(e,o)=>{$(e),H(o),j(e,o,m)},j=(e,o,i)=>{const c={page:e||C,limit:o||p};r.request(i==="v2"?"AGENTFLOW":"MULTIAGENT",c)},J=(e,o)=>{o!==null&&(localStorage.setItem("flowDisplayStyle",o),_(o))},X=(e,o)=>{o!==null&&(localStorage.setItem("agentFlowVersion",o),W(o),j(1,p,o))},Y=e=>{B(e.target.value)};function b(e){return e.name.toLowerCase().indexOf(v.toLowerCase())>-1||e.category&&e.category.toLowerCase().indexOf(v.toLowerCase())>-1||e.id.toLowerCase().indexOf(v.toLowerCase())>-1}const K=()=>{g(m==="v2"?"/v2/agentcanvas":"/agentcanvas")},Q=e=>{e.type==="AGENTFLOW"?g(`/v2/agentcanvas/${e.id}`):g(`/agentcanvas/${e.id}`)};return s.useEffect(()=>{j(C,p,m)},[]),s.useEffect(()=>{r.error&&I(r.error)},[r.error]),s.useEffect(()=>{M(r.loading)},[r.loading]),s.useEffect(()=>{var e,o;if(r.data)try{const i=(e=r.data)==null?void 0:e.data;U((o=r.data)==null?void 0:o.total);const c={},S={};for(let n=0;n<i.length;n+=1){const Z=i[n].flowData,d=JSON.parse(Z).nodes||[];c[i[n].id]=[],S[i[n].id]=[];for(let l=0;l<d.length;l+=1){if(d[l].data.name==="stickyNote"||d[l].data.name==="stickyNoteAgentflow")continue;const k=st.find(f=>f.name===d[l].data.name);if(k)S[i[n].id].push(k);else{const f=`${it}/api/v1/node-icon/${d[l].data.name}`;c[i[n].id].some(tt=>tt.imageSrc===f)||c[i[n].id].push({imageSrc:f,label:d[l].data.label})}}}O(c),z(S)}catch(i){console.error(i)}},[r.data]),t.jsxs(nt,{children:[E?t.jsx(ht,{error:E}):t.jsxs(P,{flexDirection:"column",sx:{gap:3},children:[t.jsxs(ft,{onSearchChange:Y,search:!0,searchPlaceholder:"Search Name or Category",title:"Agentflows",description:"Multi-agent systems, workflow orchestration",children:[t.jsxs(G,{sx:{borderRadius:2,maxHeight:40},value:m,color:"primary",exclusive:!0,onChange:X,children:[t.jsxs(h,{sx:{borderColor:a.palette.grey[900]+25,borderRadius:2,color:(L=a==null?void 0:a.customization)!=null&&L.isDarkMode?"white":"inherit"},variant:"contained",value:"v2",title:"V2",children:[t.jsx(lt,{sx:{mr:1},label:"NEW",size:"small",color:"primary"}),"V2"]}),t.jsx(h,{sx:{borderColor:a.palette.grey[900]+25,borderRadius:2,color:(T=a==null?void 0:a.customization)!=null&&T.isDarkMode?"white":"inherit"},variant:"contained",value:"v1",title:"V1",children:"V1"})]}),t.jsxs(G,{sx:{borderRadius:2,maxHeight:40},value:w,disabled:u===0,color:"primary",exclusive:!0,onChange:J,children:[t.jsx(h,{sx:{borderColor:a.palette.grey[900]+25,borderRadius:2,color:(D=a==null?void 0:a.customization)!=null&&D.isDarkMode?"white":"inherit"},variant:"contained",value:"card",title:"Card View",children:t.jsx(Ct,{})}),t.jsx(h,{sx:{borderColor:a.palette.grey[900]+25,borderRadius:2,color:(N=a==null?void 0:a.customization)!=null&&N.isDarkMode?"white":"inherit"},variant:"contained",value:"list",title:"List View",children:t.jsx(ct,{})})]}),t.jsx(dt,{permissionId:"agentflows:create",variant:"contained",onClick:K,startIcon:t.jsx(jt,{}),sx:{borderRadius:2,height:40},children:"Add New"})]}),!x&&u>0&&t.jsxs(t.Fragment,{children:[!w||w==="card"?t.jsx(R,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:mt,children:(F=r.data)==null?void 0:F.data.filter(b).map((e,o)=>t.jsx(gt,{onClick:()=>Q(e),data:e,images:y[e.id],icons:A[e.id]},o))}):t.jsx(ut,{isAgentCanvas:!0,isAgentflowV2:m==="v2",data:(V=r.data)==null?void 0:V.data,images:y,icons:A,isLoading:x,filterFunction:b,updateFlowsApi:r,setError:I}),t.jsx(vt,{currentPage:C,limit:p,total:u,onChange:q})]}),!x&&u===0&&t.jsxs(P,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[t.jsx(R,{sx:{p:2,height:"auto"},children:t.jsx("img",{style:{objectFit:"cover",height:"12vh",width:"auto"},src:St,alt:"AgentsEmptySVG"})}),t.jsx("div",{children:"No Agents Yet"})]})]}),t.jsx(pt,{})]})};export{pe as default};
