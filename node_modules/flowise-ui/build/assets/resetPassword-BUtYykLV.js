import{a as q,p as F,u as W,o as $,db as J,r,j as e,M as K,S as x,l as a,Z as O,B as l,a1 as U,aa as X,bh as Z,n as D,E,J as z,K as H}from"./index-B1XR3Coy.js";import{I as m}from"./Input-C2v4FwXn.js";import{B as Q}from"./BackdropLoader-C982mQas.js";import{v as Y}from"./validation-DNbaeON5.js";import{A as _,I as ee}from"./IconExclamationCircle-BsAK4qbB.js";import"./ListItem-C9nlU6HX.js";import"./FormControl-Cb0ROeST.js";import"./Close-CA_iFeNy.js";const ce=()=>{const u=q();F();const I=W(),j=$(),w=(...s)=>j(z(...s)),f=(...s)=>j(H(...s)),T={label:"Email",name:"email",type:"email",placeholder:"user@company.com"},R={label:"Password",name:"password",type:"password",placeholder:"********"},V={label:"Confirm Password",name:"confirmPassword",type:"password",placeholder:"********"},B={label:"Reset Token",name:"resetToken",type:"text"},[A]=J(),L=A.get("token"),[y,g]=r.useState(""),[o,v]=r.useState(""),[P,k]=r.useState(""),[c,b]=r.useState(L??""),[S,d]=r.useState(!1),[p,i]=r.useState([]),M=()=>{I("/signin",{replace:!0})},N=async s=>{s.preventDefault();const t=[];i([]),c||t.push("Token cannot be left blank!"),o!==P&&t.push("New Password and Confirm Password do not match.");const C=Y(o);if(C.length>0&&t.push(...C),t.length>0){i(t);return}const G={user:{email:y,tempToken:c,password:o}};d(!0);try{const n=await Z.resetPassword(G);i([]),d(!1),n.data&&(w({message:"Password reset successful",options:{key:new Date().getTime()+Math.random(),variant:"success",action:h=>e.jsx(D,{style:{color:"white"},onClick:()=>f(h),children:e.jsx(E,{})})}}),g(""),b(""),v(""),k(""),M())}catch(n){d(!1),i([typeof n.response.data=="object"?n.response.data.message:n.response.data]),w({message:"Failed to reset password!",options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:h=>e.jsx(D,{style:{color:"white"},onClick:()=>f(h),children:e.jsx(E,{})})}})}};return e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsxs(x,{flexDirection:"column",sx:{maxWidth:"480px",gap:3},children:[p&&p.length>0&&e.jsx(_,{icon:e.jsx(ee,{}),variant:"filled",severity:"error",children:e.jsx("ul",{style:{margin:0},children:p.map((s,t)=>e.jsx("li",{children:s},t))})}),e.jsxs(x,{sx:{gap:1},children:[e.jsx(a,{variant:"h1",children:"Reset Password"}),e.jsxs(a,{variant:"body2",sx:{color:u.palette.grey[600]},children:[e.jsx(O,{style:{color:u.palette.primary.main},to:"/signin",children:"Back to Login"}),"."]})]}),e.jsx("form",{onSubmit:N,children:e.jsxs(x,{sx:{width:"100%",flexDirection:"column",alignItems:"left",justifyContent:"center",gap:2},children:[e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["Email",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx(a,{align:"left"}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(m,{inputParam:T,onChange:s=>g(s),value:y,showDialog:!1})]}),e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["Reset Token",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(U,{fullWidth:!0,type:"string",placeholder:"Paste in the reset token.",multiline:!0,rows:3,inputParam:B,onChange:s=>b(s.target.value),value:c,sx:{mt:"8px"}}),e.jsx(a,{variant:"caption",children:e.jsx("i",{children:"Please copy the token you received in your email."})})]}),e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["New Password",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx(a,{align:"left"}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(m,{inputParam:R,onChange:s=>v(s),value:o,showDialog:!1}),e.jsx(a,{variant:"caption",children:e.jsx("i",{children:"Password must be at least 8 characters long and contain at least one lowercase letter, one uppercase letter, one digit, and one special character."})})]}),e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["Confirm Password",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(m,{inputParam:V,onChange:s=>k(s),value:P,showDialog:!1}),e.jsx(a,{variant:"caption",children:e.jsx("i",{children:"Confirm your new password. Must match the password typed above."})})]}),e.jsx(X,{variant:"contained",style:{borderRadius:12,height:40,marginRight:5},type:"submit",children:"Update Password"})]})})]})}),S&&e.jsx(Q,{open:S})]})};export{ce as default};
