import{P as v,o as O,p as M,r as u,j as e,B as b,aA as G,a1 as q,a8 as E,aa as D,n as S,E as k,al as B,J as F,K as R,S as T,l as I,a as Y,a0 as Z,a2 as Q,a4 as U}from"./index-B1XR3Coy.js";import{c as L}from"./chatflows-ITLPd47E.js";import{I as P}from"./IconBulb-CwCq2_I0.js";import{I as H}from"./InputAdornment-D6_duzKN.js";import{I as J}from"./IconTrash-BvhWIQ6v.js";import{I as N}from"./IconPlus-DpyX5kZB.js";import{S as z}from"./Switch-BtbcRzr_.js";import{T as W}from"./TooltipWithParser-C72LCUcD.js";import{C as V}from"./CredentialInputHandler-NSWgGX5U.js";import{L as X,I as _}from"./Input-C2v4FwXn.js";import{D as $}from"./Dropdown-BH_BuIwh.js";import{F as ee}from"./FormControl-Cb0ROeST.js";import{L as te}from"./ListItem-C9nlU6HX.js";const ae=({dialogProps:r})=>{const h=O();M();const g=(...s)=>h(F(...s)),f=(...s)=>h(R(...s)),[l,n]=u.useState([{prompt:""}]),[m,o]=u.useState({}),A=()=>{n([...l,{prompt:""}])},j=s=>{const c=[...l];c.splice(s,1),n(c)},i=(s,c)=>{const{name:t,value:a}=c.target,d=[...l];d[s][t]=a,n(d)},w=async()=>{try{let s={starterPrompts:{...l}};m.starterPrompts=s.starterPrompts;const c=await L.updateChatflow(r.chatflow.id,{chatbotConfig:JSON.stringify(m)});c.data&&(g({message:"Conversation Starter Prompts Saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:t=>e.jsx(S,{style:{color:"white"},onClick:()=>f(t),children:e.jsx(k,{})})}}),h({type:B,chatflow:c.data}))}catch(s){g({message:`Failed to save Conversation Starter Prompts: ${typeof s.response.data=="object"?s.response.data.message:s.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:c=>e.jsx(S,{style:{color:"white"},onClick:()=>f(c),children:e.jsx(k,{})})}})}};return u.useEffect(()=>{if(r.chatflow&&r.chatflow.chatbotConfig)try{let s=JSON.parse(r.chatflow.chatbotConfig);if(o(s||{}),s.starterPrompts){let c=[];Object.getOwnPropertyNames(s.starterPrompts).forEach(t=>{s.starterPrompts[t]&&c.push(s.starterPrompts[t])}),n(c)}else n([{prompt:""}])}catch{n([{prompt:""}])}return()=>{}},[r]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",borderRadius:10,background:"#d8f3dc",padding:10},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e.jsx(P,{size:30,color:"#2d6a4f"}),e.jsx("span",{style:{color:"#2d6a4f",marginLeft:10,fontWeight:500},children:"Starter prompts will only be shown when there is no messages on the chat"})]})}),e.jsx(b,{sx:{"& > :not(style)":{m:1},pt:2},children:e.jsx(G,{children:l.map((s,c)=>e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsx(b,{sx:{width:"95%",mb:1},children:e.jsx(q,{sx:{width:"100%"},type:"text",onChange:t=>i(c,t),size:"small",value:s.prompt,name:"prompt",endAdornment:e.jsx(H,{position:"end",sx:{padding:"2px"},children:l.length>1&&e.jsx(E,{sx:{height:30,width:30},size:"small",color:"error",disabled:l.length===1,onClick:()=>j(c),edge:"end",children:e.jsx(J,{})})})},c)}),e.jsx(b,{sx:{width:"5%",mb:1},children:c===l.length-1&&e.jsx(E,{color:"primary",onClick:A,children:e.jsx(N,{})})})]},c))})}),e.jsx(D,{variant:"contained",onClick:w,children:"Save"})]})};ae.propTypes={show:v.bool,dialogProps:v.object,onCancel:v.func,onConfirm:v.func};const oe=({dialogProps:r})=>{const h=O();M();const g=(...i)=>h(F(...i)),f=(...i)=>h(R(...i)),[l,n]=u.useState(!1),[m,o]=u.useState({}),A=i=>{n(i)},j=async()=>{try{let i={chatFeedback:{status:l}};m.chatFeedback=i.chatFeedback;const w=await L.updateChatflow(r.chatflow.id,{chatbotConfig:JSON.stringify(m)});w.data&&(g({message:"Chat Feedback Settings Saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:s=>e.jsx(S,{style:{color:"white"},onClick:()=>f(s),children:e.jsx(k,{})})}}),h({type:B,chatflow:w.data}))}catch(i){g({message:`Failed to save Chat Feedback Settings: ${typeof i.response.data=="object"?i.response.data.message:i.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:w=>e.jsx(S,{style:{color:"white"},onClick:()=>f(w),children:e.jsx(k,{})})}})}};return u.useEffect(()=>{if(r.chatflow&&r.chatflow.chatbotConfig){let i=JSON.parse(r.chatflow.chatbotConfig);o(i||{}),i.chatFeedback&&n(i.chatFeedback.status)}return()=>{}},[r]),e.jsxs(e.Fragment,{children:[e.jsx(b,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:e.jsx(z,{label:"Enable chat feedback",onChange:A,value:l})}),e.jsx(D,{style:{marginBottom:10,marginTop:10},variant:"contained",onClick:j,children:"Save"})]})};oe.propTypes={dialogProps:v.object};const ne=({dialogProps:r})=>{const h=O();M();const g=(...t)=>h(F(...t)),f=(...t)=>h(R(...t)),[l,n]=u.useState([""]),[m,o]=u.useState(""),[A,j]=u.useState({}),i=()=>{n([...l,""])},w=t=>{const a=[...l];a.splice(t,1),n(a)},s=(t,a)=>{const{value:d}=a.target,p=[...l];p[t]=d,n(p)},c=async()=>{try{let t={allowedOrigins:[...l],allowedOriginsError:m};A.allowedOrigins=t.allowedOrigins,A.allowedOriginsError=t.allowedOriginsError;const a=await L.updateChatflow(r.chatflow.id,{chatbotConfig:JSON.stringify(A)});a.data&&(g({message:"Allowed Origins Saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:d=>e.jsx(S,{style:{color:"white"},onClick:()=>f(d),children:e.jsx(k,{})})}}),h({type:B,chatflow:a.data}))}catch(t){g({message:`Failed to save Allowed Origins: ${typeof t.response.data=="object"?t.response.data.message:t.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:a=>e.jsx(S,{style:{color:"white"},onClick:()=>f(a),children:e.jsx(k,{})})}})}};return u.useEffect(()=>{if(r.chatflow&&r.chatflow.chatbotConfig)try{let t=JSON.parse(r.chatflow.chatbotConfig);if(j(t||{}),t.allowedOrigins){let a=[...t.allowedOrigins];n(a)}else n([""]);t.allowedOriginsError?o(t.allowedOriginsError):o("")}catch{n([""]),o("")}return()=>{}},[r]),e.jsxs(T,{direction:"column",spacing:2,sx:{alignItems:"start"},children:[e.jsxs(I,{variant:"h3",children:["Allowed Domains",e.jsx(W,{style:{mb:1,mt:2,marginLeft:10},title:"Your chatbot will only work when used from the following domains."})]}),e.jsxs(T,{direction:"column",spacing:2,sx:{width:"100%"},children:[e.jsxs(T,{direction:"column",spacing:2,children:[e.jsx(I,{children:"Domains"}),l.map((t,a)=>e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsx(b,{sx:{width:"100%",mb:1},children:e.jsx(q,{sx:{width:"100%"},type:"text",onChange:d=>s(a,d),size:"small",value:t,name:"origin",placeholder:"https://example.com",endAdornment:e.jsx(H,{position:"end",sx:{padding:"2px"},children:l.length>1&&e.jsx(E,{sx:{height:30,width:30},size:"small",color:"error",disabled:l.length===1,onClick:()=>w(a),edge:"end",children:e.jsx(J,{})})})},a)}),e.jsx(b,{sx:{width:"5%",mb:1},children:a===l.length-1&&e.jsx(E,{color:"primary",onClick:i,children:e.jsx(N,{})})})]},a))]}),e.jsxs(T,{direction:"column",spacing:1,children:[e.jsxs(I,{children:["Error Message",e.jsx(W,{style:{mb:1,mt:2,marginLeft:10},title:"Custom error message that will be shown when for unauthorized domain"})]}),e.jsx(q,{sx:{width:"100%"},type:"text",size:"small",fullWidth:!0,placeholder:"Unauthorized domain!",value:m,onChange:t=>{o(t.target.value)}})]})]}),e.jsx(D,{variant:"contained",onClick:c,children:"Save"})]})};ne.propTypes={dialogProps:v.object};const se="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.9814%2025.2665C15.353%2026.2672%2016.0645%2027.1054%2016.9914%2027.6347C17.9183%2028.164%2019.0018%2028.3507%2020.0524%2028.1622C21.103%2027.9737%2022.054%2027.422%2022.7391%2026.6034C23.4242%2025.7849%2023.7998%2024.7517%2023.8004%2023.6842V17.5533C23.8004%2017.1909%2023.6043%2016.8569%2023.2879%2016.6802L15.9995%2012.6108'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7.17701%2019.5848C6.49568%2020.4069%206.12505%2021.4424%206.12993%2022.5101C6.13481%2023.5779%206.51489%2024.6099%207.2037%2025.4258C7.89252%2026.2416%208.84622%2026.7893%209.89802%2026.9732C10.9498%2027.157%2012.0328%2026.9653%2012.9575%2026.4314L18.1044%2023.4263C18.4114%2023.247%2018.6002%2022.9182%2018.6002%2022.5627V14.106'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8.19877%209.98459C6.39026%209.67775%204.57524%2010.4982%203.60403%2012.1806C3.00524%2013.2178%202.84295%2014.4504%203.15284%2015.6073C3.46273%2016.7642%204.21943%2017.7507%205.25652%2018.3498L10.3049%2021.3269C10.6109%2021.5074%2010.9898%2021.5119%2011.3001%2021.3388L18.6%2017.2655'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.0172%206.06585C16.6456%205.06522%2015.9342%204.227%2015.0072%203.6977C14.0803%203.1684%2012.9969%202.98168%2011.9462%203.17018C10.8956%203.35869%209.94464%203.91042%209.25954%204.72895C8.57444%205.54747%208.19879%206.58074%208.19824%207.64814V13.6575C8.19824%2014.0154%208.38951%2014.346%208.69977%2014.5244L15.9992%2018.7215'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.8216%2011.7476C25.5029%2010.9255%2025.8735%209.89004%2025.8687%208.8223C25.8638%207.75457%2025.4837%206.72253%2024.7949%205.90667C24.1061%205.09082%2023.1524%204.54308%2022.1006%204.35924C21.0488%204.17541%2019.9658%204.36718%2019.0411%204.90101L13.8942%207.90613C13.5872%208.08539%2013.3984%208.41418%2013.3984%208.76971V17.2265'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M23.7997%2021.2595C25.6082%2021.5663%2027.4232%2020.7459%2028.3944%2019.0635C28.9932%2018.0263%2029.1555%2016.7937%2028.8456%2015.6368C28.5357%2014.4799%2027.779%2013.4934%2026.7419%2012.8943L21.6409%209.91752C21.3316%209.73703%2020.9494%209.7357%2020.6388%209.91405L17.2696%2011.849L13.3984%2014.0723'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ie="/assets/assemblyai-DgONwkn3.png",re="/assets/localai-Gr-WJuJK.png",le="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.946%205H19l-7.322%2022.216a1.15%201.15%200%200%201-.41.568c-.19.14-.42.216-.656.216H5.123a1.11%201.11%200%200%201-.513-.127%201.132%201.132%200%200%201-.4-.352%201.165%201.165%200%200%201-.151-1.038l6.822-20.7a1.15%201.15%200%200%201%20.41-.567c.19-.14.42-.216.655-.216Z'%20fill='%230A5FAB'/%3e%3cpath%20d='M22.334%2020H11.502c-.1%200-.2.031-.282.09a.52.52%200%200%200-.185.241.545.545%200%200%200%20.125.576l6.96%206.786c.203.197.47.307.747.307H25l-2.666-8Z'%20fill='%230078D4'/%3e%3cpath%20d='M21.035%205.782a1.149%201.149%200%200%200-.415-.566A1.128%201.128%200%200%200%2019.957%205H12c.238%200%20.47.076.663.216.193.14.338.338.414.566l6.906%2020.7a1.16%201.16%200%200%201-.558%201.391%201.12%201.12%200%200%201-.52.127h7.959a1.127%201.127%200%200%200%20.923-.48%201.159%201.159%200%200%200%20.153-1.038l-6.905-20.7Z'%20fill='%232C9DE3'/%3e%3c/svg%3e",ce="data:image/png;base64,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",C={OPENAI_WHISPER:"openAIWhisper",ASSEMBLYAI_TRANSCRIBE:"assemblyAiTranscribe",LOCALAI_STT:"localAISTT",AZURE_COGNITIVE:"azureCognitive",GROQ_WHISPER:"groqWhisper"},x={[C.OPENAI_WHISPER]:{label:"OpenAI Whisper",name:C.OPENAI_WHISPER,icon:se,url:"https://platform.openai.com/docs/guides/speech-to-text",inputs:[{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["openAIApi"]},{label:"Language",name:"language",type:"string",description:"The language of the input audio. Supplying the input language in ISO-639-1 format will improve accuracy and latency.",placeholder:"en",optional:!0},{label:"Prompt",name:"prompt",type:"string",rows:4,description:"An optional text to guide the model's style or continue a previous audio segment. The prompt should match the audio language.",optional:!0},{label:"Temperature",name:"temperature",type:"number",step:.1,description:"The sampling temperature, between 0 and 1. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic.",optional:!0}]},[C.ASSEMBLYAI_TRANSCRIBE]:{label:"Assembly AI",name:C.ASSEMBLYAI_TRANSCRIBE,icon:ie,url:"https://www.assemblyai.com/",inputs:[{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["assemblyAIApi"]}]},[C.LOCALAI_STT]:{label:"LocalAi STT",name:C.LOCALAI_STT,icon:re,url:"https://localai.io/features/audio-to-text/",inputs:[{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["localAIApi"]},{label:"Base URL",name:"baseUrl",type:"string",description:"The base URL of the local AI server"},{label:"Language",name:"language",type:"string",description:"The language of the input audio. Supplying the input language in ISO-639-1 format will improve accuracy and latency.",placeholder:"en",optional:!0},{label:"Model",name:"model",type:"string",description:"The STT model to load. Defaults to whisper-1 if left blank.",placeholder:"whisper-1",optional:!0},{label:"Prompt",name:"prompt",type:"string",rows:4,description:"An optional text to guide the model's style or continue a previous audio segment. The prompt should match the audio language.",optional:!0},{label:"Temperature",name:"temperature",type:"number",step:.1,description:"The sampling temperature, between 0 and 1. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic.",optional:!0}]},[C.AZURE_COGNITIVE]:{label:"Azure Cognitive Services",name:C.AZURE_COGNITIVE,icon:le,url:"https://azure.microsoft.com/en-us/products/cognitive-services/speech-services",inputs:[{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["azureCognitiveServices"]},{label:"Language",name:"language",type:"string",description:'The recognition language (e.g., "en-US", "es-ES")',placeholder:"en-US",optional:!0},{label:"Profanity Filter Mode",name:"profanityFilterMode",type:"options",description:"How to handle profanity in the transcription",options:[{label:"None",name:"None"},{label:"Masked",name:"Masked"},{label:"Removed",name:"Removed"}],default:"Masked",optional:!0},{label:"Audio Channels",name:"channels",type:"string",description:'Comma-separated list of audio channels to process (e.g., "0,1")',placeholder:"0,1",default:"0,1"}]},[C.GROQ_WHISPER]:{label:"Groq Whisper",name:C.GROQ_WHISPER,icon:ce,url:"https://console.groq.com/",inputs:[{label:"Model",name:"model",type:"string",description:"The STT model to load. Defaults to whisper-large-v3 if left blank.",placeholder:"whisper-large-v3",optional:!0},{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["groqApi"]},{label:"Language",name:"language",type:"string",description:"The language of the input audio. Supplying the input language in ISO-639-1 format will improve accuracy and latency.",placeholder:"en",optional:!0},{label:"Temperature",name:"temperature",type:"number",step:.1,description:"The sampling temperature, between 0 and 1. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic.",optional:!0}]}},de=({dialogProps:r})=>{var s,c;const h=O();M();const g=Y(),f=(...t)=>h(F(...t)),l=(...t)=>h(R(...t)),[n,m]=u.useState({}),[o,A]=u.useState("none"),j=async()=>{const t=i(!0,o,"status");try{const a=await L.updateChatflow(r.chatflow.id,{speechToText:JSON.stringify(t)});a.data&&(f({message:"Speech To Text Configuration Saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:d=>e.jsx(S,{style:{color:"white"},onClick:()=>l(d),children:e.jsx(k,{})})}}),h({type:B,chatflow:a.data}))}catch(a){f({message:`Failed to save Speech To Text Configuration: ${typeof a.response.data=="object"?a.response.data.message:a.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:d=>e.jsx(S,{style:{color:"white"},onClick:()=>l(d),children:e.jsx(k,{})})}})}},i=(t,a,d)=>{let p={};return Object.prototype.hasOwnProperty.call(n,a)?p={...n}:p={...n,[a]:{}},p[a][d]=t,d==="status"&&t===!0&&(Object.keys(x).forEach(y=>{const K=x[y];K.name!==a&&(p[K.name]={...n[K.name],status:!1})}),a!=="none"&&p.none&&(p.none.status=!1)),m(p),p},w=t=>{A(t.target.value)};return u.useEffect(()=>{if(r.chatflow&&r.chatflow.speechToText)try{const t=JSON.parse(r.chatflow.speechToText);let a="none";Object.keys(x).forEach(d=>{const p=t[d];p&&p.status&&(a=d)}),A(a),m(t)}catch(t){m({}),A("none"),console.error(t)}return()=>{m({}),A("none")}},[r]),e.jsxs(e.Fragment,{children:[e.jsxs(b,{fullWidth:!0,sx:{mb:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(I,{children:"Providers"}),e.jsx(ee,{fullWidth:!0,children:e.jsxs(Z,{size:"small",value:o,onChange:w,sx:{"& .MuiSvgIcon-root":{color:(s=g==null?void 0:g.customization)!=null&&s.isDarkMode?"#fff":"inherit"}},children:[e.jsx(Q,{value:"none",children:"None"}),Object.values(x).map(t=>e.jsx(Q,{value:t.name,children:t.label},t.name))]})})]}),o!=="none"&&e.jsxs(e.Fragment,{children:[e.jsxs(te,{sx:{mt:3},alignItems:"center",children:[e.jsx(X,{children:e.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"AI",src:x[o].icon})})}),e.jsx(U,{sx:{ml:1},primary:x[o].label,secondary:e.jsx("a",{target:"_blank",rel:"noreferrer",href:x[o].url,children:x[o].url})})]}),x[o].inputs.map((t,a)=>{var d,p;return e.jsxs(b,{sx:{p:2},children:[e.jsx("div",{style:{display:"flex",flexDirection:"row"},children:e.jsxs(I,{children:[t.label,!t.optional&&e.jsx("span",{style:{color:"red"},children:" *"}),t.description&&e.jsx(W,{style:{marginLeft:10},title:t.description})]})}),t.type==="credential"&&e.jsx(V,{data:(d=n[o])!=null&&d.credentialId?{credential:n[o].credentialId}:{},inputParam:t,onSelect:y=>i(y,o,"credentialId")},(p=n[o])==null?void 0:p.credentialId),t.type==="boolean"&&e.jsx(z,{onChange:y=>i(y,o,t.name),value:n[o]?n[o][t.name]:t.default??!1}),(t.type==="string"||t.type==="password"||t.type==="number")&&e.jsx(_,{inputParam:t,onChange:y=>i(y,o,t.name),value:n[o]?n[o][t.name]:t.default??""}),t.type==="options"&&e.jsx($,{name:t.name,options:t.options,onSelect:y=>i(y,o,t.name),value:n[o]?n[o][t.name]:t.default??"choose an option"})]},a)})]}),e.jsx(D,{style:{marginBottom:10,marginTop:10},disabled:o!=="none"&&!((c=n[o])!=null&&c.credentialId),variant:"contained",onClick:j,children:"Save"})]})};de.propTypes={dialogProps:v.object};export{ne as A,oe as C,ae as S,de as a,le as b,ce as g,se as o};
