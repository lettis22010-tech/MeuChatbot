import{t as F,M as z,j as t,P as y,a as X,r as a,bI as J,cn as C,B as h,l as I,o as A,q as ee,H as _,D as te,k as se,bN as ie,s as ne,R as L,a8 as G,ba as q,c8 as U}from"./index-B1XR3Coy.js";import{D as oe}from"./Dropdown-BH_BuIwh.js";import{T as K,t as Q}from"./Tooltip-9ICsuaYn.js";import{i as le,H as D,j as T,N as re}from"./DocStoreInputHandler-9-EYgHTZ.js";import{I as ae}from"./Input-C2v4FwXn.js";import{I as de}from"./IconCopy-BBl1XuSo.js";import{I as ce}from"./IconTrash-BvhWIQ6v.js";const pe=F(z)(({theme:e})=>{var s;return{background:e.palette.card.main,color:e.darkTextPrimary,border:`1px solid ${(s=e.customization)!=null&&s.isDarkMode?e.palette.grey[900]+25:e.palette.primary[200]+75}`,width:"300px",height:"auto",padding:"10px",boxShadow:"rgba(0, 0, 0, 0.05) 0px 0px 0px 1px","&:hover":{borderColor:e.palette.primary.main,boxShadow:"rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}}),xe=F(({className:e,...s})=>t.jsx(K,{...s,classes:{popper:e}}))(({theme:e})=>({[`& .${Q.tooltip}`]:{backgroundColor:e.palette.nodeToolTip.background,color:e.palette.nodeToolTip.color,boxShadow:e.shadows[1]}})),w=F(({className:e,...s})=>t.jsx(K,{...s,classes:{popper:e}}))({[`& .${Q.tooltip}`]:{maxWidth:500}}),fe=({outputAnchor:e,data:s,disabled:j=!1})=>{var E,N,H,V,O,P,R,M;const n=X(),r=a.useRef(null),d=le(),[l,b]=a.useState(0),[p,u]=a.useState(0),[x,k]=a.useState(0),[f,v]=a.useState(null),{reactFlowInstance:m}=a.useContext(J),c=(i=[])=>i.filter(o=>!o.hidden&&!o.isAnchor),S=(i=[])=>i.filter(o=>!o.hidden&&o.isAnchor),Z=(i,o)=>{const g=p/(S(i).length+1);return x+g*(o+1)};return a.useEffect(()=>{var i,o;r.current&&((i=r.current)!=null&&i.offsetTop)&&((o=r.current)!=null&&o.clientHeight)&&setTimeout(()=>{var g,B,W,$;u((g=r.current)==null?void 0:g.clientHeight),k((B=r.current)==null?void 0:B.offsetTop),b(((W=r.current)==null?void 0:W.offsetTop)+(($=r.current)==null?void 0:$.clientHeight)/2),d(s.id)},0)},[s.id,r,d]),a.useEffect(()=>{setTimeout(()=>{d(s.id)},0)},[s.id,l,d]),a.useEffect(()=>{f&&setTimeout(()=>{d(s.id)},0)},[s.id,f,d]),t.jsxs("div",{ref:r,children:[e.type!=="options"&&!e.options&&t.jsxs(t.Fragment,{children:[t.jsx(w,{placement:"right",title:e.type,children:t.jsx(D,{type:"source",position:T.Right,id:e.id,isValidConnection:i=>C(i,m),style:{height:10,width:10,backgroundColor:s.selected?n.palette.primary.main:n.palette.text.secondary,top:l}},e.id)}),t.jsx(h,{sx:{p:2,textAlign:"end"},children:t.jsx(I,{children:e.label})})]}),s.name!=="ifElseFunction"&&e.type==="options"&&e.options&&S(e.options).length>0&&t.jsx("div",{style:{display:"flex",flexDirection:"column"},children:S(e.options).map((i,o)=>t.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[t.jsx(w,{placement:"right",title:i.type,children:t.jsx(D,{type:"source",position:T.Right,id:i==null?void 0:i.id,isValidConnection:g=>C(g,m),style:{height:10,width:10,backgroundColor:s.selected?n.palette.primary.main:n.palette.text.secondary,top:Z(e.options,o)}},o)}),t.jsx("div",{style:{flex:1}}),t.jsx(h,{sx:{p:2,textAlign:"end"},children:t.jsx(I,{children:i.label})})]},i.id))}),s.name==="ifElseFunction"&&e.type==="options"&&e.options&&t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[t.jsx(w,{placement:"right",title:((E=e.options.find(i=>{var o;return i.name===((o=s.outputs)==null?void 0:o[e.name])}))==null?void 0:E.type)??e.type,children:t.jsx(D,{type:"source",position:T.Right,id:((N=e.options.find(i=>i.name==="returnTrue"))==null?void 0:N.id)??"",isValidConnection:i=>C(i,m),style:{height:10,width:10,backgroundColor:s.selected?n.palette.primary.main:n.palette.text.secondary,top:l-25}},((H=e.options.find(i=>i.name==="returnTrue"))==null?void 0:H.id)??"")}),t.jsx("div",{style:{flex:1}}),t.jsx(h,{sx:{p:2,textAlign:"end"},children:t.jsx(I,{children:"True"})})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[t.jsx(w,{placement:"right",title:((V=e.options.find(i=>{var o;return i.name===((o=s.outputs)==null?void 0:o[e.name])}))==null?void 0:V.type)??e.type,children:t.jsx(D,{type:"source",position:T.Right,id:((O=e.options.find(i=>i.name==="returnFalse"))==null?void 0:O.id)??"",isValidConnection:i=>C(i,m),style:{height:10,width:10,backgroundColor:s.selected?n.palette.primary.main:n.palette.text.secondary,top:l+25}},((P=e.options.find(i=>i.name==="returnFalse"))==null?void 0:P.id)??"")}),t.jsx("div",{style:{flex:1}}),t.jsx(h,{sx:{p:2,textAlign:"end"},children:t.jsx(I,{children:"False"})})]})]}),s.name!=="ifElseFunction"&&e.type==="options"&&e.options&&c(e.options).length>0&&t.jsxs(t.Fragment,{children:[t.jsx(w,{placement:"right",title:((R=e.options.find(i=>{var o;return i.name===((o=s.outputs)==null?void 0:o[e.name])}))==null?void 0:R.type)??e.type,children:t.jsx(D,{type:"source",position:T.Right,id:((M=e.options.find(i=>{var o;return i.name===((o=s.outputs)==null?void 0:o[e.name])}))==null?void 0:M.id)??"",isValidConnection:i=>C(i,m),style:{height:10,width:10,backgroundColor:s.selected?n.palette.primary.main:n.palette.text.secondary,top:l}})}),t.jsx(h,{sx:{p:2,textAlign:"end"},children:t.jsx(oe,{disabled:j,disableClearable:!0,name:e.name,options:c(e.options),onSelect:i=>{v(i),s.outputs[e.name]=i},value:s.outputs[e.name]??e.default??"choose an option"})})]})]})};fe.propTypes={outputAnchor:y.object,data:y.object,disabled:y.bool};const me=({show:e,dialogProps:s,onCancel:j})=>{const n=document.getElementById("portal"),r=A(),[d,l]=a.useState([]),[b,p]=a.useState({});a.useEffect(()=>(s.inputParams&&l(s.inputParams),s.data&&p(s.data),()=>{l([]),p({})}),[s]),a.useEffect(()=>(r(e?{type:ee}:{type:_}),()=>r({type:_})),[e,r]);const u=e?t.jsx(te,{onClose:j,open:e,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:t.jsx(se,{children:t.jsx(ie,{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:d.filter(x=>x.display!==!1).map((x,k)=>t.jsx(re,{disabled:s.disabled,inputParam:x,data:b,isAdditionalParams:!0},k))})})}):null;return ne.createPortal(u,n)};me.propTypes={show:y.bool,dialogProps:y.object,onCancel:y.func};const Y=({data:e})=>{const s=X(),j=L(c=>c.canvas),n=L(c=>c.customization),{deleteNode:r,duplicateNode:d}=a.useContext(J),[l]=e.inputParams,[b,p]=a.useState(!1),u=()=>{p(!1)},x=()=>{p(!0)},f=e.color||"#FFE770",v=()=>e.selected?s.palette.primary.main:n!=null&&n.isDarkMode?s.palette.grey[700]:s.palette.grey[900]+50,m=()=>n!=null&&n.isDarkMode?e.selected?q(f,.7):q(f,.8):e.selected?U(f,.1):U(f,.2);return t.jsx(t.Fragment,{children:t.jsx(pe,{content:!1,sx:{padding:0,borderColor:v(),backgroundColor:m()},border:!1,children:t.jsx(xe,{open:!j.canvasDialogShow&&b,onClose:u,onOpen:x,disableFocusListener:!0,title:t.jsxs("div",{style:{background:"transparent",display:"flex",flexDirection:"column"},children:[t.jsx(G,{title:"Duplicate",onClick:()=>{d(e.id)},sx:{height:"35px",width:"35px",color:n!=null&&n.isDarkMode?"white":"inherit","&:hover":{color:s==null?void 0:s.palette.primary.main}},children:t.jsx(de,{})}),t.jsx(G,{title:"Delete",onClick:()=>{r(e.id)},sx:{height:"35px",width:"35px",color:n!=null&&n.isDarkMode?"white":"inherit","&:hover":{color:s==null?void 0:s.palette.error.main}},children:t.jsx(ce,{})})]}),placement:"right-start",children:t.jsx(h,{children:t.jsx(ae,{inputParam:l,onChange:c=>e.inputs[l.name]=c,value:e.inputs[l.name]??l.default??"",nodes:l!=null&&l.acceptVariable&&reactFlowInstance?reactFlowInstance.getNodes():[],edges:l!=null&&l.acceptVariable&&reactFlowInstance?reactFlowInstance.getEdges():[],nodeId:e.id},e.id)})})})})};Y.propTypes={data:y.object};const De=a.memo(Y);export{me as A,pe as N,De as S,xe as a,fe as b};
