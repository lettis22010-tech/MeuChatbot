import{a as y,u as I,R as O,cS as M,r as a,bI as P,j as t,B as p,cZ as R,am as A}from"./index-B1XR3Coy.js";import{C as B,I as T,a as _,B as J}from"./style-BgWmVXbp.js";/* empty css              */import{E as z,A as G,S as V,I as Z,a as $}from"./EditNodeDialog-guRnCdCZ.js";import{M as H}from"./MarketplaceCanvasHeader-CMoqBDo6.js";import{u as L,b as W,R as q}from"./DocStoreInputHandler-9-EYgHTZ.js";import"./NodeInfoDialog-BBny0-Sx.js";import"./Table-CcAGPqUI.js";import"./TooltipWithParser-C72LCUcD.js";import"./index-D--Rb2MU.js";import"./Tooltip-9ICsuaYn.js";import"./config-CuKonRqx.js";import"./StopCircle-i-Eq3mUR.js";import"./ButtonGroup-glLVEjXK.js";import"./IconCopy-BBl1XuSo.js";import"./IconTrash-BvhWIQ6v.js";import"./Input-C2v4FwXn.js";import"./ListItem-C9nlU6HX.js";import"./FormControl-Cb0ROeST.js";import"./TextField-BEeUeVUl.js";import"./InputLabel-HPVYUEFn.js";import"./IconChevronLeft-Dkfa8829.js";import"./Dropdown-BH_BuIwh.js";import"./Autocomplete-2B99MXTa.js";import"./Close-CA_iFeNy.js";import"./MultiDropdown-OnTaU3K-.js";import"./CredentialInputHandler-NSWgGX5U.js";import"./CredentialListDialog-ooDI7A-3.js";import"./ConfirmDialog-Bksga_et.js";import"./Switch-BtbcRzr_.js";import"./main-BBsr8sqY.js";import"./IconArrowsMaximize-BrsSDZNx.js";import"./IconAlertTriangle-Bdlxpe5D.js";import"./InputAdornment-D6_duzKN.js";import"./IconSearch-BzBgax5m.js";import"./Delete-CvnCkEIf.js";import"./IconPlus-DpyX5kZB.js";import"./Grid-DtMOPoeK.js";import"./toPropertyKey-hKuLU48H.js";import"./createStyled-BzRwilhm.js";import"./Skeleton-BQAmmov-.js";import"./KeyboardArrowRight-KQTKBFVE.js";import"./LastPage-CMvObEkB.js";import"./GridActionsCellItem-C4fgcfe6.js";import"./File-B2PWlg1I.js";import"./CodeEditor-BjDzi2Vy.js";import"./index-DhL3T6x0.js";import"./suggestionOption-CTRD7oqB.js";import"./TabPanel-C2EL9Kp7.js";import"./ExpandMore-BP5oMSwT.js";import"./nodes-D-x6LTqi.js";import"./MemoizedReactMarkdown-CNH2mkE4.js";import"./BackdropLoader-C982mQas.js";import"./ExpandTextDialog-Sszv9N4G.js";import"./LoadingButton-BHZSG_sF.js";import"./IconRefresh-B2aTlEaU.js";import"./ToolDialog-hiXiaWJY.js";import"./ExportAsTemplateDialog-CN3tapJC.js";import"./AssistantDialog-BG0DIOgO.js";import"./assistants-C-o7l-z6.js";import"./v4-D8aEg3BZ.js";import"./Stepper-CvQjJ8b9.js";import"./IconLanguage-Dreb5nKM.js";import"./documentstore-GQ_lrBF1.js";import"./string-3NetaFjT.js";import"./IconBulb-CwCq2_I0.js";const K={agentFlow:G,stickyNote:V,iteration:Z},Q={agentFlow:$},mo=()=>{const n=y(),m=I(),l=O(o=>o.customization),{state:c}=M(),{flowData:r,name:d}=c,[g,f,u]=L(),[x,w,h]=W(),[N,s]=a.useState(!1),[j,C]=a.useState({}),[i,b]=a.useState(!1),S=a.useRef(null),{setReactFlowInstance:k}=a.useContext(P);a.useEffect(()=>{if(r){const o=JSON.parse(r);f(o.nodes||[]),w(o.edges||[])}},[r]);const E=o=>{const e=JSON.stringify(o);m("/v2/agentcanvas",{state:{templateFlowData:e}})},v=a.useCallback((o,e)=>{if(!(!e||!e.data)&&e.data.name!=="stickyNoteAgentflow"){const D={data:e.data,inputParams:e.data.inputParams.filter(F=>!F.hidden),disabled:!0};C(D),s(!0)}});return t.jsx(t.Fragment,{children:t.jsxs(p,{children:[t.jsx(R,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:1,sx:{bgcolor:n.palette.background.default},children:t.jsx(A,{children:t.jsx(H,{flowName:d,flowData:JSON.parse(r),onChatflowCopy:o=>E(o)})})}),t.jsx(p,{sx:{pt:"70px",height:"100vh",width:"100%"},children:t.jsx("div",{className:"reactflow-parent-wrapper",children:t.jsx("div",{className:"reactflow-wrapper",ref:S,children:t.jsxs(q,{nodes:g,edges:x,onNodesChange:u,onEdgesChange:h,onNodeDoubleClick:v,onInit:k,nodeTypes:K,edgeTypes:Q,fitView:!0,minZoom:.1,snapGrid:[25,25],snapToGrid:i,children:[t.jsx(B,{className:l.isDarkMode?"dark-mode-controls":"",style:{display:"flex",flexDirection:"row",left:"50%",transform:"translate(-50%, -50%)"},children:t.jsx("button",{className:"react-flow__controls-button react-flow__controls-interactive",onClick:()=>{b(!i)},title:"toggle snapping","aria-label":"toggle snapping",children:i?t.jsx(T,{}):t.jsx(_,{})})}),t.jsx(J,{color:"#aaa",gap:16}),t.jsx(z,{show:N,dialogProps:j,onCancel:()=>s(!1)})]})})})})]})})};export{mo as default};
