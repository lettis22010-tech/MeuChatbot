import{f as O,i as $,j as e,P as s,r as n,D as F,h as L,k as V,B as re,C as Te,l as ie,m as nt,n as P,o as B,p as N,q as X,H as k,s as Q,t as ce,v as rt,w as it,c as ct,x as dt,y as b,z as ve,E as oe,F as le,G as pt,J as ut,K as mt,L as xt,N as be,O as _e,Q as ht,a as ft,R as gt,U as jt,V as yt,W as vt,X as bt,Y as Dt,Z as St,_ as Ct,S as wt}from"./index-B1XR3Coy.js";import{d as Tt}from"./Edit-BFCL8ZvY.js";import{d as _t}from"./Delete-CvnCkEIf.js";import{c as De}from"./chatflows-ITLPd47E.js";import{u as kt}from"./ConfirmDialog-Bksga_et.js";import{S as Ot}from"./SaveChatflowDialog-C2LCggZV.js";import{T as $t}from"./TextField-BEeUeVUl.js";import{S as Mt,C as It,A as Pt,a as zt}from"./SpeechToText-BX3-pddK.js";import{E as Rt}from"./ExportAsTemplateDialog-CN3tapJC.js";import{M as Et}from"./ItemCard-DFH1pXJi.js";import{T as Se}from"./TableSortLabel-DZVq0i6E.js";import{S as D}from"./Skeleton-BQAmmov-.js";import{T as Ce}from"./Tooltip-9ICsuaYn.js";var de={},Ft=$;Object.defineProperty(de,"__esModule",{value:!0});var ke=de.default=void 0,Lt=Ft(O()),Vt=e,Bt=(0,Lt.default)((0,Vt.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}),"FileCopy");ke=de.default=Bt;var pe={},Nt=$;Object.defineProperty(pe,"__esModule",{value:!0});var Oe=pe.default=void 0,Wt=Nt(O()),qt=e,At=(0,Wt.default)((0,qt.jsx)("path",{d:"M18.32 4.26C16.84 3.05 15.01 2.25 13 2.05v2.02c1.46.18 2.79.76 3.9 1.62l1.42-1.43zM19.93 11h2.02c-.2-2.01-1-3.84-2.21-5.32L18.31 7.1c.86 1.11 1.44 2.44 1.62 3.9zm-1.62 5.9 1.43 1.43c1.21-1.48 2.01-3.32 2.21-5.32h-2.02c-.18 1.45-.76 2.78-1.62 3.89zM13 19.93v2.02c2.01-.2 3.84-1 5.32-2.21l-1.43-1.43c-1.1.86-2.43 1.44-3.89 1.62zM13 12V7h-2v5H7l5 5 5-5h-4zm-2 7.93v2.02c-5.05-.5-9-4.76-9-9.95s3.95-9.45 9-9.95v2.02C7.05 4.56 4 7.92 4 12s3.05 7.44 7 7.93z"}),"Downloading");Oe=pe.default=At;var ue={},Ht=$;Object.defineProperty(ue,"__esModule",{value:!0});var $e=ue.default=void 0,Ut=Ht(O()),se=e,Gt=(0,Ut.default)([(0,se.jsx)("path",{d:"m12 2-5.5 9h11z"},"0"),(0,se.jsx)("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),(0,se.jsx)("path",{d:"M3 13.5h8v8H3z"},"2")],"Category");$e=ue.default=Gt;var me={},Kt=$;Object.defineProperty(me,"__esModule",{value:!0});var Me=me.default=void 0,Yt=Kt(O()),Jt=e,Xt=(0,Yt.default)((0,Jt.jsx)("path",{d:"M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"}),"PictureInPictureAlt");Me=me.default=Xt;var xe={},Qt=$;Object.defineProperty(xe,"__esModule",{value:!0});var Ie=xe.default=void 0,Zt=Qt(O()),ea=e,ta=(0,Zt.default)((0,ea.jsx)("path",{d:"M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm-2 1.13L7.92 12H2V6.21l1.93-1.93L3.36 7H10v.13zM22.5 10h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5zm-.5 7.79-1.93 1.93.57-2.72H14v-.13L16.08 12H22v5.79z"}),"ThumbsUpDownOutlined");Ie=xe.default=ta;var he={},aa=$;Object.defineProperty(he,"__esModule",{value:!0});var Pe=he.default=void 0,oa=aa(O()),la=e,sa=(0,oa.default)((0,la.jsx)("path",{d:"M18.92 12c.04.33.08.66.08 1 0 2.08-.8 3.97-2.1 5.39-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H7v-2h2c.55 0 1-.45 1-1V8h2c1.1 0 2-.9 2-2V3.46c-.95-.3-1.95-.46-3-.46C5.48 3 1 7.48 1 13s4.48 10 10 10 10-4.48 10-10c0-.34-.02-.67-.05-1h-2.03zM10 20.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L8 16v1c0 1.1.9 2 2 2v1.93zM22 4v-.5C22 2.12 20.88 1 19.5 1S17 2.12 17 3.5V4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h5c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zm-1 0h-3v-.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V4z"}),"VpnLockOutlined");Pe=he.default=sa;var fe={},na=$;Object.defineProperty(fe,"__esModule",{value:!0});var ze=fe.default=void 0,ra=na(O()),ia=e,ca=(0,ra.default)((0,ia.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"}),"MicNoneOutlined");ze=fe.default=ca;var ge={},da=$;Object.defineProperty(ge,"__esModule",{value:!0});var Re=ge.default=void 0,pa=da(O()),ua=e,ma=(0,pa.default)((0,ua.jsx)("path",{d:"M15 7v12.97l-4.21-1.81-.79-.34-.79.34L5 19.97V7h10m4-6H8.99C7.89 1 7 1.9 7 3h10c1.1 0 2 .9 2 2v13l2 1V3c0-1.1-.9-2-2-2zm-4 4H5c-1.1 0-2 .9-2 2v16l7-3 7 3V7c0-1.1-.9-2-2-2z"}),"BookmarksOutlined");Re=ge.default=ma;const Ee=({isOpen:t,dialogProps:a,onClose:r,onSubmit:d})=>{const[l,x]=n.useState(""),[j,f]=n.useState([]),C=m=>{x(m.target.value)},w=m=>{m.key==="Enter"&&l.trim()&&(m.preventDefault(),j.includes(l)||(f([...j,l]),x("")))},T=m=>{f(j.filter(h=>h!==m))},y=m=>{m.preventDefault();let h=[...j];l.trim()&&!j.includes(l)&&(h=[...h,l],f(h)),d(h)};return n.useEffect(()=>(a.category&&f(a.category),()=>{x(""),f([])}),[a]),e.jsxs(F,{fullWidth:!0,maxWidth:"xs",open:t,onClose:r,"aria-labelledby":"category-dialog-title","aria-describedby":"category-dialog-description",children:[e.jsx(L,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:"Set Chatflow Category Tags"}),e.jsx(V,{children:e.jsx(re,{children:e.jsxs("form",{onSubmit:y,children:[j.length>0&&e.jsx("div",{style:{marginBottom:10},children:j.map((m,h)=>e.jsx(Te,{label:m,onDelete:()=>T(m),style:{marginRight:5,marginBottom:5}},h))}),e.jsx($t,{sx:{mt:2},fullWidth:!0,value:l,onChange:C,onKeyDown:w,label:"Add a tag",variant:"outlined"}),e.jsx(ie,{variant:"body2",sx:{fontStyle:"italic",mt:1},color:"text.secondary",children:"Enter a tag and press enter to add it to the list. You can add as many tags as you want."})]})})}),e.jsxs(nt,{children:[e.jsx(P,{onClick:r,children:"Cancel"}),e.jsx(P,{variant:"contained",onClick:y,children:"Submit"})]})]})};Ee.propTypes={isOpen:s.bool,dialogProps:s.object,onClose:s.func,onSubmit:s.func};const Fe=({show:t,dialogProps:a,onCancel:r})=>{const d=document.getElementById("portal"),l=B();N(),n.useEffect(()=>(l(t?{type:X}:{type:k}),()=>l({type:k})),[t,l]);const x=t?e.jsxs(F,{onClose:r,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(L,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title||"Conversation Starter Prompts"}),e.jsx(V,{children:e.jsx(Mt,{dialogProps:a})})]}):null;return Q.createPortal(x,d)};Fe.propTypes={show:s.bool,dialogProps:s.object,onCancel:s.func,onConfirm:s.func};const Le=({show:t,dialogProps:a,onCancel:r})=>{const d=document.getElementById("portal"),l=B();N(),n.useEffect(()=>(l(t?{type:X}:{type:k}),()=>l({type:k})),[t,l]);const x=t?e.jsxs(F,{onClose:r,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(L,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title||"Allowed Domains"}),e.jsx(V,{children:e.jsx(It,{dialogProps:a})})]}):null;return Q.createPortal(x,d)};Le.propTypes={show:s.bool,dialogProps:s.object,onCancel:s.func,onConfirm:s.func};const Ve=({show:t,dialogProps:a,onCancel:r})=>{const d=document.getElementById("portal"),l=B();N(),n.useEffect(()=>(l(t?{type:X}:{type:k}),()=>l({type:k})),[t,l]);const x=t?e.jsxs(F,{onClose:r,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(L,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title||"Allowed Domains"}),e.jsx(V,{children:e.jsx(Pt,{dialogProps:a})})]}):null;return Q.createPortal(x,d)};Ve.propTypes={show:s.bool,dialogProps:s.object,onCancel:s.func,onConfirm:s.func};const Be=({show:t,dialogProps:a,onCancel:r})=>{const d=document.getElementById("portal"),l=B();N(),n.useEffect(()=>(l(t?{type:X}:{type:k}),()=>l({type:k})),[t,l]);const x=t?e.jsxs(F,{onClose:r,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(L,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title||"Allowed Domains"}),e.jsx(V,{children:e.jsx(zt,{dialogProps:a})})]}):null;return Q.createPortal(x,d)};Be.propTypes={show:s.bool,dialogProps:s.object,onCancel:s.func,onConfirm:s.func};const xa=ce(t=>e.jsx(rt,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...t}))(({theme:t})=>({"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:it(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}));function Ne({chatflow:t,isAgentCanvas:a,isAgentflowV2:r,setError:d,updateFlowsApi:l}){const{confirm:x}=kt(),j=B(),f=ct(De.updateChatflow);N();const C=(...u)=>j(ut(...u)),w=(...u)=>j(mt(...u)),[T,y]=n.useState(!1),[m,h]=n.useState(!1),[W,M]=n.useState({}),[q,p]=n.useState(null),z=!!q,[A,H]=n.useState(!1),[Z,o]=n.useState({}),[S,_]=n.useState(!1),[U,G]=n.useState({}),[K,R]=n.useState(!1),[Y,J]=n.useState({}),[c,I]=n.useState(!1),[We,qe]=n.useState({}),[je,ye]=n.useState(!1),[Ae,He]=n.useState({}),ee=a?"Agents":"Chatflow",Ue=u=>{p(u.currentTarget)},Ge=()=>{p(null)},Ke=()=>{p(null),y(!0)},Ye=()=>{p(null),o({title:"Starter Prompts - "+t.name,chatflow:t}),H(!0)},Je=()=>{p(null),He({chatflow:t}),ye(!0)},Xe=()=>{p(null),G({title:"Chat Feedback - "+t.name,chatflow:t}),_(!0)},Qe=()=>{p(null),J({title:"Allowed Domains - "+t.name,chatflow:t}),R(!0)},Ze=()=>{p(null),qe({title:"Speech To Text - "+t.name,chatflow:t}),I(!0)},et=async u=>{const E={name:u,chatflow:t};try{await f.request(t.id,E),a&&r?await l.request("AGENTFLOW"):await l.request(a?"MULTIAGENT":void 0)}catch(g){d&&d(g),C({message:typeof g.response.data=="object"?g.response.data.message:g.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:v=>e.jsx(P,{style:{color:"white"},onClick:()=>w(v),children:e.jsx(oe,{})})}})}},tt=()=>{p(null),t.category&&M({category:t.category.split(";")}),h(!0)},at=async u=>{h(!1);const g={category:u.join(";"),chatflow:t};try{await f.request(t.id,g),await l.request(a?"AGENTFLOW":void 0)}catch(v){d&&d(v),C({message:typeof v.response.data=="object"?v.response.data.message:v.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:te=>e.jsx(P,{style:{color:"white"},onClick:()=>w(te),children:e.jsx(oe,{})})}})}},ot=async()=>{p(null);const u={title:"Delete",description:`Delete ${ee} ${t.name}?`,confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await x(u))try{await De.deleteChatflow(t.id),a&&r?await l.request("AGENTFLOW"):await l.request(a?"MULTIAGENT":void 0)}catch(g){d&&d(g),C({message:typeof g.response.data=="object"?g.response.data.message:g.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:v=>e.jsx(P,{style:{color:"white"},onClick:()=>w(v),children:e.jsx(oe,{})})}})}},lt=()=>{p(null);try{localStorage.setItem("duplicatedFlowData",t.flowData),r?window.open(`${le}/v2/agentcanvas`,"_blank"):a?window.open(`${le}/agentcanvas`,"_blank"):window.open(`${le}/canvas`,"_blank")}catch(u){console.error(u)}},st=()=>{p(null);try{const u=JSON.parse(t.flowData);let E=JSON.stringify(pt(u),null,2);const g=new Blob([E],{type:"application/json"}),v=URL.createObjectURL(g);let te=`${t.name} ${ee}.json`,ae=document.createElement("a");ae.setAttribute("href",v),ae.setAttribute("download",te),ae.click()}catch(u){console.error(u)}};return e.jsxs("div",{children:[e.jsx(P,{id:"demo-customized-button","aria-controls":z?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":z?"true":void 0,disableElevation:!0,onClick:Ue,endIcon:e.jsx(dt,{}),children:"Options"}),e.jsxs(xa,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:q,open:z,onClose:Ge,children:[e.jsxs(b,{permissionId:a?"agentflows:update":"chatflows:update",onClick:Ke,disableRipple:!0,children:[e.jsx(Tt,{}),"Rename"]}),e.jsxs(b,{permissionId:a?"agentflows:duplicate":"chatflows:duplicate",onClick:lt,disableRipple:!0,children:[e.jsx(ke,{}),"Duplicate"]}),e.jsxs(b,{permissionId:a?"agentflows:export":"chatflows:export",onClick:st,disableRipple:!0,children:[e.jsx(Oe,{}),"Export"]}),e.jsxs(b,{permissionId:"templates:flowexport",onClick:Je,disableRipple:!0,children:[e.jsx(Re,{}),"Save As Template"]}),e.jsx(ve,{sx:{my:.5}}),e.jsxs(b,{permissionId:a?"agentflows:config":"chatflows:config",onClick:Ye,disableRipple:!0,children:[e.jsx(Me,{}),"Starter Prompts"]}),e.jsxs(b,{permissionId:a?"agentflows:config":"chatflows:config",onClick:Xe,disableRipple:!0,children:[e.jsx(Ie,{}),"Chat Feedback"]}),e.jsxs(b,{permissionId:a?"agentflows:domains":"chatflows:domains",onClick:Qe,disableRipple:!0,children:[e.jsx(Pe,{}),"Allowed Domains"]}),e.jsxs(b,{permissionId:a?"agentflows:config":"chatflows:config",onClick:Ze,disableRipple:!0,children:[e.jsx(ze,{}),"Speech To Text"]}),e.jsxs(b,{permissionId:a?"agentflows:update":"chatflows:update",onClick:tt,disableRipple:!0,children:[e.jsx($e,{}),"Update Category"]}),e.jsx(ve,{sx:{my:.5}}),e.jsxs(b,{permissionId:a?"agentflows:delete":"chatflows:delete",onClick:ot,disableRipple:!0,children:[e.jsx(_t,{}),"Delete"]})]}),e.jsx(Ot,{show:T,dialogProps:{title:`Rename ${ee}`,confirmButtonName:"Rename",cancelButtonName:"Cancel"},onCancel:()=>y(!1),onConfirm:et}),e.jsx(Ee,{isOpen:m,dialogProps:W,onClose:()=>h(!1),onSubmit:at}),e.jsx(Fe,{show:A,dialogProps:Z,onCancel:()=>H(!1)}),e.jsx(Le,{show:S,dialogProps:U,onCancel:()=>_(!1)}),e.jsx(Ve,{show:K,dialogProps:Y,onCancel:()=>R(!1)}),e.jsx(Be,{show:c,dialogProps:We,onCancel:()=>I(!1)}),je&&e.jsx(Rt,{show:je,dialogProps:Ae,onCancel:()=>ye(!1)})]})}Ne.propTypes={chatflow:s.object,isAgentCanvas:s.bool,isAgentflowV2:s.bool,setError:s.func,updateFlowsApi:s.object};const i=ce(xt)(({theme:t})=>({borderColor:t.palette.grey[900]+25,[`&.${be.head}`]:{color:t.palette.grey[900]},[`&.${be.body}`]:{fontSize:14,height:64}})),ne=ce(_e)(()=>({"&:last-child td, &:last-child th":{border:0}})),we=(t,a)=>(a?"agentcanvas":"chatflowcanvas")+"_"+t,ha=({data:t,images:a={},icons:r={},isLoading:d,filterFunction:l,updateFlowsApi:x,setError:j,isAgentCanvas:f,isAgentflowV2:C})=>{const{hasPermission:w}=ht(),T=w(f?"agentflows:update,agentflows:delete,agentflows:config,agentflows:domains,templates:flowexport,agentflows:export":"chatflows:update,chatflows:delete,chatflows:config,chatflows:domains,templates:flowexport,chatflows:export"),y=ft(),m=gt(o=>o.customization),h=we("order",f),W=we("orderBy",f),[M,q]=n.useState(localStorage.getItem(h)||"desc"),[p,z]=n.useState(localStorage.getItem(W)||"updatedDate"),A=o=>{const _=p===o&&M==="asc"?"desc":"asc";q(_),z(o),localStorage.setItem(h,_),localStorage.setItem(W,o)},H=o=>f?C?`/v2/agentcanvas/${o.id}`:`/agentcanvas/${o.id}`:`/canvas/${o.id}`,Z=t?[...t].sort((o,S)=>p==="name"?M==="asc"?(o.name||"").localeCompare(S.name||""):(S.name||"").localeCompare(o.name||""):p==="updatedDate"?M==="asc"?new Date(o.updatedDate)-new Date(S.updatedDate):new Date(S.updatedDate)-new Date(o.updatedDate):0):[];return e.jsx(e.Fragment,{children:e.jsx(jt,{sx:{border:1,borderColor:y.palette.grey[900]+25,borderRadius:2},component:yt,children:e.jsxs(vt,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[e.jsx(bt,{sx:{backgroundColor:m.isDarkMode?y.palette.common.black:y.palette.grey[100],height:56},children:e.jsxs(_e,{children:[e.jsx(i,{component:"th",scope:"row",style:{width:"20%"},children:e.jsx(Se,{active:p==="name",direction:M,onClick:()=>A("name"),children:"Name"})},"0"),e.jsx(i,{style:{width:"25%"},children:"Category"},"1"),e.jsx(i,{style:{width:"30%"},children:"Nodes"},"2"),e.jsx(i,{style:{width:"15%"},children:e.jsx(Se,{active:p==="updatedDate",direction:M,onClick:()=>A("updatedDate"),children:"Last Modified Date"})},"3"),T&&e.jsx(i,{style:{width:"10%"},children:"Actions"},"4")]})}),e.jsx(Dt,{children:d?e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(i,{children:e.jsx(D,{variant:"text"})}),e.jsx(i,{children:e.jsx(D,{variant:"text"})}),e.jsx(i,{children:e.jsx(D,{variant:"text"})}),e.jsx(i,{children:e.jsx(D,{variant:"text"})}),T&&e.jsx(i,{children:e.jsx(D,{variant:"text"})})]}),e.jsxs(ne,{children:[e.jsx(i,{children:e.jsx(D,{variant:"text"})}),e.jsx(i,{children:e.jsx(D,{variant:"text"})}),e.jsx(i,{children:e.jsx(D,{variant:"text"})}),e.jsx(i,{children:e.jsx(D,{variant:"text"})}),T&&e.jsx(i,{children:e.jsx(D,{variant:"text"})})]})]}):e.jsx(e.Fragment,{children:Z.filter(l).map((o,S)=>{var _,U,G,K,R,Y,J;return e.jsxs(ne,{children:[e.jsx(i,{children:e.jsx(Ce,{title:o.templateName||o.name,children:e.jsx(ie,{sx:{display:"-webkit-box",fontSize:14,fontWeight:500,WebkitLineClamp:2,WebkitBoxOrient:"vertical",textOverflow:"ellipsis",overflow:"hidden"},children:e.jsx(St,{to:H(o),style:{color:"#2196f3",textDecoration:"none"},children:o.templateName||o.name})})})},"0"),e.jsx(i,{children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:5},children:[" ",o.category&&o.category.split(";").map((c,I)=>e.jsx(Te,{label:c,style:{marginRight:5,marginBottom:5}},I))]})},"1"),e.jsx(i,{children:(a[o.id]||r[o.id])&&e.jsxs(re,{sx:{display:"flex",alignItems:"center",justifyContent:"start",gap:1},children:[[...(a[o.id]||[]).map(c=>({type:"image",src:c.imageSrc,label:c.label})),...(r[o.id]||[]).map(c=>({type:"icon",icon:c.icon,color:c.color,title:c.name}))].slice(0,5).map((c,I)=>e.jsx(Ce,{title:c.label,placement:"top",children:c.type==="image"?e.jsx(re,{sx:{width:30,height:30,borderRadius:"50%",backgroundColor:m.isDarkMode?y.palette.common.white:y.palette.grey[300]+75},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:5,objectFit:"contain"},alt:"",src:c.src})}):e.jsx("div",{style:{width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(c.icon,{size:25,color:c.color})})},c.imageSrc||I)),(((_=a[o.id])==null?void 0:_.length)||0)+(((U=r[o.id])==null?void 0:U.length)||0)>5&&e.jsx(Et,{images:[...((G=a[o.id])==null?void 0:G.slice(5))||[],...(((R=r[o.id])==null?void 0:R.slice(Math.max(0,5-(((K=a[o.id])==null?void 0:K.length)||0))))||[]).map(c=>({label:c.name}))],children:e.jsxs(ie,{sx:{alignItems:"center",display:"flex",fontSize:".9rem",fontWeight:200},children:["+ ",(((Y=a[o.id])==null?void 0:Y.length)||0)+(((J=r[o.id])==null?void 0:J.length)||0)-5," More"]})})]})},"2"),e.jsx(i,{children:Ct(o.updatedDate).format("MMMM Do, YYYY HH:mm:ss")},"3"),T&&e.jsx(i,{children:e.jsx(wt,{direction:{xs:"column",sm:"row"},spacing:1,justifyContent:"center",alignItems:"center",children:e.jsx(Ne,{isAgentCanvas:f,isAgentflowV2:C,chatflow:o,setError:j,updateFlowsApi:x})})},"4")]},S)})})})]})})})};ha.propTypes={data:s.array,images:s.object,icons:s.object,isLoading:s.bool,filterFunction:s.func,updateFlowsApi:s.object,setError:s.func,isAgentCanvas:s.bool,isAgentflowV2:s.bool};export{ha as F};
