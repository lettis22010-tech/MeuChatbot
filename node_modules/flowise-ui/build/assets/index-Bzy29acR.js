import{t as M,L as re,N as L,O,P as S,a as G,R as se,j as e,U as ae,V as ie,W as ne,X as le,Y as ce,l as A,n as de,c as pe,b as me,r as s,M as xe,S as N,T as F,I as he,B as f,ad as ue,ab as ge,e as je,g as z}from"./index-B1XR3Coy.js";import{I as fe}from"./ItemCard-DFH1pXJi.js";import{T as be,t as ye}from"./ToolDialog-hiXiaWJY.js";import{V as Te}from"./ViewHeader-jo2V0q71.js";import{E as Ce}from"./ErrorBoundary-WOMkE_83.js";import{S as l}from"./Skeleton-BQAmmov-.js";import{D as Se,T as ve}from"./TablePagination-Dfhg7VLc.js";import{T as we}from"./ToggleButtonGroup-D1WH89Fe.js";import{I as Ie}from"./IconLayoutGrid-DAeG3wjO.js";import{B as Pe}from"./ButtonGroup-glLVEjXK.js";import{I as ke}from"./IconPlus-DpyX5kZB.js";import"./Tooltip-9ICsuaYn.js";import"./Grid-DtMOPoeK.js";import"./toPropertyKey-hKuLU48H.js";import"./Autocomplete-2B99MXTa.js";import"./Close-CA_iFeNy.js";import"./createStyled-BzRwilhm.js";import"./TextField-BEeUeVUl.js";import"./FormControl-Cb0ROeST.js";import"./InputLabel-HPVYUEFn.js";import"./InputAdornment-D6_duzKN.js";import"./KeyboardArrowRight-KQTKBFVE.js";import"./LastPage-CMvObEkB.js";import"./TooltipWithParser-C72LCUcD.js";import"./index-D--Rb2MU.js";import"./Delete-CvnCkEIf.js";import"./ConfirmDialog-Bksga_et.js";import"./CodeEditor-BjDzi2Vy.js";import"./index-DhL3T6x0.js";import"./ExportAsTemplateDialog-CN3tapJC.js";import"./GridActionsCellItem-C4fgcfe6.js";import"./StyledFab-BqTal21_.js";import"./IconSearch-BzBgax5m.js";import"./IconCopy-BBl1XuSo.js";import"./Pagination-DyTukyc1.js";const a=M(re)(({theme:r})=>({borderColor:r.palette.grey[900]+25,[`&.${L.head}`]:{color:r.palette.grey[900]},[`&.${L.body}`]:{fontSize:14,height:64}})),v=M(O)(()=>({"&:last-child td, &:last-child th":{border:0}})),V=({data:r,isLoading:i,onSelect:m})=>{const d=G(),c=se(n=>n.customization);return e.jsx(e.Fragment,{children:e.jsx(ae,{sx:{border:1,borderColor:d.palette.grey[900]+25,borderRadius:2},component:ie,children:e.jsxs(ne,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[e.jsx(le,{sx:{backgroundColor:c.isDarkMode?d.palette.common.black:d.palette.grey[100],height:56},children:e.jsxs(O,{children:[e.jsx(a,{component:"th",scope:"row",children:"Name"},"0"),e.jsx(a,{children:"Description"},"1"),e.jsx(a,{component:"th",scope:"row",children:"Â "},"3")]})}),e.jsx(ce,{children:i?e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})})]}),e.jsxs(v,{children:[e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})})]})]}):e.jsx(e.Fragment,{children:r==null?void 0:r.map((n,b)=>e.jsxs(v,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx("div",{style:{width:35,height:35,display:"flex",flexShrink:0,marginRight:10,borderRadius:"50%",backgroundImage:`url(${n.iconSrc})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}}),e.jsx(A,{sx:{display:"-webkit-box",fontSize:14,fontWeight:500,WebkitLineClamp:2,WebkitBoxOrient:"vertical",textOverflow:"ellipsis",overflow:"hidden"},children:e.jsx(de,{onClick:()=>m(n),sx:{textAlign:"left"},children:n.templateName||n.name})})]},"0"),e.jsx(a,{children:e.jsx(A,{sx:{overflowWrap:"break-word",whiteSpace:"pre-line"},children:n.description||""})},"1"),e.jsx(a,{},"3")]},b))})})]})})})};V.propTypes={data:S.array,isLoading:S.bool,onSelect:S.func};const Be="/assets/tools_empty-ini-pB8C.svg",pt=()=>{var k,B,E,R;const r=G(),i=pe(ye.getAllTools),{error:m,setError:d}=me(),[c,n]=s.useState(!0),[b,p]=s.useState(!1),[W,y]=s.useState({}),[T,U]=s.useState(localStorage.getItem("toolsDisplayStyle")||"card"),w=s.useRef(null),[x,_]=s.useState(1),[h,H]=s.useState(Se),[u,$]=s.useState(0),Y=(t,o)=>{_(t),H(o),C(t,o)},C=(t,o)=>{const g={page:t||x,limit:o||h};i.request(g)},q=(t,o)=>{o!==null&&(localStorage.setItem("toolsDisplayStyle",o),U(o))},J=t=>{try{const o={title:"Add New Tool",type:"IMPORT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:JSON.parse(t)};y(o),p(!0)}catch(o){console.error(o)}},X=t=>{if(!t.target.files)return;const o=t.target.files[0],g=new FileReader;g.onload=j=>{var D;if(!((D=j==null?void 0:j.target)!=null&&D.result))return;const{result:oe}=j.target;J(oe)},g.readAsText(o)},K=()=>{y({title:"Add New Tool",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),p(!0)},I=t=>{y({title:"Edit Tool",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:t}),p(!0)},Q=()=>{p(!1),C(x,h)},[P,Z]=s.useState(""),ee=t=>{Z(t.target.value)};function te(t){return t.name.toLowerCase().indexOf(P.toLowerCase())>-1||t.description.toLowerCase().indexOf(P.toLowerCase())>-1}return s.useEffect(()=>{C(x,h)},[]),s.useEffect(()=>{n(i.loading)},[i.loading]),s.useEffect(()=>{i.data&&$(i.data.total)},[i.data]),e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:m?e.jsx(Ce,{error:m}):e.jsxs(N,{flexDirection:"column",sx:{gap:3},children:[e.jsxs(Te,{onSearchChange:ee,search:!0,searchPlaceholder:"Search Tools",title:"Tools",description:"External functions or APIs the agent can use to take action",children:[e.jsxs(we,{sx:{borderRadius:2,maxHeight:40},value:T,color:"primary",disabled:u===0,exclusive:!0,onChange:q,children:[e.jsx(F,{sx:{borderColor:r.palette.grey[900]+25,borderRadius:2,color:(k=r==null?void 0:r.customization)!=null&&k.isDarkMode?"white":"inherit"},variant:"contained",value:"card",title:"Card View",children:e.jsx(Ie,{})}),e.jsx(F,{sx:{borderColor:r.palette.grey[900]+25,borderRadius:2,color:(B=r==null?void 0:r.customization)!=null&&B.isDarkMode?"white":"inherit"},variant:"contained",value:"list",title:"List View",children:e.jsx(he,{})})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ue,{permissionId:"tools:create",variant:"outlined",onClick:()=>w.current.click(),startIcon:e.jsx(ge,{}),sx:{borderRadius:2,height:40},children:"Load"}),e.jsx("input",{style:{display:"none"},ref:w,type:"file",hidden:!0,accept:".json",onChange:t=>X(t)})]}),e.jsx(Pe,{disableElevation:!0,"aria-label":"outlined primary button group",children:e.jsx(je,{permissionId:"tools:create",variant:"contained",onClick:K,startIcon:e.jsx(ke,{}),sx:{borderRadius:2,height:40},children:"Create"})})]}),c&&e.jsxs(f,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:z,children:[e.jsx(l,{variant:"rounded",height:160}),e.jsx(l,{variant:"rounded",height:160}),e.jsx(l,{variant:"rounded",height:160})]}),!c&&u>0&&e.jsxs(e.Fragment,{children:[!T||T==="card"?e.jsx(f,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:z,children:(R=(E=i.data)==null?void 0:E.data)==null?void 0:R.filter(te).map((t,o)=>e.jsx(fe,{data:t,onClick:()=>I(t)},o))}):e.jsx(V,{data:i.data.data,isLoading:c,onSelect:I}),e.jsx(ve,{currentPage:x,limit:h,total:u,onChange:Y})]}),!c&&u===0&&e.jsxs(N,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[e.jsx(f,{sx:{p:2,height:"auto"},children:e.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:Be,alt:"ToolEmptySVG"})}),e.jsx("div",{children:"No Tools Created Yet"})]})]})}),e.jsx(be,{show:b,dialogProps:W,onCancel:()=>p(!1),onConfirm:Q,setError:d})]})};export{pt as default};
