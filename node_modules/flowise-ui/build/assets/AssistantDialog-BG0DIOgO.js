import{P as C,j as e,D as he,h as me,k as ue,n as h,aa as pe,s as fe,o as He,p as Ue,c as ae,r,cg as ft,q as Ge,H as ie,B as w,S as D,l as A,a1 as R,m as Re,E as p,aq as xt,J as Ke,K as Xe,R as gt,ch as jt,ag as qe,ah as ze,a8 as Je,C as yt,e as de}from"./index-B1XR3Coy.js";import{T as G}from"./TooltipWithParser-C72LCUcD.js";import{D as Ye}from"./Dropdown-BH_BuIwh.js";import{M as vt}from"./MultiDropdown-OnTaU3K-.js";import{C as bt}from"./CredentialInputHandler-NSWgGX5U.js";import{F as Le}from"./File-B2PWlg1I.js";import{B as Qe}from"./BackdropLoader-C982mQas.js";import{C as _t}from"./ConfirmDialog-Bksga_et.js";import{S as St}from"./Switch-BtbcRzr_.js";import{a as k}from"./assistants-C-o7l-z6.js";import{v as se}from"./v4-D8aEg3BZ.js";import{I as wt}from"./IconPlus-DpyX5kZB.js";const Ze=({show:T,dialogProps:i,onCancel:M,onDelete:O,onDeleteBoth:Q})=>{const F=document.getElementById("portal"),N=T?e.jsxs(he,{fullWidth:!0,maxWidth:"xs",open:T,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(me,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:i.title}),e.jsxs(ue,{children:[e.jsx("span",{children:i.description}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",marginTop:20},children:[e.jsx(h,{sx:{flex:1,mb:1,mr:1},color:"error",variant:"outlined",onClick:O,children:"Only Flowise"}),e.jsx(pe,{sx:{flex:1,mb:1,ml:1},color:"error",variant:"contained",onClick:Q,children:"OpenAI and Flowise"})]})]})]}):null;return fe.createPortal(N,F)};Ze.propTypes={show:C.bool,dialogProps:C.object,onDeleteBoth:C.func,onDelete:C.func,onCancel:C.func};const Pe=({show:T,dialogProps:i,onCancel:M,onConfirm:O,onDelete:Q,setError:F})=>{const N=document.getElementById("portal"),m=He();Ue();const u=(...n)=>m(Ke(...n)),$=(...n)=>m(Xe(...n)),x=ae(k.getAssistantVectorStore),d=ae(k.listAssistantVectorStore),[I,z]=r.useState(""),[E,J]=r.useState(!1),[B,V]=r.useState(7),[L,K]=r.useState([{label:"- Create New -",name:"-create-"}]),[b,W]=r.useState(""),[q,y]=r.useState(!1);r.useEffect(()=>{x.data&&(x.data.name?z(x.data.name):z(""),x.data.id?W(x.data.id):W(""),x.data.expires_after&&x.data.expires_after.days?(V(x.data.expires_after.days),J(!0)):(V(7),J(!1)))},[x.data]),r.useEffect(()=>{var n,l,f,s;if(d.data){let j=[];for(let S=0;S<d.data.length;S+=1)j.push({label:((n=d.data[S])==null?void 0:n.name)??d.data[S].id,name:d.data[S].id,description:`${(f=(l=d.data[S])==null?void 0:l.file_counts)==null?void 0:f.total} files (${ft((s=d.data[S])==null?void 0:s.usage_bytes)})`});j=j.filter(S=>S.name!=="-create-"),j.unshift({label:"- Create New -",name:"-create-"}),K(j)}},[d.data]),r.useEffect(()=>{x.error&&F&&F(x.error)},[x.error]),r.useEffect(()=>(i.type==="EDIT"&&i.data?(x.request(i.data.id,i.credential),d.request(i.credential)):i.type==="ADD"&&d.request(i.credential),()=>{z(""),J(!1),V(7),W(""),K([{label:"- Create New -",name:"-create-"}]),y(!1)}),[i]),r.useEffect(()=>(m(T?{type:Ge}:{type:ie}),()=>m({type:ie})),[T,m]);const H=async()=>{y(!0);try{(await k.deleteAssistantVectorStore(b,i.credential)).data&&(u({message:"Vector Store deleted",options:{key:new Date().getTime()+Math.random(),variant:"success",action:l=>e.jsx(h,{style:{color:"white"},onClick:()=>$(l),children:e.jsx(p,{})})}}),Q(b)),y(!1)}catch(n){F&&F(n),u({message:`Failed to delete Vector Store: ${typeof n.response.data=="object"?n.response.data.message:n.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:l=>e.jsx(h,{style:{color:"white"},onClick:()=>$(l),children:e.jsx(p,{})})}}),y(!1),M()}},_=async()=>{y(!0);try{const n={name:I!==""?I:null,expires_after:E?{anchor:"last_active_at",days:parseFloat(B)}:null},l=await k.createAssistantVectorStore(i.credential,n);l.data&&(u({message:"New Vector Store added",options:{key:new Date().getTime()+Math.random(),variant:"success",action:f=>e.jsx(h,{style:{color:"white"},onClick:()=>$(f),children:e.jsx(p,{})})}}),O(l.data)),y(!1)}catch(n){F&&F(n),u({message:`Failed to add new Vector Store: ${typeof n.response.data=="object"?n.response.data.message:n.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:l=>e.jsx(h,{style:{color:"white"},onClick:()=>$(l),children:e.jsx(p,{})})}}),y(!1),M()}},U=async n=>{y(!0);try{const l={name:I!==""?I:null,expires_after:E?{anchor:"last_active_at",days:parseFloat(B)}:null},f=await k.updateAssistantVectorStore(n,i.credential,l);if(f.data)if(u({message:"Vector Store saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:s=>e.jsx(h,{style:{color:"white"},onClick:()=>$(s),children:e.jsx(p,{})})}}),"files"in f.data){const s=f.data.files;O(xt.omit(f.data,["files"]),s)}else O(f.data);y(!1)}catch(l){F&&F(l),u({message:`Failed to save Vector Store: ${typeof l.response.data=="object"?l.response.data.message:l.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:f=>e.jsx(h,{style:{color:"white"},onClick:()=>$(f),children:e.jsx(p,{})})}}),y(!1),M()}},Z=T?e.jsxs(he,{fullWidth:!0,maxWidth:"sm",open:T,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(me,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:i.title}),e.jsxs(ue,{children:[e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["Select Vector Store",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(Ye,{name:b,options:L,loading:d.loading,onSelect:n=>{W(n),n==="-create-"?(z(""),J(!1),V(7)):x.request(n,i.credential)},value:b??"choose an option"})]}),b!==""&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsx(A,{variant:"overline",children:"Vector Store Name"})}),e.jsx(R,{id:"vsName",type:"string",fullWidth:!0,placeholder:"My Vector Store",value:I,onChange:n=>z(n.target.value)})]}),e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsx(A,{variant:"overline",children:"Vector Store Expiration"})}),e.jsx(St,{onChange:n=>J(n),value:E})]}),E&&e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["Expiration Days",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(R,{id:"expDays",type:"number",fullWidth:!0,value:B,onChange:n=>V(n.target.value)})]})]})]}),e.jsxs(Re,{children:[i.type==="EDIT"&&e.jsx(pe,{color:"error",variant:"contained",onClick:()=>H(),children:"Delete"}),e.jsx(pe,{disabled:!b,variant:"contained",onClick:()=>b==="-create-"?_():U(b),children:i.confirmButtonName})]}),e.jsx(_t,{}),q&&e.jsx(Qe,{open:q})]}):null;return fe.createPortal(Z,N)};Pe.propTypes={show:C.bool,dialogProps:C.object,onCancel:C.func,onConfirm:C.func,onDelete:C.func,setError:C.func};const Dt=[{label:"gpt-4.1",name:"gpt-4.1"},{label:"gpt-4.1-mini",name:"gpt-4.1-mini"},{label:"gpt-4.1-nano",name:"gpt-4.1-nano"},{label:"gpt-4.5-preview",name:"gpt-4.5-preview"},{label:"gpt-4o-mini",name:"gpt-4o-mini"},{label:"gpt-4o",name:"gpt-4o"},{label:"gpt-4-turbo",name:"gpt-4-turbo"},{label:"gpt-4-turbo-preview",name:"gpt-4-turbo-preview"},{label:"gpt-4-1106-preview",name:"gpt-4-1106-preview"},{label:"gpt-4-0613",name:"gpt-4-0613"},{label:"gpt-4",name:"gpt-4"},{label:"gpt-3.5-turbo",name:"gpt-3.5-turbo"},{label:"gpt-3.5-turbo-0125",name:"gpt-3.5-turbo-0125"},{label:"gpt-3.5-turbo-1106",name:"gpt-3.5-turbo-1106"},{label:"gpt-3.5-turbo-0613",name:"gpt-3.5-turbo-0613"},{label:"gpt-3.5-turbo-16k",name:"gpt-3.5-turbo-16k"},{label:"gpt-3.5-turbo-16k-0613",name:"gpt-3.5-turbo-16k-0613"}],At=({show:T,dialogProps:i,onCancel:M,onConfirm:O,setError:Q})=>{var Se,we,De,Ae,Ce,ke,Ie,Te,Fe,Ve,Ne,Ee,Me,Oe,$e,Be,We;const F=document.getElementById("portal");Ue();const N=He(),m=(...t)=>N(Ke(...t)),u=(...t)=>N(Xe(...t)),$=gt(t=>t.customization),x=r.useRef(),d=ae(k.getSpecificAssistant),I=ae(k.getAssistantObj),[z,E]=r.useState(""),[J,B]=r.useState(""),[V,L]=r.useState(""),[K,b]=r.useState(""),[W,q]=r.useState(`https://api.dicebear.com/7.x/bottts/svg?seed=${se()}`),[y,H]=r.useState(""),[_,U]=r.useState(""),[Z,n]=r.useState(""),[l,f]=r.useState(["code_interpreter","file_search"]),[s,j]=r.useState({}),[S,X]=r.useState(1),[P,Y]=r.useState(1),[xe,ne]=r.useState(""),[ge,re]=r.useState(""),[je,v]=r.useState(!1),[et,oe]=r.useState(!1),[tt,st]=r.useState({}),[at,ee]=r.useState(!1),[it,ye]=r.useState({});r.useEffect(()=>(N(T?{type:Ge}:{type:ie}),()=>N({type:ie})),[T,N]),r.useEffect(()=>{if(d.data){E(d.data.id),q(d.data.iconSrc),U(d.data.credential);const t=JSON.parse(d.data.details);B(t.id),L(t.name),b(t.description),H(t.model),n(t.instructions),X(t.temperature),Y(t.top_p),f(t.tools??[]),j(t.tool_resources??{})}},[d.data]),r.useEffect(()=>{I.data&&ve(I.data)},[I.data]),r.useEffect(()=>{var t;if(I.error){let a="Internal Server Error",o=I.error;(t=o==null?void 0:o.response)!=null&&t.data&&(a=typeof o.response.data=="object"?o.response.data.message:o.response.data),m({message:`Failed to get assistant: ${a}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:c=>e.jsx(h,{style:{color:"white"},onClick:()=>u(c),children:e.jsx(p,{})})}})}},[I.error]),r.useEffect(()=>{var t;if(d.error){const a=d.error;let o="";(t=a==null?void 0:a.response)!=null&&t.data&&(o=typeof a.response.data=="object"?a.response.data.message:a.response.data),m({message:`Failed to get assistant: ${o}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:c=>e.jsx(h,{style:{color:"white"},onClick:()=>u(c),children:e.jsx(p,{})})}})}},[d.error]),r.useEffect(()=>{if(i.type==="EDIT"&&i.data){E(i.data.id),q(i.data.iconSrc),U(i.data.credential);const t=JSON.parse(i.data.details);B(t.id),L(t.name),b(t.description),H(t.model),n(t.instructions),X(t.temperature),Y(t.top_p),f(t.tools??[]),j(t.tool_resources??{})}else i.type==="EDIT"&&i.assistantId?d.request(i.assistantId):i.type==="ADD"&&i.selectedOpenAIAssistantId&&i.credential?(E(""),q(`https://api.dicebear.com/7.x/bottts/svg?seed=${se()}`),U(i.credential),I.request(i.selectedOpenAIAssistantId,i.credential)):i.type==="ADD"&&!i.selectedOpenAIAssistantId&&(E(""),q(`https://api.dicebear.com/7.x/bottts/svg?seed=${se()}`),U(""),B(""),L(""),b(""),H(""),n(""),X(1),Y(1),f(["code_interpreter","file_search"]),ne(""),re(""),j({}));return()=>{E(""),q(`https://api.dicebear.com/7.x/bottts/svg?seed=${se()}`),U(""),B(""),L(""),b(""),H(""),n(""),X(1),Y(1),f(["code_interpreter","file_search"]),ne(""),re(""),j({}),v(!1)}},[i]);const ve=t=>{B(t.id),L(t.name),b(t.description),H(t.model),n(t.instructions),X(t.temperature),Y(t.top_p),j(t.tool_resources??{});let a=[];if(t.tools&&t.tools.length)for(const o of t.tools)a.push(o.type);f(a)},nt=t=>{const a={title:`Edit ${t.name?t.name:t.id}`,type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:t,credential:_};ye(a),ee(!0)},rt=()=>{ye({title:"Add Vector Store",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add",credential:_}),ee(!0)},ot=async()=>{v(!0);try{const t={id:J,name:V,description:K,model:y,instructions:Z,temperature:S?parseFloat(S):null,top_p:P?parseFloat(P):null,tools:l,tool_resources:s},a={details:JSON.stringify(t),iconSrc:W,credential:_,type:"OPENAI"},o=await k.createNewAssistant(a);o.data&&(m({message:"New Assistant added",options:{key:new Date().getTime()+Math.random(),variant:"success",action:c=>e.jsx(h,{style:{color:"white"},onClick:()=>u(c),children:e.jsx(p,{})})}}),O(o.data.id)),v(!1)}catch(t){m({message:`Failed to add new Assistant: ${typeof t.response.data=="object"?t.response.data.message:t.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:a=>e.jsx(h,{style:{color:"white"},onClick:()=>u(a),children:e.jsx(p,{})})}}),v(!1)}},lt=async()=>{v(!0);try{const t={name:V,description:K,model:y,instructions:Z,temperature:S?parseFloat(S):null,top_p:P?parseFloat(P):null,tools:l,tool_resources:s},a={details:JSON.stringify(t),iconSrc:W,credential:_},o=await k.updateAssistant(z,a);o.data&&(m({message:"Assistant saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:c=>e.jsx(h,{style:{color:"white"},onClick:()=>u(c),children:e.jsx(p,{})})}}),O(o.data.id)),v(!1)}catch(t){m({message:`Failed to save Assistant: ${typeof t.response.data=="object"?t.response.data.message:t.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:a=>e.jsx(h,{style:{color:"white"},onClick:()=>u(a),children:e.jsx(p,{})})}}),v(!1)}},ct=async()=>{v(!0);try{const t=await k.getAssistantObj(J,_);t.data&&(ve(t.data),m({message:"Assistant successfully synced!",options:{key:new Date().getTime()+Math.random(),variant:"success",action:a=>e.jsx(h,{style:{color:"white"},onClick:()=>u(a),children:e.jsx(p,{})})}})),v(!1)}catch(t){m({message:`Failed to sync Assistant: ${typeof t.response.data=="object"?t.response.data.message:t.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:a=>e.jsx(h,{style:{color:"white"},onClick:()=>u(a),children:e.jsx(p,{})})}}),v(!1)}},dt=async t=>{var a,o;v(!0);try{const c=(o=(a=s.file_search)==null?void 0:a.vector_store_ids)!=null&&o.length?s.file_search.vector_store_ids[0]:"",g=await k.uploadFilesToAssistantVectorStore(c,_,t);if(g.data){m({message:"File uploaded successfully!",options:{key:new Date().getTime()+Math.random(),variant:"success",action:te=>e.jsx(h,{style:{color:"white"},onClick:()=>u(te),children:e.jsx(p,{})})}});const le=g.data,ce=(s==null?void 0:s.file_search.files)??[];j({...s,file_search:{...s==null?void 0:s.file_search,files:[...ce,...le]}})}v(!1)}catch(c){m({message:`Failed to upload file: ${typeof c.response.data=="object"?c.response.data.message:c.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:g=>e.jsx(h,{style:{color:"white"},onClick:()=>u(g),children:e.jsx(p,{})})}}),v(!1)}},pt=async t=>{var a,o;v(!0);try{const c=await k.uploadFilesToAssistant(_,t);if(c.data){m({message:"File uploaded successfully!",options:{key:new Date().getTime()+Math.random(),variant:"success",action:te=>e.jsx(h,{style:{color:"white"},onClick:()=>u(te),children:e.jsx(p,{})})}});const g=c.data,le=((a=s==null?void 0:s.code_interpreter)==null?void 0:a.files)??[],ce=((o=s==null?void 0:s.code_interpreter)==null?void 0:o.file_ids)??[];j({...s,code_interpreter:{...s==null?void 0:s.code_interpreter,files:[...le,...g],file_ids:[...ce,...g.map(te=>te.id)]}})}v(!1)}catch(c){m({message:`Failed to upload file: ${typeof c.response.data=="object"?c.response.data.message:c.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:g=>e.jsx(h,{style:{color:"white"},onClick:()=>u(g),children:e.jsx(p,{})})}}),v(!1)}},ht=()=>{j({...s,file_search:{files:[],vector_store_object:null,vector_store_ids:[]}})},mt=()=>{st({title:"Delete Assistant",description:`Select delete method for ${V}`,cancelButtonName:"Cancel"}),oe(!0)},be=async t=>{oe(!1);try{(await k.deleteAssistant(z,t)).data&&(m({message:"Assistant deleted",options:{key:new Date().getTime()+Math.random(),variant:"success",action:o=>e.jsx(h,{style:{color:"white"},onClick:()=>u(o),children:e.jsx(p,{})})}}),O())}catch(a){m({message:`Failed to delete Assistant: ${typeof a.response.data=="object"?a.response.data.message:a.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:o=>e.jsx(h,{style:{color:"white"},onClick:()=>u(o),children:e.jsx(p,{})})}}),M()}},_e=async(t,a)=>{var o,c;if(a==="code_interpreter")j({...s,code_interpreter:{...s.code_interpreter,files:s.code_interpreter.files.filter(g=>g.id!==t),file_ids:s.code_interpreter.file_ids.filter(g=>g!==t)}});else if(a==="file_search"){j({...s,file_search:{...s.file_search,files:s.file_search.files.filter(g=>g.id!==t)}});try{const g=(c=(o=s.file_search)==null?void 0:o.vector_store_ids)!=null&&c.length?s.file_search.vector_store_ids[0]:"";await k.deleteFilesFromAssistantVectorStore(g,_,{file_ids:[t]})}catch(g){console.error(g)}}},ut=T?e.jsxs(he,{fullWidth:!0,maxWidth:"md",open:T,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(me,{sx:{fontSize:"1rem",p:3,pb:0},id:"alert-dialog-title",children:i.title}),e.jsx(ue,{ref:x,sx:{display:"flex",flexDirection:"column",gap:2,maxHeight:"75vh",position:"relative",px:3,pb:3},children:e.jsxs(w,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[e.jsxs(w,{children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["OpenAI Credential",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(bt,{data:_?{credential:_}:{},inputParam:{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["openAIApi"]},onSelect:t=>U(t)},_)]}),e.jsxs(w,{children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["Assistant Model",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(Ye,{name:y,options:Dt,onSelect:t=>H(t),value:y??"choose an option"},y)]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Name"}),e.jsx(G,{title:"The name of the assistant. The maximum length is 256 characters."})]}),e.jsx(R,{id:"assistantName",type:"string",size:"small",fullWidth:!0,placeholder:"My New Assistant",value:V,name:"assistantName",onChange:t=>L(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Description"}),e.jsx(G,{title:"The description of the assistant. The maximum length is 512 characters."})]}),e.jsx(R,{id:"assistantDesc",type:"string",size:"small",fullWidth:!0,placeholder:"Description of what the Assistant does",multiline:!0,rows:3,value:K,name:"assistantDesc",onChange:t=>b(t.target.value)})]}),e.jsxs(w,{children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsx(A,{variant:"overline",children:"Assistant Icon Src"})}),e.jsx("div",{style:{width:100,height:100,borderRadius:"50%",backgroundColor:"white"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:5,borderRadius:"50%",objectFit:"contain"},alt:V,src:W})}),e.jsx(R,{id:"assistantIcon",type:"string",size:"small",fullWidth:!0,placeholder:`https://api.dicebear.com/7.x/bottts/svg?seed=${se()}`,value:W,name:"assistantIcon",onChange:t=>q(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Instruction"}),e.jsx(G,{title:"The system instructions that the assistant uses. The maximum length is 32768 characters."})]}),e.jsx(R,{id:"assistantInstructions",type:"string",size:"small",fullWidth:!0,placeholder:"You are a personal math tutor. When asked a question, write and run Python code to answer the question.",multiline:!0,rows:3,value:Z,name:"assistantInstructions",onChange:t=>n(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Temperature"}),e.jsx(G,{title:"Controls randomness: Lowering results in less random completions. As the temperature approaches zero, the model will become deterministic and repetitive."})]}),e.jsx(R,{id:"assistantTemp",type:"number",size:"small",fullWidth:!0,value:S,name:"assistantTemp",onChange:t=>X(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Top P"}),e.jsx(G,{title:"Controls diversity via nucleus sampling: 0.5 means half of all likelihood-weighted options are considered."})]}),e.jsx(R,{id:"assistantTopP",type:"number",fullWidth:!0,size:"small",value:P,name:"assistantTopP",min:"0",max:"1",onChange:t=>Y(t.target.value)})]}),_&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Tools"}),e.jsx(G,{title:"A list of tool enabled on the assistant. There can be a maximum of 128 tools per assistant."})]}),e.jsx(vt,{name:JSON.stringify(l),options:[{label:"Code Interpreter",name:"code_interpreter"},{label:"File Search",name:"file_search"}],onSelect:t=>{f(t?JSON.parse(t):[]),setTimeout(()=>{var a;(a=x==null?void 0:x.current)==null||a.scrollTo({top:jt})},100)},value:l??"choose an option"},JSON.stringify(l))]}),e.jsxs(w,{children:[(l==null?void 0:l.length)>0&&l.includes("code_interpreter")&&e.jsx(qe,{sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:`${$.borderRadius}px`},children:e.jsxs(ze,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Code Interpreter Files"}),e.jsx(G,{title:"Code Interpreter enables the assistant to write and run code. This tool can process files with diverse data and formatting, and generate files such as graphs"})]}),((we=(Se=s==null?void 0:s.code_interpreter)==null?void 0:Se.files)==null?void 0:we.length)>0&&e.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:(Ae=(De=s==null?void 0:s.code_interpreter)==null?void 0:De.files)==null?void 0:Ae.map((t,a)=>e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"max-content",height:"max-content",borderRadius:15,background:"rgb(254,252,191)",paddingLeft:15,paddingRight:15,paddingTop:5,paddingBottom:5,marginRight:10,marginBottom:10},children:[e.jsx("span",{style:{color:"rgb(116,66,16)",marginRight:10},children:t.filename}),e.jsx(Je,{sx:{height:15,width:15,p:0},onClick:()=>_e(t.id,"code_interpreter"),children:e.jsx(p,{})})]},a))}),e.jsx(Le,{fileType:"*",formDataUpload:!0,value:xe??"Choose a file to upload",onChange:t=>ne(t),onFormDataChange:t=>pt(t)},xe)]})}),(l==null?void 0:l.length)>0&&l.includes("file_search")&&e.jsx(qe,{sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:`${$.borderRadius}px`},children:e.jsxs(ze,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"File Search Files"}),e.jsx(G,{title:"File search enables the assistant with knowledge from files that you or your users upload. Once a file is uploaded, the assistant automatically decides when to retrieve content based on user requests"})]}),((Ce=s==null?void 0:s.file_search)==null?void 0:Ce.vector_store_object)&&e.jsx(yt,{label:(Ie=(ke=s==null?void 0:s.file_search)==null?void 0:ke.vector_store_object)!=null&&Ie.name?(Fe=(Te=s==null?void 0:s.file_search)==null?void 0:Te.vector_store_object)==null?void 0:Fe.name:(Ne=(Ve=s==null?void 0:s.file_search)==null?void 0:Ve.vector_store_object)==null?void 0:Ne.id,component:"a",sx:{mb:2,mt:1},variant:"outlined",clickable:!0,color:"primary",onDelete:ht,onClick:()=>{var t;return nt((t=s==null?void 0:s.file_search)==null?void 0:t.vector_store_object)}}),((Me=(Ee=s==null?void 0:s.file_search)==null?void 0:Ee.files)==null?void 0:Me.length)>0&&e.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:($e=(Oe=s==null?void 0:s.file_search)==null?void 0:Oe.files)==null?void 0:$e.map((t,a)=>e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"max-content",height:"max-content",borderRadius:15,background:"rgb(254,252,191)",paddingLeft:15,paddingRight:15,paddingTop:5,paddingBottom:5,marginRight:10,marginBottom:10},children:[e.jsx("span",{style:{color:"rgb(116,66,16)",marginRight:10},children:t.filename}),e.jsx(Je,{sx:{height:15,width:15,p:0},onClick:()=>_e(t.id,"file_search"),children:e.jsx(p,{})})]},a))}),!s.file_search||!((We=(Be=s.file_search)==null?void 0:Be.vector_store_ids)!=null&&We.length)?e.jsx(h,{variant:"outlined",component:"label",fullWidth:!0,startIcon:e.jsx(wt,{}),sx:{marginRight:"1rem"},onClick:()=>rt(),children:"Add Vector Store"}):e.jsx(Le,{fileType:"*",formDataUpload:!0,value:ge??"Choose a file to upload",onChange:t=>re(t),onFormDataChange:t=>dt(t)},ge)]})})]})]})]})}),e.jsxs(Re,{sx:{p:3,pt:0},children:[i.type==="EDIT"&&e.jsx(de,{permissionId:"assistants:create,assistants:update",color:"secondary",variant:"contained",onClick:()=>ct(),children:"Sync"}),i.type==="EDIT"&&e.jsx(de,{permissionId:"assistants:delete",color:"error",variant:"contained",onClick:()=>mt(),children:"Delete"}),e.jsx(de,{permissionId:"assistants:create,assistants:update",disabled:!(y&&_),variant:"contained",onClick:()=>i.type==="ADD"?ot():lt(),children:i.confirmButtonName})]}),e.jsx(Ze,{show:et,dialogProps:tt,onCancel:()=>oe(!1),onDelete:()=>be(),onDeleteBoth:()=>be(!0)}),e.jsx(Pe,{show:at,dialogProps:it,onCancel:()=>ee(!1),onDelete:t=>{j({...s,file_search:{vector_store_object:null,files:[],vector_store_ids:s.file_search.vector_store_ids.filter(a=>t!==a)}}),ee(!1)},onConfirm:(t,a)=>{var o;j({...s,file_search:{...s.file_search,vector_store_object:t,files:a||((o=s.file_search)==null?void 0:o.files),vector_store_ids:[t.id]}}),ee(!1)},setError:Q}),je&&e.jsx(Qe,{open:je})]}):null;return fe.createPortal(ut,F)};At.propTypes={show:C.bool,dialogProps:C.object,onCancel:C.func,onConfirm:C.func};export{At as A};
