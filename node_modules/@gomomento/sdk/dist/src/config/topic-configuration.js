"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TopicClientConfiguration = void 0;
class TopicClientConfiguration {
    constructor(props) {
        this.loggerFactory = props.loggerFactory;
        this.transportStrategy = props.transportStrategy;
        this.throwOnErrors = props.throwOnErrors;
        this.middlewares = props.middlewares;
    }
    getLoggerFactory() {
        return this.loggerFactory;
    }
    getTransportStrategy() {
        return this.transportStrategy;
    }
    withTransportStrategy(transportStrategy) {
        return new TopicClientConfiguration({
            ...this,
            transportStrategy,
        });
    }
    withNumConnections(numConnections) {
        return this.withTransportStrategy(this.getTransportStrategy().withGrpcConfig(this.getTransportStrategy()
            .getGrpcConfig()
            .withNumClients(numConnections)));
    }
    withNumStreamConnections(numConnections) {
        return this.withTransportStrategy(this.getTransportStrategy().withGrpcConfig(this.getTransportStrategy()
            .getGrpcConfig()
            .withNumStreamClients(numConnections)));
    }
    withNumUnaryConnections(numConnections) {
        return this.withTransportStrategy(this.getTransportStrategy().withGrpcConfig(this.getTransportStrategy()
            .getGrpcConfig()
            .withNumUnaryClients(numConnections)));
    }
    getThrowOnErrors() {
        return this.throwOnErrors;
    }
    withThrowOnErrors(throwOnErrors) {
        return new TopicClientConfiguration({
            ...this,
            throwOnErrors,
        });
    }
    getMiddlewares() {
        return this.middlewares;
    }
    withMiddlewares(middlewares) {
        return new TopicClientConfiguration({
            ...this,
            middlewares,
        });
    }
    addMiddleware(middleware) {
        return new TopicClientConfiguration({
            ...this,
            middlewares: [middleware, ...this.middlewares],
        });
    }
    withClientTimeoutMillis(clientTimeoutMillis) {
        return new TopicClientConfiguration({
            ...this,
            transportStrategy: this.transportStrategy.withClientTimeoutMillis(clientTimeoutMillis),
        });
    }
}
exports.TopicClientConfiguration = TopicClientConfiguration;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9waWMtY29uZmlndXJhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb25maWcvdG9waWMtY29uZmlndXJhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUF3SEEsTUFBYSx3QkFBd0I7SUFNbkMsWUFBWSxLQUE4QjtRQUN4QyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDekMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztRQUNqRCxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDekMsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxnQkFBZ0I7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztJQUVELG9CQUFvQjtRQUNsQixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztJQUNoQyxDQUFDO0lBRUQscUJBQXFCLENBQ25CLGlCQUF5QztRQUV6QyxPQUFPLElBQUksd0JBQXdCLENBQUM7WUFDbEMsR0FBRyxJQUFJO1lBQ1AsaUJBQWlCO1NBQ2xCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxjQUFzQjtRQUN2QyxPQUFPLElBQUksQ0FBQyxxQkFBcUIsQ0FDL0IsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsY0FBYyxDQUN4QyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7YUFDeEIsYUFBYSxFQUFFO2FBQ2YsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUNsQyxDQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsd0JBQXdCLENBQUMsY0FBc0I7UUFDN0MsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQy9CLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLGNBQWMsQ0FDeEMsSUFBSSxDQUFDLG9CQUFvQixFQUFFO2FBQ3hCLGFBQWEsRUFBRTthQUNmLG9CQUFvQixDQUFDLGNBQWMsQ0FBQyxDQUN4QyxDQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsdUJBQXVCLENBQUMsY0FBc0I7UUFDNUMsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQy9CLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLGNBQWMsQ0FDeEMsSUFBSSxDQUFDLG9CQUFvQixFQUFFO2FBQ3hCLGFBQWEsRUFBRTthQUNmLG1CQUFtQixDQUFDLGNBQWMsQ0FBQyxDQUN2QyxDQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsZ0JBQWdCO1FBQ2QsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxhQUFzQjtRQUN0QyxPQUFPLElBQUksd0JBQXdCLENBQUM7WUFDbEMsR0FBRyxJQUFJO1lBQ1AsYUFBYTtTQUNkLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxjQUFjO1FBQ1osT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFFRCxlQUFlLENBQUMsV0FBeUI7UUFDdkMsT0FBTyxJQUFJLHdCQUF3QixDQUFDO1lBQ2xDLEdBQUcsSUFBSTtZQUNQLFdBQVc7U0FDWixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsYUFBYSxDQUFDLFVBQXNCO1FBQ2xDLE9BQU8sSUFBSSx3QkFBd0IsQ0FBQztZQUNsQyxHQUFHLElBQUk7WUFDUCxXQUFXLEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1NBQy9DLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCx1QkFBdUIsQ0FBQyxtQkFBMkI7UUFDakQsT0FBTyxJQUFJLHdCQUF3QixDQUFDO1lBQ2xDLEdBQUcsSUFBSTtZQUNQLGlCQUFpQixFQUNmLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyx1QkFBdUIsQ0FBQyxtQkFBbUIsQ0FBQztTQUN0RSxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUFoR0QsNERBZ0dDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtNb21lbnRvTG9nZ2VyRmFjdG9yeX0gZnJvbSAnQGdvbW9tZW50by9zZGstY29yZSc7XG5pbXBvcnQge1RvcGljVHJhbnNwb3J0U3RyYXRlZ3l9IGZyb20gJy4vdHJhbnNwb3J0L3RvcGljcyc7XG5pbXBvcnQge01pZGRsZXdhcmV9IGZyb20gJy4vbWlkZGxld2FyZS9taWRkbGV3YXJlJztcblxuZXhwb3J0IGludGVyZmFjZSBUb3BpY0NvbmZpZ3VyYXRpb25Qcm9wcyB7XG4gIC8qKlxuICAgKiBDb25maWd1cmVzIGxvZ2dpbmcgdmVyYm9zaXR5IGFuZCBmb3JtYXRcbiAgICovXG4gIGxvZ2dlckZhY3Rvcnk6IE1vbWVudG9Mb2dnZXJGYWN0b3J5O1xuXG4gIC8qKlxuICAgKiBDb25maWd1cmVzIGxvdy1sZXZlbCBvcHRpb25zIGZvciBuZXR3b3JrIGludGVyYWN0aW9ucyB3aXRoIHRoZSBNb21lbnRvIHNlcnZpY2VcbiAgICovXG4gIHRyYW5zcG9ydFN0cmF0ZWd5OiBUb3BpY1RyYW5zcG9ydFN0cmF0ZWd5O1xuXG4gIC8qKlxuICAgKiBDb25maWd1cmVzIHdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgcmV0dXJuIGEgTW9tZW50byBFcnJvciBvYmplY3Qgb3IgdGhyb3cgYW4gZXhjZXB0aW9uIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICAgKi9cbiAgdGhyb3dPbkVycm9yczogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ29uZmlndXJlcyBtaWRkbGV3YXJlIGZ1bmN0aW9ucyB0aGF0IHdpbGwgd3JhcCBlYWNoIHJlcXVlc3RcbiAgICovXG4gIG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlW107XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBNb21lbnRvIFRvcGljQ2xpZW50XG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBUb3BpY0NvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb3BpY0NvbmZpZ3VyYXRpb24ge1xuICAvKipcbiAgICogQHJldHVybnMge01vbWVudG9Mb2dnZXJGYWN0b3J5fSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGxvZ2dpbmcgdmVyYm9zaXR5IGFuZCBmb3JtYXRcbiAgICovXG4gIGdldExvZ2dlckZhY3RvcnkoKTogTW9tZW50b0xvZ2dlckZhY3Rvcnk7XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtUcmFuc3BvcnRTdHJhdGVneX0gdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB3aXJlIGludGVyYWN0aW9ucyB3aXRoIHRoZSBNb21lbnRvIHNlcnZpY2VcbiAgICovXG4gIGdldFRyYW5zcG9ydFN0cmF0ZWd5KCk6IFRvcGljVHJhbnNwb3J0U3RyYXRlZ3k7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBgd2l0aE51bVN0cmVhbUNvbm5lY3Rpb25zKClgIGFuZCBgd2l0aE51bVVuYXJ5Q29ubmVjdGlvbnMoKWAgaW5zdGVhZC5cbiAgICogU2hvcnRoYW5kIGNvcHkgY29uc3RydWN0b3IgZm9yIG92ZXJyaWRpbmcgVHJhbnNwb3J0U3RyYXRlZ3kuR3JwY1N0cmF0ZWd5Lk51bUNsaWVudHMuIFRoaXMgd2lsbFxuICAgKiBhbGxvdyB5b3UgdG8gY29udHJvbCB0aGUgbnVtYmVyIG9mIFRDUCBjb25uZWN0aW9ucyB0aGF0IHRoZSBjbGllbnQgd2lsbCBvcGVuIHRvIHRoZSBzZXJ2ZXIuIFVzdWFsbHlcbiAgICogeW91IHNob3VsZCBzdGljayB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlIGZyb20geW91ciBwcmUtYnVpbHQgY29uZmlndXJhdGlvbiwgYnV0IGl0IGNhbiBiZSB2YWx1YWJsZVxuICAgKiB0byBpbmNyZWFzZSB0aGlzIHZhbHVlIGluIG9yZGVyIHRvIGVuc3VyZSBtb3JlIGV2ZW5seSBkaXN0cmlidXRlZCBsb2FkIG9uIE1vbWVudG8gc2VydmVycy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG51bUNvbm5lY3Rpb25zXG4gICAqIEByZXR1cm5zIHtDb25maWd1cmF0aW9ufSBhIG5ldyBDb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIHRoZSB1cGRhdGVkIFRyYW5zcG9ydFN0cmF0ZWd5XG4gICAqL1xuICB3aXRoTnVtQ29ubmVjdGlvbnMobnVtQ29ubmVjdGlvbnM6IG51bWJlcik6IFRvcGljQ29uZmlndXJhdGlvbjtcblxuICAvKipcbiAgICogU2hvcnRoYW5kIGNvcHkgY29uc3RydWN0b3IgZm9yIG92ZXJyaWRpbmcgVHJhbnNwb3J0U3RyYXRlZ3kuR3JwY1N0cmF0ZWd5Lk51bVN0cmVhbUNsaWVudHMuIFRoaXMgd2lsbFxuICAgKiBhbGxvdyB5b3UgdG8gY29udHJvbCB0aGUgbnVtYmVyIG9mIFRDUCBjb25uZWN0aW9ucyB0aGF0IHRoZSBjbGllbnQgd2lsbCBvcGVuIHRvIHRoZSBzZXJ2ZXIgZm9yIHN0cmVhbWluZ1xuICAgKiByZXF1ZXN0cy4gVXN1YWxseSB5b3Ugc2hvdWxkIHN0aWNrIHdpdGggdGhlIGRlZmF1bHQgdmFsdWUgZnJvbSB5b3VyIHByZS1idWlsdCBjb25maWd1cmF0aW9uLCBidXQgaXQgY2FuIGJlIHZhbHVhYmxlXG4gICAqIHRvIGluY3JlYXNlIHRoaXMgdmFsdWUgaW4gb3JkZXIgdG8gZW5zdXJlIG1vcmUgZXZlbmx5IGRpc3RyaWJ1dGVkIGxvYWQgb24gTW9tZW50byBzZXJ2ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtQ29ubmVjdGlvbnNcbiAgICogQHJldHVybnMge0NvbmZpZ3VyYXRpb259IGEgbmV3IENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggdGhlIHVwZGF0ZWQgVHJhbnNwb3J0U3RyYXRlZ3lcbiAgICovXG4gIHdpdGhOdW1TdHJlYW1Db25uZWN0aW9ucyhudW1Db25uZWN0aW9uczogbnVtYmVyKTogVG9waWNDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBTaG9ydGhhbmQgY29weSBjb25zdHJ1Y3RvciBmb3Igb3ZlcnJpZGluZyBUcmFuc3BvcnRTdHJhdGVneS5HcnBjU3RyYXRlZ3kuTnVtVW5hcnlDbGllbnRzLiBUaGlzIHdpbGxcbiAgICogYWxsb3cgeW91IHRvIGNvbnRyb2wgdGhlIG51bWJlciBvZiBUQ1AgY29ubmVjdGlvbnMgdGhhdCB0aGUgY2xpZW50IHdpbGwgb3BlbiB0byB0aGUgc2VydmVyIGZvciB1bmFyeVxuICAgKiByZXF1ZXN0cy4gVXN1YWxseSB5b3Ugc2hvdWxkIHN0aWNrIHdpdGggdGhlIGRlZmF1bHQgdmFsdWUgZnJvbSB5b3VyIHByZS1idWlsdCBjb25maWd1cmF0aW9uLCBidXQgaXQgY2FuIGJlIHZhbHVhYmxlXG4gICAqIHRvIGluY3JlYXNlIHRoaXMgdmFsdWUgaW4gb3JkZXIgdG8gZW5zdXJlIG1vcmUgZXZlbmx5IGRpc3RyaWJ1dGVkIGxvYWQgb24gTW9tZW50byBzZXJ2ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtQ29ubmVjdGlvbnNcbiAgICogQHJldHVybnMge0NvbmZpZ3VyYXRpb259IGEgbmV3IENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggdGhlIHVwZGF0ZWQgVHJhbnNwb3J0U3RyYXRlZ3lcbiAgICovXG4gIHdpdGhOdW1VbmFyeUNvbm5lY3Rpb25zKG51bUNvbm5lY3Rpb25zOiBudW1iZXIpOiBUb3BpY0NvbmZpZ3VyYXRpb247XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBDb25maWd1cmVzIHdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgcmV0dXJuIGEgTW9tZW50byBFcnJvciBvYmplY3Qgb3IgdGhyb3cgYW4gZXhjZXB0aW9uIHdoZW4gYW5cbiAgICogZXJyb3Igb2NjdXJzLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHNldCB0byBmYWxzZSwgYW5kIHRoZSBjbGllbnQgd2lsbCByZXR1cm4gYSBNb21lbnRvIEVycm9yIG9iamVjdCBvbiBlcnJvcnMuIFNldCBpdFxuICAgKiB0byB0cnVlIGlmIHlvdSBwcmVmZXIgZm9yIGV4Y2VwdGlvbnMgdG8gYmUgdGhyb3duLlxuICAgKi9cbiAgZ2V0VGhyb3dPbkVycm9ycygpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDb3B5IGNvbnN0cnVjdG9yIGZvciBjb25maWd1cmluZyB3aGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIHJldHVybiBhIE1vbWVudG8gRXJyb3Igb2JqZWN0IG9yIHRocm93IGFuIGV4Y2VwdGlvbiB3aGVuIGFuXG4gICAqIGVycm9yIG9jY3Vycy4gQnkgZGVmYXVsdCwgdGhpcyBpcyBzZXQgdG8gZmFsc2UsIGFuZCB0aGUgY2xpZW50IHdpbGwgcmV0dXJuIGEgTW9tZW50byBFcnJvciBvYmplY3Qgb24gZXJyb3JzLiBTZXQgaXRcbiAgICogdG8gdHJ1ZSBpZiB5b3UgcHJlZmVyIGZvciBleGNlcHRpb25zIHRvIGJlIHRocm93bi5cbiAgICogQHBhcmFtIHtib29sZWFufSB0aHJvd09uRXJyb3JzXG4gICAqIEByZXR1cm5zIHtDb25maWd1cmF0aW9ufSBhIG5ldyBDb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQgdGhyb3dPbkVycm9ycyBzZXR0aW5nXG4gICAqL1xuICB3aXRoVGhyb3dPbkVycm9ycyh0aHJvd09uRXJyb3JzOiBib29sZWFuKTogVG9waWNDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7TWlkZGxld2FyZVtdfSB0aGUgbWlkZGxld2FyZSBmdW5jdGlvbnMgdGhhdCB3aWxsIHdyYXAgZWFjaCByZXF1ZXN0XG4gICAqL1xuICBnZXRNaWRkbGV3YXJlcygpOiBNaWRkbGV3YXJlW107XG5cbiAgLyoqXG4gICAqIENvcHkgY29uc3RydWN0b3IgZm9yIGNvbmZpZ3VyaW5nIG1pZGRsZXdhcmUgZnVuY3Rpb25zIHRoYXQgd2lsbCB3cmFwIGVhY2ggcmVxdWVzdFxuICAgKiBAcGFyYW0ge01pZGRsZXdhcmVbXX0gbWlkZGxld2FyZVxuICAgKiBAcmV0dXJucyB7VG9waWNDb25maWd1cmF0aW9ufSBhIG5ldyBUb3BpY0NvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBtaWRkbGV3YXJlXG4gICAqL1xuICB3aXRoTWlkZGxld2FyZXMobWlkZGxld2FyZTogTWlkZGxld2FyZVtdKTogVG9waWNDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBDb3B5IGNvbnN0cnVjdG9yIHRoYXQgYWRkcyBhIHNpbmdsZSBtaWRkbGV3YXJlIHRvIHRoZSBleGlzdGluZyBtaWRkbGV3YXJlc1xuICAgKiBAcGFyYW0ge01pZGRsZXdhcmV9IG1pZGRsZXdhcmVcbiAgICogQHJldHVybnMge1RvcGljQ29uZmlndXJhdGlvbn0gYSBuZXcgVG9waWNDb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQgTWlkZGxld2FyZSBhcHBlbmRlZCB0byB0aGUgbGlzdCBvZiBleGlzdGluZyBNaWRkbGV3YXJlc1xuICAgKi9cbiAgYWRkTWlkZGxld2FyZShtaWRkbGV3YXJlOiBNaWRkbGV3YXJlKTogVG9waWNDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBjb3B5IGNvbnN0cnVjdG9yIHRoYXQgdXBkYXRlcyB0aGUgY2xpZW50LXNpZGUgdGltZW91dCBzZXR0aW5nIGluIHRoZSBUcmFuc3BvcnRTdHJhdGVneVxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xpZW50VGltZW91dE1pbGxpc1xuICAgKiBAcmV0dXJucyB7Q29uZmlndXJhdGlvbn0gYSBuZXcgVG9waWNDb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGl0cyBUcmFuc3BvcnRTdHJhdGVneSB1cGRhdGVkIHRvIHVzZSB0aGUgc3BlY2lmaWVkIGNsaWVudCB0aW1lb3V0XG4gICAqL1xuICB3aXRoQ2xpZW50VGltZW91dE1pbGxpcyhjbGllbnRUaW1lb3V0TWlsbGlzOiBudW1iZXIpOiBUb3BpY0NvbmZpZ3VyYXRpb247XG59XG5cbmV4cG9ydCBjbGFzcyBUb3BpY0NsaWVudENvbmZpZ3VyYXRpb24gaW1wbGVtZW50cyBUb3BpY0NvbmZpZ3VyYXRpb24ge1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlckZhY3Rvcnk6IE1vbWVudG9Mb2dnZXJGYWN0b3J5O1xuICBwcml2YXRlIHJlYWRvbmx5IHRyYW5zcG9ydFN0cmF0ZWd5OiBUb3BpY1RyYW5zcG9ydFN0cmF0ZWd5O1xuICBwcml2YXRlIHJlYWRvbmx5IHRocm93T25FcnJvcnM6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgbWlkZGxld2FyZXM6IE1pZGRsZXdhcmVbXTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVG9waWNDb25maWd1cmF0aW9uUHJvcHMpIHtcbiAgICB0aGlzLmxvZ2dlckZhY3RvcnkgPSBwcm9wcy5sb2dnZXJGYWN0b3J5O1xuICAgIHRoaXMudHJhbnNwb3J0U3RyYXRlZ3kgPSBwcm9wcy50cmFuc3BvcnRTdHJhdGVneTtcbiAgICB0aGlzLnRocm93T25FcnJvcnMgPSBwcm9wcy50aHJvd09uRXJyb3JzO1xuICAgIHRoaXMubWlkZGxld2FyZXMgPSBwcm9wcy5taWRkbGV3YXJlcztcbiAgfVxuXG4gIGdldExvZ2dlckZhY3RvcnkoKTogTW9tZW50b0xvZ2dlckZhY3Rvcnkge1xuICAgIHJldHVybiB0aGlzLmxvZ2dlckZhY3Rvcnk7XG4gIH1cblxuICBnZXRUcmFuc3BvcnRTdHJhdGVneSgpOiBUb3BpY1RyYW5zcG9ydFN0cmF0ZWd5IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc3BvcnRTdHJhdGVneTtcbiAgfVxuXG4gIHdpdGhUcmFuc3BvcnRTdHJhdGVneShcbiAgICB0cmFuc3BvcnRTdHJhdGVneTogVG9waWNUcmFuc3BvcnRTdHJhdGVneVxuICApOiBUb3BpY0NvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiBuZXcgVG9waWNDbGllbnRDb25maWd1cmF0aW9uKHtcbiAgICAgIC4uLnRoaXMsXG4gICAgICB0cmFuc3BvcnRTdHJhdGVneSxcbiAgICB9KTtcbiAgfVxuXG4gIHdpdGhOdW1Db25uZWN0aW9ucyhudW1Db25uZWN0aW9uczogbnVtYmVyKTogVG9waWNDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gdGhpcy53aXRoVHJhbnNwb3J0U3RyYXRlZ3koXG4gICAgICB0aGlzLmdldFRyYW5zcG9ydFN0cmF0ZWd5KCkud2l0aEdycGNDb25maWcoXG4gICAgICAgIHRoaXMuZ2V0VHJhbnNwb3J0U3RyYXRlZ3koKVxuICAgICAgICAgIC5nZXRHcnBjQ29uZmlnKClcbiAgICAgICAgICAud2l0aE51bUNsaWVudHMobnVtQ29ubmVjdGlvbnMpXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHdpdGhOdW1TdHJlYW1Db25uZWN0aW9ucyhudW1Db25uZWN0aW9uczogbnVtYmVyKTogVG9waWNDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gdGhpcy53aXRoVHJhbnNwb3J0U3RyYXRlZ3koXG4gICAgICB0aGlzLmdldFRyYW5zcG9ydFN0cmF0ZWd5KCkud2l0aEdycGNDb25maWcoXG4gICAgICAgIHRoaXMuZ2V0VHJhbnNwb3J0U3RyYXRlZ3koKVxuICAgICAgICAgIC5nZXRHcnBjQ29uZmlnKClcbiAgICAgICAgICAud2l0aE51bVN0cmVhbUNsaWVudHMobnVtQ29ubmVjdGlvbnMpXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHdpdGhOdW1VbmFyeUNvbm5lY3Rpb25zKG51bUNvbm5lY3Rpb25zOiBudW1iZXIpOiBUb3BpY0NvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiB0aGlzLndpdGhUcmFuc3BvcnRTdHJhdGVneShcbiAgICAgIHRoaXMuZ2V0VHJhbnNwb3J0U3RyYXRlZ3koKS53aXRoR3JwY0NvbmZpZyhcbiAgICAgICAgdGhpcy5nZXRUcmFuc3BvcnRTdHJhdGVneSgpXG4gICAgICAgICAgLmdldEdycGNDb25maWcoKVxuICAgICAgICAgIC53aXRoTnVtVW5hcnlDbGllbnRzKG51bUNvbm5lY3Rpb25zKVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBnZXRUaHJvd09uRXJyb3JzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRocm93T25FcnJvcnM7XG4gIH1cblxuICB3aXRoVGhyb3dPbkVycm9ycyh0aHJvd09uRXJyb3JzOiBib29sZWFuKTogVG9waWNDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IFRvcGljQ2xpZW50Q29uZmlndXJhdGlvbih7XG4gICAgICAuLi50aGlzLFxuICAgICAgdGhyb3dPbkVycm9ycyxcbiAgICB9KTtcbiAgfVxuXG4gIGdldE1pZGRsZXdhcmVzKCk6IE1pZGRsZXdhcmVbXSB7XG4gICAgcmV0dXJuIHRoaXMubWlkZGxld2FyZXM7XG4gIH1cblxuICB3aXRoTWlkZGxld2FyZXMobWlkZGxld2FyZXM6IE1pZGRsZXdhcmVbXSk6IFRvcGljQ29uZmlndXJhdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBUb3BpY0NsaWVudENvbmZpZ3VyYXRpb24oe1xuICAgICAgLi4udGhpcyxcbiAgICAgIG1pZGRsZXdhcmVzLFxuICAgIH0pO1xuICB9XG5cbiAgYWRkTWlkZGxld2FyZShtaWRkbGV3YXJlOiBNaWRkbGV3YXJlKTogVG9waWNDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IFRvcGljQ2xpZW50Q29uZmlndXJhdGlvbih7XG4gICAgICAuLi50aGlzLFxuICAgICAgbWlkZGxld2FyZXM6IFttaWRkbGV3YXJlLCAuLi50aGlzLm1pZGRsZXdhcmVzXSxcbiAgICB9KTtcbiAgfVxuXG4gIHdpdGhDbGllbnRUaW1lb3V0TWlsbGlzKGNsaWVudFRpbWVvdXRNaWxsaXM6IG51bWJlcik6IFRvcGljQ29uZmlndXJhdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBUb3BpY0NsaWVudENvbmZpZ3VyYXRpb24oe1xuICAgICAgLi4udGhpcyxcbiAgICAgIHRyYW5zcG9ydFN0cmF0ZWd5OlxuICAgICAgICB0aGlzLnRyYW5zcG9ydFN0cmF0ZWd5LndpdGhDbGllbnRUaW1lb3V0TWlsbGlzKGNsaWVudFRpbWVvdXRNaWxsaXMpLFxuICAgIH0pO1xuICB9XG59XG4iXX0=